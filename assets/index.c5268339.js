var yt=Object.defineProperty,Lt=Object.defineProperties;var wt=Object.getOwnPropertyDescriptors;var Q=Object.getOwnPropertySymbols;var bt=Object.prototype.hasOwnProperty,Pt=Object.prototype.propertyIsEnumerable;var tt=(u,p,m)=>p in u?yt(u,p,{enumerable:!0,configurable:!0,writable:!0,value:m}):u[p]=m,V=(u,p)=>{for(var m in p||(p={}))bt.call(p,m)&&tt(u,m,p[m]);if(Q)for(var m of Q(p))Pt.call(p,m)&&tt(u,m,p[m]);return u},et=(u,p)=>Lt(u,wt(p));import{d as z,o as k,c as E,p as q,a as Y,b as w,e as xt,u as Mt,r as it,f as ot,t as nt,g as C,h as Z,i as U,w as R,j as H,k as st,l as Dt,m as X,n as at,q as Tt,s as kt,E as rt,v as Et,x as Ct,y as St,z as zt,A as Ut,B as Ot,C as Bt,D as It,F as At,G as Zt,H as j,I as Rt,J as ht,K as Nt,L as Ht,M as lt,N as Gt,O as Ft,P as jt,Q as $t,R as Wt,S as Vt,T as qt,U as Yt,V as Xt,W as Jt,X as Kt}from"./vendor.d25024d4.js";const Qt=function(){const p=document.createElement("link").relList;if(p&&p.supports&&p.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const h of e)if(h.type==="childList")for(const c of h.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function m(e){const h={};return e.integrity&&(h.integrity=e.integrity),e.referrerpolicy&&(h.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?h.credentials="include":e.crossorigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function s(e){if(e.ep)return;e.ep=!0;const h=m(e);fetch(e.href,h)}};Qt();const te="modulepreload",ct={},ee="./",ie=function(p,m){return!m||m.length===0?p():Promise.all(m.map(s=>{if(s=`${ee}${s}`,s in ct)return;ct[s]=!0;const e=s.endsWith(".css"),h=e?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${s}"]${h}`))return;const c=document.createElement("link");if(c.rel=e?"stylesheet":te,e||(c.as="script",c.crossOrigin=""),c.href=s,document.head.appendChild(c),e)return new Promise((f,v)=>{c.addEventListener("load",f),c.addEventListener("error",v)})})).then(()=>p())};var oe="./assets/logo.cb0f281f.svg";var S=(u,p)=>{const m=u.__vccOpts||u;for(const[s,e]of p)m[s]=e;return m};const ne=z({name:"Home"}),ut=u=>(q("data-v-d7530ac4"),u=u(),Y(),u),se={class:"home-container page-container"},ae=ut(()=>w("img",{class:"vue-element-plus-logo",alt:"Vue logo",src:oe},null,-1)),re=ut(()=>w("div",{class:"page-title"},"C\u0438\u0441\u0442\u0435\u043C\u0430 \u043C\u043E\u043D\u0456\u0442\u043E\u0440\u0438\u043D\u0433\u0443 \u0441\u0442\u0430\u043D\u0443 \u043B\u0456\u0441\u043E\u0432\u0438\u0445 \u0435\u043A\u043E\u0441\u0438\u0441\u0442\u0435\u043C \u041B\u044C\u0432\u0456\u0432\u0441\u044C\u043A\u043E\u0457 \u043E\u0431\u043B\u0430\u0441\u0442\u0456",-1)),he=[ae,re];function le(u,p,m,s,e,h){return k(),E("div",se,he)}var ce=S(ne,[["render",le],["__scopeId","data-v-d7530ac4"]]);const ue={namespaced:!0,state:{name:"numFactory-module",count:1},mutations:{DOUBLE_COUNT(u){u.count*=2}},actions:{}},de=xt({state:{text:"This is Vuex Root.state.text"},getters:{},mutations:{},actions:{},modules:{numFactoryModule:ue}}),dt=Symbol("vue-store");function _e(){return Mt(dt)}const pe=z({name:"Vuex",setup(){const u=_e(),p=it({text:ot(()=>u.state.text),count:ot(()=>u.state.numFactoryModule.count)}),m=()=>{u.commit("numFactoryModule/DOUBLE_COUNT")};return et(V({},nt(p)),{double:m})}}),me={class:"vuex-container page-container"},fe=w("div",{class:"page-title"},"Vuex Test Page",-1),ge=H("double");function ve(u,p,m,s,e,h){const c=C("el-button");return k(),E("div",me,[fe,w("p",null,"store Root is: "+Z(u.text),1),w("p",null,"store doubleCount is: "+Z(u.count),1),U(c,{type:"primary",onClick:u.double},{default:R(()=>[ge]),_:1},8,["onClick"])])}var ye=S(pe,[["render",ve]]);const Le={name:"AcceptForestReport",inheritAttrs:!1,emits:["confirm","cancel","descriptionChanges"],data:()=>({description:st("")}),beforeMount(){Dt(()=>{this.$emit("descriptionChanges",this.description)})}},we={class:"modal__title"},be={class:"modal__content"},Pe={class:"modal__action"},xe=H("confirm"),Me=H("cancel");function De(u,p,m,s,e,h){const c=C("el-input"),f=C("el-button"),v=C("vue-final-modal");return k(),X(v,Tt(u.$attrs,{classes:"modal-container","content-class":"modal-content"}),{default:R(({params:t,close:i})=>[w("span",we,[at(u.$slots,"title",{},void 0,!0)]),w("div",be,[at(u.$slots,"default",{params:t},void 0,!0)]),U(c,{modelValue:u.description,"onUpdate:modelValue":p[0]||(p[0]=o=>u.description=o)},null,8,["modelValue"]),w("div",Pe,[U(f,{onClick:o=>u.$emit("confirm",i)},{default:R(()=>[xe]),_:2},1032,["onClick"]),U(f,{onClick:o=>u.$emit("cancel",i)},{default:R(()=>[Me]),_:2},1032,["onClick"])])]),_:3},16)}var Te=S(Le,[["render",De],["__scopeId","data-v-6c775568"]]);const ke="https://5f3e441413a9640016a6887c.mockapi.io",O=kt.create({baseURL:ke,timeout:2e4});O.interceptors.request.use(u=>u,u=>Promise.reject(u));O.interceptors.response.use(u=>u,u=>{if(u.response&&u.response.data){const p=u.response.status,m=u.response.data.message;rt.error(`Code: ${p}, Message: ${m}`),console.error("[Axios Error]",u.response)}else rt.error(`${u}`);return Promise.reject(u)});const Ee={components:{LMap:Et,LIcon:Ct,LTileLayer:St,LMarker:zt,LControlLayers:Ut,LTooltip:Ot,LPopup:Bt,LPolyline:It,LPolygon:At,LRectangle:Zt,AcceptForestReport:Te},data:()=>({zoom:15,iconWidth:25,iconHeight:40,show:!1}),computed:{iconUrl(){return`https://placekitten.com/${this.iconWidth}/${this.iconHeight}`},iconSize(){return[this.iconWidth,this.iconHeight]}},async mounted(){var u=new L.icon({iconUrl:"https://www.pngall.com/wp-content/uploads/2017/05/Map-Marker-Free-Download-PNG.png",iconSize:[64,64]}),p=new L.TileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{maxZoom:30}),m=new L.Map("map",{layers:[p],center:new L.LatLng(49.829446,24.024567),zoom:12}),s=new L.FeatureGroup;m.addLayer(s);var e=[];await O.get("/city").then(t=>{console.log("response: ",t.data),e=t.data.map(i=>{let o=null;try{o=L.marker([Number(i.lat),Number(i.lon)],{icon:u}),o.bindPopup(i.city)}catch(n){console.log(n)}if(o)return o})}).catch(t=>{console.error(t)}),console.log(e);for(let t of e)t.addTo(m);var h=new L.FeatureGroup;m.addLayer(h),this.drawnItems=h;var c=[];await O.get("/forest").then(t=>{console.log("response: ",t.data),c=t.data.map(i=>{let o=L.polygon(i.polygon);return i.description&&o.bindPopup(i.description),o.description=i.description,o.id=i.id,o})}).catch(t=>{console.error(t)}),console.log(c);for(let t of c)h.addLayer(t);L.drawLocal.draw.toolbar.buttons.circle="\u0412\u0438\u0434\u0456\u043B\u0438\u0442\u0438 \u043A\u0440\u0443\u0433\u043B\u0443 \u043E\u0431\u043B\u0430\u0441\u0442\u044C",L.drawLocal.draw.toolbar.buttons.marker="\u041F\u043E\u0441\u0442\u0430\u0432\u0438\u0442\u0438 \u043C\u0430\u0440\u043A\u0435\u0440",L.drawLocal.draw.toolbar.buttons.polygon="\u0412\u0438\u0434\u0456\u043B\u0438\u0442\u0438 \u043D\u0435\u0441\u0442\u0430\u043D\u0434\u0430\u0440\u0442\u043D\u0443 \u043E\u0431\u043B\u0430\u0441\u0442\u044C",L.drawLocal.draw.toolbar.buttons.polyline="\u0412\u0438\u0434\u0456\u043B\u0438\u0442\u0438 \u043B\u0456\u043D\u0456\u0454\u044E",L.drawLocal.draw.toolbar.buttons.rectangle="\u0412\u0438\u0434\u0456\u043B\u0438\u0442\u0438 \u043F\u0440\u044F\u043C\u043E\u043A\u0443\u0442\u043D\u0438\u043A\u043E\u043C";var f=new L.Control.Draw({position:"topright",draw:{polyline:!1,polygon:{allowIntersection:!1,showArea:!0,drawError:{color:"#b00b00",timeout:1e3},shapeOptions:{color:"#bada55"}},circle:!1,marker:!1},edit:{featureGroup:h,remove:!0}});m.addControl(f);var v=this;m.on("draw:created",function(t){var i=t.layerType,o=t.layer;i==="marker"&&o.bindPopup("A popup!"),h.addLayer(o),v.show=!0,v.lastLayer=o,console.log(o)}),m.on("draw:edited",function(t){var i=t.layers,o=0;i.eachLayer(function(n){o++}),console.log("Edited "+o+" layers")}),m.on("draw:deleted",function(t){console.log(t);let i=Object.values(t.layers._layers).map(o=>o.id);console.log(i),i.forEach(async o=>{await O.delete(`/forest/${o}`)})})},methods:{log(u){console.log(u)},async confirm(){this.show=!1,console.log(this.lastLayer),await O.get("/forest").then(async u=>{console.log(this.lastLayer._latlngs);let p=u.data[u.data.length-1],m=p!=null?Number(p.id)+1:1;await O.post("/forest",{id:m,polygon:this.lastLayer._latlngs[0],description:this.lastLayer.description}),this.lastLayer.id=m}).catch(u=>{console.error(u)})},cancel(u){this.drawnItems.removeLayer(this.lastLayer),u()},descriptionChanges(u){this.lastLayer&&(this.lastLayer.description=u,this.lastLayer.bindPopup(u))}}},Ce=w("div",{id:"map",style:{height:"100%",width:"100%"}},null,-1),Se=H("\u041F\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0456\u0442\u044C \u0434\u0456\u044E"),ze=w("p",null,"\u0412\u0438 \u0434\u043E\u0434\u0430\u0454\u0442\u0435 \u043D\u043E\u0432\u0443 \u0434\u0456\u043B\u044F\u043D\u043A\u0443",-1);function Ue(u,p,m,s,e,h){const c=C("AcceptForestReport");return k(),E(j,null,[Ce,U(c,{modelValue:u.show,"onUpdate:modelValue":p[0]||(p[0]=f=>u.show=f),onConfirm:h.confirm,onCancel:h.cancel,onDescriptionChanges:h.descriptionChanges},{title:R(()=>[Se]),default:R(()=>[ze]),_:1},8,["modelValue","onConfirm","onCancel","onDescriptionChanges"])],64)}var Oe=S(Ee,[["render",Ue]]);const Be=z({components:{Lviv:Oe},name:"Home"});function Ie(u,p,m,s,e,h){const c=C("Lviv");return k(),X(c)}var Ae=S(Be,[["render",Ie],["__scopeId","data-v-5f55f790"]]);const Ze=z({computed:{imageUrl(){return`url(${this.image})`}},props:{title:{type:String,required:!1,default(){}},id:{type:Number,required:!1,default(){}},description:{type:String,required:!1,default(){}},image:{type:String,required:!1,default(){}},author:{type:String,required:!1,default(){}}}}),$=u=>(q("data-v-2c82ea8c"),u=u(),Y(),u),Re={class:"main"},Ne=$(()=>w("div",{class:"source-link"},[w("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 500 500",style:{"enable-background":"new 0 0 500 500"},"xml:space":"preserve"},[w("g",{id:"XMLID_1_"},[w("rect",{id:"XMLID_3_",x:"67.5",y:"112.7",class:"st0",width:"365",height:"274.7"}),w("path",{id:"XMLID_4_",class:"st1",d:`M259.2,209c0,1.3-0.4,2.6-1.6,3.6c-1.2,1-3.2,1.8-6.5,1.8h-6.7v-10.7h6.4c3,0,5.1,0.6,6.4,1.6
                        C258.6,206.2,259.2,207.5,259.2,209`}),w("path",{id:"XMLID_5_",class:"st1",d:`M253.7,196.2c1.2-0.9,1.8-2.2,1.9-4.1c0-1.3-0.4-2.4-1.3-3.3c-0.9-0.8-2.5-1.4-5.1-1.4h-4.7
                        v10.2h3.3C250.5,197.6,252.5,197.1,253.7,196.2`}),w("path",{id:"XMLID_8_",class:"st1",d:`M266.4,209.8c0-5-3.3-8.7-8.6-10.2c1.4-0.7,2.6-1.6,3.4-2.7c1.1-1.5,1.6-3.2,1.6-5.3
                        c0-2.6-1-5.2-3.2-7.1c-2.2-2-5.4-3.2-9.9-3.2h-12.4v39.4h14.5h0c5.2,0,8.8-1.4,11.2-3.5C265.4,215,266.4,212.3,266.4,209.8
                        M280.2,228.2h-58.1v-54.7h58.1V228.2z`}),w("path",{id:"XMLID_9_",class:"st1",d:`M186.8,196.2c1.2-0.9,1.8-2.2,1.9-4.1c0-1.3-0.4-2.4-1.3-3.3c-0.9-0.8-2.5-1.4-5.1-1.4h-4.7
                        v10.2h3.3C183.5,197.6,185.6,197.1,186.8,196.2`}),w("path",{id:"XMLID_10_",class:"st1",d:`M190.3,205.3c-1.3-0.9-3.4-1.6-6.4-1.6h-6.4v10.7h6.7c3.3,0,5.3-0.8,6.5-1.8
                        c1.2-1,1.6-2.3,1.6-3.6C192.2,207.5,191.6,206.2,190.3,205.3`}),w("path",{id:"XMLID_13_",class:"st1",d:`M199.5,209.8c0-5-3.3-8.7-8.6-10.2c1.4-0.7,2.6-1.6,3.4-2.7c1.1-1.5,1.6-3.2,1.6-5.3
                        c0-2.6-1-5.2-3.2-7.1c-2.2-2-5.4-3.2-9.9-3.2h-12.4v39.4h14.5h0c5.2,0,8.8-1.4,11.2-3.5C198.5,215,199.5,212.3,199.5,209.8
                        M213.3,228.2h-58.1v-54.7h58.1V228.2z`}),w("path",{id:"XMLID_16_",class:"st1",d:`M335.6,210.1l-0.9,0.6c-4.5,2.7-9.4,4.2-13.8,4.2c-9.5,0-15.8-5.7-15.8-13.9
                        c0-8,6.6-14,15.6-14c4.6,0,8.7,1.2,13.7,3.9l0.9,0.5v-7.3l-0.4-0.2c-5.6-2.2-9.9-3.2-14.1-3.2c-6.6,0-12.3,2.2-16.4,5.9
                        c-4.1,3.7-6.5,8.9-6.5,14.9c0,4.2,1.7,9.1,5.4,12.9c3.7,3.9,9.3,6.7,17.1,6.7h0c6.4,0,10.9-1.4,14.9-3.4l0.3-0.2L335.6,210.1
                        L335.6,210.1z M347.1,228.2H289v-54.7h58.1V228.2z`}),w("polygon",{id:"XMLID_17_",class:"st1",points:`170.2,258.6 179,258.6 179,323.1 171.1,323.1 127.9,273.4 127.9,323.1 119.2,323.1 
                        119.2,258.6 126.7,258.6 170.2,308.7 	`}),w("polygon",{id:"XMLID_18_",class:"st1",points:`195.7,258.6 232.2,258.6 232.2,266.8 204.9,266.8 204.9,286.5 231.3,286.5 
                        231.3,294.8 204.9,294.8 204.9,314.8 233.1,314.8 233.1,323.1 195.7,323.1 	`}),w("polygon",{id:"XMLID_19_",class:"st1",points:`330.9,258.6 340.1,258.6 314,323.4 311.9,323.4 290.8,270.9 269.5,323.4 267.5,323.4 
                        241.5,258.6 250.8,258.6 268.6,303.1 286.5,258.6 295.3,258.6 313.3,303.1 	`}),w("path",{id:"XMLID_20_",class:"st1",d:`M365.1,296.1l-7-4.3c-4.4-2.7-7.5-5.3-9.4-7.9c-1.9-2.6-2.8-5.6-2.8-9c0-5.1,1.8-9.2,5.3-12.4
                        c3.5-3.2,8.1-4.8,13.7-4.8c5.4,0,10.3,1.5,14.8,4.5v10.5c-4.7-4.5-9.7-6.7-15-6.7c-3,0-5.5,0.7-7.4,2.1c-1.9,1.4-2.9,3.2-2.9,5.4
                        c0,1.9,0.7,3.7,2.1,5.4c1.4,1.7,3.7,3.5,6.9,5.3l7.1,4.2c7.9,4.7,11.8,10.7,11.8,18c0,5.2-1.7,9.4-5.2,12.6
                        c-3.5,3.2-8,4.8-13.5,4.8c-6.4,0-12.2-2-17.4-5.9v-11.7c5,6.3,10.8,9.5,17.3,9.5c2.9,0,5.3-0.8,7.2-2.4s2.9-3.6,2.9-6.1
                        C373.6,303.4,370.8,299.6,365.1,296.1`})])])],-1)),He={class:"info"},Ge=$(()=>w("i",{class:"fas fa-thumbs-up"},null,-1)),Fe=$(()=>w("i",{class:"fas fa-share"},null,-1)),je=$(()=>w("div",{class:"body"},null,-1));function $e(u,p,m,s,e,h){return k(),E(j,null,[w("div",{class:"container",style:Rt({"background-image":u.imageUrl})},[w("div",Re,[w("h1",null,Z(u.title),1),w("p",null,Z(u.description),1),Ne,w("div",He,[w("span",null,Z(u.author),1),Ge,Fe])])],4),je],64)}var We=S(Ze,[["render",$e],["__scopeId","data-v-2c82ea8c"]]);const Ve=z({name:"News",components:{FeedElement:We},setup(){return{news:st([])}},async beforeMount(){await O.get("/news").then(u=>{console.log(u.data),this.news.push(...u.data),console.log(this.news)})}}),qe={class:"home-container page-container"};function Ye(u,p,m,s,e,h){const c=C("feed-element");return k(),E("div",qe,[(k(!0),E(j,null,ht(u.news,f=>(k(),E("div",{key:f.id,class:"thing"},[U(c,{id:f.id,description:f.description,author:f.author,title:f.title,image:f.image},null,8,["id","description","author","title","image"])]))),128))])}var Xe=S(Ve,[["render",Ye],["__scopeId","data-v-1a57c43a"]]);const Je=[{path:"/",name:"Home",component:ce},{path:"/vuex",name:"Vuex",component:ye},{path:"/axios",name:"Axios",component:()=>ie(()=>import("./Axios.996520e6.js"),["assets/Axios.996520e6.js","assets/Axios.12c2753f.css","assets/vendor.d25024d4.js","assets/vendor.c3300100.css"])},{path:"/forest-monitor",name:"ForestMonitor",component:Ae},{path:"/news",name:"News",component:Xe}],Ke=Nt({history:Ht(),routes:Je});const Qe=u=>(q("data-v-7405f1a4"),u=u(),Y(),u),ti={class:"header"},ei=Qe(()=>w("i",{class:"icon el-icon-s-promotion"},null,-1)),ii=H(" GitHub "),oi=[ei,ii],ni=z({setup(u){const p=lt(),m=()=>{window.open("https://github.com/Forevka/forest-monitor")};return(s,e)=>(k(),E("div",ti,[w("div",{class:"title",onClick:e[0]||(e[0]=h=>Gt(p).push("/"))}," C\u0438\u0441\u0442\u0435\u043C\u0430 \u043C\u043E\u043D\u0456\u0442\u043E\u0440\u0438\u043D\u0433\u0443 \u0441\u0442\u0430\u043D\u0443 \u043B\u0456\u0441\u043E\u0432\u0438\u0445 \u0435\u043A\u043E\u0441\u0438\u0441\u0442\u0435\u043C \u041B\u044C\u0432\u0456\u0432\u0441\u044C\u043A\u043E\u0457 \u043E\u0431\u043B\u0430\u0441\u0442\u0456 "),w("div",{class:"go-github",onClick:m},oi)]))}});var si=S(ni,[["__scopeId","data-v-7405f1a4"]]);const ai=z({name:"Nav",setup(){const u=lt(),p=it({navList:[{name:"\u0413\u043E\u043B\u043E\u0432\u043D\u0430",isActive:!1,path:"/"},{name:"\u041D\u043E\u0432\u0438\u043D\u0438",isActive:!1,path:"/news"},{name:"\u041C\u043E\u043D\u0456\u0442\u043E\u0440\u0438\u043D\u0433 \u043B\u0456\u0441\u0443",isActive:!1,path:"/forest-monitor"}],navClick(s){u.push(s.path)}}),m=s=>{p.navList.forEach(e=>{const h=e;return h.isActive=h.path===s,h})};return Ft(()=>u.currentRoute.value,s=>{m(s.path)}),jt(()=>{u.isReady().then(()=>{m(u.currentRoute.value.path)})}),V({},nt(p))}}),ri={class:"nav"},hi={class:"nav-list"},li=["onClick"];function ci(u,p,m,s,e,h){return k(),E("aside",ri,[w("ul",hi,[(k(!0),E(j,null,ht(u.navList,(c,f)=>(k(),E("li",{class:$t(["nav-item flex-center",{active:c.isActive}]),key:f,onClick:v=>u.navClick(c)},Z(c.name),11,li))),128))])])}var ui=S(ai,[["render",ci],["__scopeId","data-v-150f9824"]]);const di=z({name:"Main",components:{Header:si,Nav:ui}}),_i={class:"main-container"},pi={class:"top"},mi={class:"bottom"},fi={class:"left"},gi={class:"right"},vi={class:"content"};function yi(u,p,m,s,e,h){const c=C("Header"),f=C("Nav"),v=C("router-view");return k(),E("main",_i,[w("div",pi,[U(c)]),w("div",mi,[w("div",fi,[U(f)]),w("div",gi,[w("div",vi,[U(v)])])])])}var Li=S(di,[["render",yi],["__scopeId","data-v-d495ab3c"]]);const wi=z({name:"App",components:{Main:Li}});function bi(u,p,m,s,e,h){const c=C("Main");return k(),X(c)}var Pi=S(wi,[["render",bi]]);function xi(u){return[Wt,Vt,qt,Yt].forEach(p=>{u.use(p)}),u}(function(u,p,m){function s(){var t=u.L;e.noConflict=function(){return u.L=t,this},u.L=e}var e={version:"1.0.1"};typeof module=="object"&&typeof module.exports=="object"?module.exports=e:typeof define=="function"&&define.amd&&define(e),typeof u!="undefined"&&s(),e.Util={extend:function(t){var i,o,n,a;for(o=1,n=arguments.length;o<n;o++){a=arguments[o];for(i in a)t[i]=a[i]}return t},create:Object.create||function(){function t(){}return function(i){return t.prototype=i,new t}}(),bind:function(t,i){var o=Array.prototype.slice;if(t.bind)return t.bind.apply(t,o.call(arguments,1));var n=o.call(arguments,2);return function(){return t.apply(i,n.length?n.concat(o.call(arguments)):arguments)}},stamp:function(t){return t._leaflet_id=t._leaflet_id||++e.Util.lastId,t._leaflet_id},lastId:0,throttle:function(t,i,o){var n,a,r,l;return l=function(){n=!1,a&&(r.apply(o,a),a=!1)},r=function(){n?a=arguments:(t.apply(o,arguments),setTimeout(l,i),n=!0)}},wrapNum:function(t,i,o){var n=i[1],a=i[0],r=n-a;return t===n&&o?t:((t-a)%r+r)%r+a},falseFn:function(){return!1},formatNum:function(t,i){var o=Math.pow(10,i||5);return Math.round(t*o)/o},trim:function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")},splitWords:function(t){return e.Util.trim(t).split(/\s+/)},setOptions:function(t,i){t.hasOwnProperty("options")||(t.options=t.options?e.Util.create(t.options):{});for(var o in i)t.options[o]=i[o];return t.options},getParamString:function(t,i,o){var n=[];for(var a in t)n.push(encodeURIComponent(o?a.toUpperCase():a)+"="+encodeURIComponent(t[a]));return(i&&i.indexOf("?")!==-1?"&":"?")+n.join("&")},template:function(t,i){return t.replace(e.Util.templateRe,function(o,n){var a=i[n];if(a===m)throw new Error("No value provided for variable "+o);return typeof a=="function"&&(a=a(i)),a})},templateRe:/\{ *([\w_\-]+) *\}/g,isArray:Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"},indexOf:function(t,i){for(var o=0;o<t.length;o++)if(t[o]===i)return o;return-1},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="},function(){function t(r){return u["webkit"+r]||u["moz"+r]||u["ms"+r]}function i(r){var l=+new Date,d=Math.max(0,16-(l-o));return o=l+d,u.setTimeout(r,d)}var o=0,n=u.requestAnimationFrame||t("RequestAnimationFrame")||i,a=u.cancelAnimationFrame||t("CancelAnimationFrame")||t("CancelRequestAnimationFrame")||function(r){u.clearTimeout(r)};e.Util.requestAnimFrame=function(r,l,d){return d&&n===i?void r.call(l):n.call(u,e.bind(r,l))},e.Util.cancelAnimFrame=function(r){r&&a.call(u,r)}}(),e.extend=e.Util.extend,e.bind=e.Util.bind,e.stamp=e.Util.stamp,e.setOptions=e.Util.setOptions,e.Class=function(){},e.Class.extend=function(t){var i=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},o=i.__super__=this.prototype,n=e.Util.create(o);n.constructor=i,i.prototype=n;for(var a in this)this.hasOwnProperty(a)&&a!=="prototype"&&(i[a]=this[a]);return t.statics&&(e.extend(i,t.statics),delete t.statics),t.includes&&(e.Util.extend.apply(null,[n].concat(t.includes)),delete t.includes),n.options&&(t.options=e.Util.extend(e.Util.create(n.options),t.options)),e.extend(n,t),n._initHooks=[],n.callInitHooks=function(){if(!this._initHooksCalled){o.callInitHooks&&o.callInitHooks.call(this),this._initHooksCalled=!0;for(var r=0,l=n._initHooks.length;r<l;r++)n._initHooks[r].call(this)}},i},e.Class.include=function(t){return e.extend(this.prototype,t),this},e.Class.mergeOptions=function(t){return e.extend(this.prototype.options,t),this},e.Class.addInitHook=function(t){var i=Array.prototype.slice.call(arguments,1),o=typeof t=="function"?t:function(){this[t].apply(this,i)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(o),this},e.Evented=e.Class.extend({on:function(t,i,o){if(typeof t=="object")for(var n in t)this._on(n,t[n],i);else{t=e.Util.splitWords(t);for(var a=0,r=t.length;a<r;a++)this._on(t[a],i,o)}return this},off:function(t,i,o){if(t)if(typeof t=="object")for(var n in t)this._off(n,t[n],i);else{t=e.Util.splitWords(t);for(var a=0,r=t.length;a<r;a++)this._off(t[a],i,o)}else delete this._events;return this},_on:function(t,i,o){this._events=this._events||{};var n=this._events[t];n||(n=[],this._events[t]=n),o===this&&(o=m);for(var a={fn:i,ctx:o},r=n,l=0,d=r.length;l<d;l++)if(r[l].fn===i&&r[l].ctx===o)return;r.push(a),n.count++},_off:function(t,i,o){var n,a,r;if(this._events&&(n=this._events[t])){if(!i){for(a=0,r=n.length;a<r;a++)n[a].fn=e.Util.falseFn;return void delete this._events[t]}if(o===this&&(o=m),n)for(a=0,r=n.length;a<r;a++){var l=n[a];if(l.ctx===o&&l.fn===i)return l.fn=e.Util.falseFn,this._firingCount&&(this._events[t]=n=n.slice()),void n.splice(a,1)}}},fire:function(t,i,o){if(!this.listens(t,o))return this;var n=e.Util.extend({},i,{type:t,target:this});if(this._events){var a=this._events[t];if(a){this._firingCount=this._firingCount+1||1;for(var r=0,l=a.length;r<l;r++){var d=a[r];d.fn.call(d.ctx||this,n)}this._firingCount--}}return o&&this._propagateEvent(n),this},listens:function(t,i){var o=this._events&&this._events[t];if(o&&o.length)return!0;if(i){for(var n in this._eventParents)if(this._eventParents[n].listens(t,i))return!0}return!1},once:function(t,i,o){if(typeof t=="object"){for(var n in t)this.once(n,t[n],i);return this}var a=e.bind(function(){this.off(t,i,o).off(t,a,o)},this);return this.on(t,i,o).on(t,a,o)},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[e.stamp(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[e.stamp(t)],this},_propagateEvent:function(t){for(var i in this._eventParents)this._eventParents[i].fire(t.type,e.extend({layer:t.target},t),!0)}});var h=e.Evented.prototype;h.addEventListener=h.on,h.removeEventListener=h.clearAllEventListeners=h.off,h.addOneTimeEventListener=h.once,h.fireEvent=h.fire,h.hasEventListeners=h.listens,e.Mixin={Events:h},function(){var t=navigator.userAgent.toLowerCase(),i=p.documentElement,o="ActiveXObject"in u,n=t.indexOf("webkit")!==-1,a=t.indexOf("phantom")!==-1,r=t.search("android [23]")!==-1,l=t.indexOf("chrome")!==-1,d=t.indexOf("gecko")!==-1&&!n&&!u.opera&&!o,_=navigator.platform.indexOf("Win")===0,g=typeof orientation!="undefined"||t.indexOf("mobile")!==-1,y=!u.PointerEvent&&u.MSPointerEvent,b=u.PointerEvent||y,P=o&&"transition"in i.style,x="WebKitCSSMatrix"in u&&"m11"in new u.WebKitCSSMatrix&&!r,D="MozPerspective"in i.style,T="OTransition"in i.style,B=!u.L_NO_TOUCH&&(b||"ontouchstart"in u||u.DocumentTouch&&p instanceof u.DocumentTouch);e.Browser={ie:o,ielt9:o&&!p.addEventListener,edge:"msLaunchUri"in navigator&&!("documentMode"in p),webkit:n,gecko:d,android:t.indexOf("android")!==-1,android23:r,chrome:l,safari:!l&&t.indexOf("safari")!==-1,win:_,ie3d:P,webkit3d:x,gecko3d:D,opera12:T,any3d:!u.L_DISABLE_3D&&(P||x||D)&&!T&&!a,mobile:g,mobileWebkit:g&&n,mobileWebkit3d:g&&x,mobileOpera:g&&u.opera,mobileGecko:g&&d,touch:!!B,msPointer:!!y,pointer:!!b,retina:(u.devicePixelRatio||u.screen.deviceXDPI/u.screen.logicalXDPI)>1}}(),e.Point=function(t,i,o){this.x=o?Math.round(t):t,this.y=o?Math.round(i):i},e.Point.prototype={clone:function(){return new e.Point(this.x,this.y)},add:function(t){return this.clone()._add(e.point(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(e.point(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new e.Point(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new e.Point(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},distanceTo:function(t){t=e.point(t);var i=t.x-this.x,o=t.y-this.y;return Math.sqrt(i*i+o*o)},equals:function(t){return t=e.point(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=e.point(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+e.Util.formatNum(this.x)+", "+e.Util.formatNum(this.y)+")"}},e.point=function(t,i,o){return t instanceof e.Point?t:e.Util.isArray(t)?new e.Point(t[0],t[1]):t===m||t===null?t:typeof t=="object"&&"x"in t&&"y"in t?new e.Point(t.x,t.y):new e.Point(t,i,o)},e.Bounds=function(t,i){if(t)for(var o=i?[t,i]:t,n=0,a=o.length;n<a;n++)this.extend(o[n])},e.Bounds.prototype={extend:function(t){return t=e.point(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new e.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new e.Point(this.min.x,this.max.y)},getTopRight:function(){return new e.Point(this.max.x,this.min.y)},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var i,o;return t=typeof t[0]=="number"||t instanceof e.Point?e.point(t):e.bounds(t),t instanceof e.Bounds?(i=t.min,o=t.max):i=o=t,i.x>=this.min.x&&o.x<=this.max.x&&i.y>=this.min.y&&o.y<=this.max.y},intersects:function(t){t=e.bounds(t);var i=this.min,o=this.max,n=t.min,a=t.max,r=a.x>=i.x&&n.x<=o.x,l=a.y>=i.y&&n.y<=o.y;return r&&l},overlaps:function(t){t=e.bounds(t);var i=this.min,o=this.max,n=t.min,a=t.max,r=a.x>i.x&&n.x<o.x,l=a.y>i.y&&n.y<o.y;return r&&l},isValid:function(){return!(!this.min||!this.max)}},e.bounds=function(t,i){return!t||t instanceof e.Bounds?t:new e.Bounds(t,i)},e.Transformation=function(t,i,o,n){this._a=t,this._b=i,this._c=o,this._d=n},e.Transformation.prototype={transform:function(t,i){return this._transform(t.clone(),i)},_transform:function(t,i){return i=i||1,t.x=i*(this._a*t.x+this._b),t.y=i*(this._c*t.y+this._d),t},untransform:function(t,i){return i=i||1,new e.Point((t.x/i-this._b)/this._a,(t.y/i-this._d)/this._c)}},e.DomUtil={get:function(t){return typeof t=="string"?p.getElementById(t):t},getStyle:function(t,i){var o=t.style[i]||t.currentStyle&&t.currentStyle[i];if((!o||o==="auto")&&p.defaultView){var n=p.defaultView.getComputedStyle(t,null);o=n?n[i]:null}return o==="auto"?null:o},create:function(t,i,o){var n=p.createElement(t);return n.className=i||"",o&&o.appendChild(n),n},remove:function(t){var i=t.parentNode;i&&i.removeChild(t)},empty:function(t){for(;t.firstChild;)t.removeChild(t.firstChild)},toFront:function(t){t.parentNode.appendChild(t)},toBack:function(t){var i=t.parentNode;i.insertBefore(t,i.firstChild)},hasClass:function(t,i){if(t.classList!==m)return t.classList.contains(i);var o=e.DomUtil.getClass(t);return o.length>0&&new RegExp("(^|\\s)"+i+"(\\s|$)").test(o)},addClass:function(t,i){if(t.classList!==m)for(var o=e.Util.splitWords(i),n=0,a=o.length;n<a;n++)t.classList.add(o[n]);else if(!e.DomUtil.hasClass(t,i)){var r=e.DomUtil.getClass(t);e.DomUtil.setClass(t,(r?r+" ":"")+i)}},removeClass:function(t,i){t.classList!==m?t.classList.remove(i):e.DomUtil.setClass(t,e.Util.trim((" "+e.DomUtil.getClass(t)+" ").replace(" "+i+" "," ")))},setClass:function(t,i){t.className.baseVal===m?t.className=i:t.className.baseVal=i},getClass:function(t){return t.className.baseVal===m?t.className:t.className.baseVal},setOpacity:function(t,i){"opacity"in t.style?t.style.opacity=i:"filter"in t.style&&e.DomUtil._setOpacityIE(t,i)},_setOpacityIE:function(t,i){var o=!1,n="DXImageTransform.Microsoft.Alpha";try{o=t.filters.item(n)}catch{if(i===1)return}i=Math.round(100*i),o?(o.Enabled=i!==100,o.Opacity=i):t.style.filter+=" progid:"+n+"(opacity="+i+")"},testProp:function(t){for(var i=p.documentElement.style,o=0;o<t.length;o++)if(t[o]in i)return t[o];return!1},setTransform:function(t,i,o){var n=i||new e.Point(0,0);t.style[e.DomUtil.TRANSFORM]=(e.Browser.ie3d?"translate("+n.x+"px,"+n.y+"px)":"translate3d("+n.x+"px,"+n.y+"px,0)")+(o?" scale("+o+")":"")},setPosition:function(t,i){t._leaflet_pos=i,e.Browser.any3d?e.DomUtil.setTransform(t,i):(t.style.left=i.x+"px",t.style.top=i.y+"px")},getPosition:function(t){return t._leaflet_pos||new e.Point(0,0)}},function(){e.DomUtil.TRANSFORM=e.DomUtil.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]);var t=e.DomUtil.TRANSITION=e.DomUtil.testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);if(e.DomUtil.TRANSITION_END=t==="webkitTransition"||t==="OTransition"?t+"End":"transitionend","onselectstart"in p)e.DomUtil.disableTextSelection=function(){e.DomEvent.on(u,"selectstart",e.DomEvent.preventDefault)},e.DomUtil.enableTextSelection=function(){e.DomEvent.off(u,"selectstart",e.DomEvent.preventDefault)};else{var i=e.DomUtil.testProp(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);e.DomUtil.disableTextSelection=function(){if(i){var o=p.documentElement.style;this._userSelect=o[i],o[i]="none"}},e.DomUtil.enableTextSelection=function(){i&&(p.documentElement.style[i]=this._userSelect,delete this._userSelect)}}e.DomUtil.disableImageDrag=function(){e.DomEvent.on(u,"dragstart",e.DomEvent.preventDefault)},e.DomUtil.enableImageDrag=function(){e.DomEvent.off(u,"dragstart",e.DomEvent.preventDefault)},e.DomUtil.preventOutline=function(o){for(;o.tabIndex===-1;)o=o.parentNode;o&&o.style&&(e.DomUtil.restoreOutline(),this._outlineElement=o,this._outlineStyle=o.style.outline,o.style.outline="none",e.DomEvent.on(u,"keydown",e.DomUtil.restoreOutline,this))},e.DomUtil.restoreOutline=function(){this._outlineElement&&(this._outlineElement.style.outline=this._outlineStyle,delete this._outlineElement,delete this._outlineStyle,e.DomEvent.off(u,"keydown",e.DomUtil.restoreOutline,this))}}(),e.LatLng=function(t,i,o){if(isNaN(t)||isNaN(i))throw new Error("Invalid LatLng object: ("+t+", "+i+")");this.lat=+t,this.lng=+i,o!==m&&(this.alt=+o)},e.LatLng.prototype={equals:function(t,i){if(!t)return!1;t=e.latLng(t);var o=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return o<=(i===m?1e-9:i)},toString:function(t){return"LatLng("+e.Util.formatNum(this.lat,t)+", "+e.Util.formatNum(this.lng,t)+")"},distanceTo:function(t){return e.CRS.Earth.distance(this,e.latLng(t))},wrap:function(){return e.CRS.Earth.wrapLatLng(this)},toBounds:function(t){var i=180*t/40075017,o=i/Math.cos(Math.PI/180*this.lat);return e.latLngBounds([this.lat-i,this.lng-o],[this.lat+i,this.lng+o])},clone:function(){return new e.LatLng(this.lat,this.lng,this.alt)}},e.latLng=function(t,i,o){return t instanceof e.LatLng?t:e.Util.isArray(t)&&typeof t[0]!="object"?t.length===3?new e.LatLng(t[0],t[1],t[2]):t.length===2?new e.LatLng(t[0],t[1]):null:t===m||t===null?t:typeof t=="object"&&"lat"in t?new e.LatLng(t.lat,"lng"in t?t.lng:t.lon,t.alt):i===m?null:new e.LatLng(t,i,o)},e.LatLngBounds=function(t,i){if(t)for(var o=i?[t,i]:t,n=0,a=o.length;n<a;n++)this.extend(o[n])},e.LatLngBounds.prototype={extend:function(t){var i,o,n=this._southWest,a=this._northEast;if(t instanceof e.LatLng)i=t,o=t;else{if(!(t instanceof e.LatLngBounds))return t?this.extend(e.latLng(t)||e.latLngBounds(t)):this;if(i=t._southWest,o=t._northEast,!i||!o)return this}return n||a?(n.lat=Math.min(i.lat,n.lat),n.lng=Math.min(i.lng,n.lng),a.lat=Math.max(o.lat,a.lat),a.lng=Math.max(o.lng,a.lng)):(this._southWest=new e.LatLng(i.lat,i.lng),this._northEast=new e.LatLng(o.lat,o.lng)),this},pad:function(t){var i=this._southWest,o=this._northEast,n=Math.abs(i.lat-o.lat)*t,a=Math.abs(i.lng-o.lng)*t;return new e.LatLngBounds(new e.LatLng(i.lat-n,i.lng-a),new e.LatLng(o.lat+n,o.lng+a))},getCenter:function(){return new e.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new e.LatLng(this.getNorth(),this.getWest())},getSouthEast:function(){return new e.LatLng(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t=typeof t[0]=="number"||t instanceof e.LatLng?e.latLng(t):e.latLngBounds(t);var i,o,n=this._southWest,a=this._northEast;return t instanceof e.LatLngBounds?(i=t.getSouthWest(),o=t.getNorthEast()):i=o=t,i.lat>=n.lat&&o.lat<=a.lat&&i.lng>=n.lng&&o.lng<=a.lng},intersects:function(t){t=e.latLngBounds(t);var i=this._southWest,o=this._northEast,n=t.getSouthWest(),a=t.getNorthEast(),r=a.lat>=i.lat&&n.lat<=o.lat,l=a.lng>=i.lng&&n.lng<=o.lng;return r&&l},overlaps:function(t){t=e.latLngBounds(t);var i=this._southWest,o=this._northEast,n=t.getSouthWest(),a=t.getNorthEast(),r=a.lat>i.lat&&n.lat<o.lat,l=a.lng>i.lng&&n.lng<o.lng;return r&&l},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t){return!!t&&(t=e.latLngBounds(t),this._southWest.equals(t.getSouthWest())&&this._northEast.equals(t.getNorthEast()))},isValid:function(){return!(!this._southWest||!this._northEast)}},e.latLngBounds=function(t,i){return t instanceof e.LatLngBounds?t:new e.LatLngBounds(t,i)},e.Projection={},e.Projection.LonLat={project:function(t){return new e.Point(t.lng,t.lat)},unproject:function(t){return new e.LatLng(t.y,t.x)},bounds:e.bounds([-180,-90],[180,90])},e.Projection.SphericalMercator={R:6378137,MAX_LATITUDE:85.0511287798,project:function(t){var i=Math.PI/180,o=this.MAX_LATITUDE,n=Math.max(Math.min(o,t.lat),-o),a=Math.sin(n*i);return new e.Point(this.R*t.lng*i,this.R*Math.log((1+a)/(1-a))/2)},unproject:function(t){var i=180/Math.PI;return new e.LatLng((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*i,t.x*i/this.R)},bounds:function(){var t=6378137*Math.PI;return e.bounds([-t,-t],[t,t])}()},e.CRS={latLngToPoint:function(t,i){var o=this.projection.project(t),n=this.scale(i);return this.transformation._transform(o,n)},pointToLatLng:function(t,i){var o=this.scale(i),n=this.transformation.untransform(t,o);return this.projection.unproject(n)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var i=this.projection.bounds,o=this.scale(t),n=this.transformation.transform(i.min,o),a=this.transformation.transform(i.max,o);return e.bounds(n,a)},infinite:!1,wrapLatLng:function(t){var i=this.wrapLng?e.Util.wrapNum(t.lng,this.wrapLng,!0):t.lng,o=this.wrapLat?e.Util.wrapNum(t.lat,this.wrapLat,!0):t.lat,n=t.alt;return e.latLng(o,i,n)}},e.CRS.Simple=e.extend({},e.CRS,{projection:e.Projection.LonLat,transformation:new e.Transformation(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,i){var o=i.lng-t.lng,n=i.lat-t.lat;return Math.sqrt(o*o+n*n)},infinite:!0}),e.CRS.Earth=e.extend({},e.CRS,{wrapLng:[-180,180],R:6371e3,distance:function(t,i){var o=Math.PI/180,n=t.lat*o,a=i.lat*o,r=Math.sin(n)*Math.sin(a)+Math.cos(n)*Math.cos(a)*Math.cos((i.lng-t.lng)*o);return this.R*Math.acos(Math.min(r,1))}}),e.CRS.EPSG3857=e.extend({},e.CRS.Earth,{code:"EPSG:3857",projection:e.Projection.SphericalMercator,transformation:function(){var t=.5/(Math.PI*e.Projection.SphericalMercator.R);return new e.Transformation(t,.5,-t,.5)}()}),e.CRS.EPSG900913=e.extend({},e.CRS.EPSG3857,{code:"EPSG:900913"}),e.CRS.EPSG4326=e.extend({},e.CRS.Earth,{code:"EPSG:4326",projection:e.Projection.LonLat,transformation:new e.Transformation(1/180,1,-1/180,.5)}),e.Map=e.Evented.extend({options:{crs:e.CRS.EPSG3857,center:m,zoom:m,minZoom:m,maxZoom:m,layers:[],maxBounds:m,renderer:m,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,i){i=e.setOptions(this,i),this._initContainer(t),this._initLayout(),this._onResize=e.bind(this._onResize,this),this._initEvents(),i.maxBounds&&this.setMaxBounds(i.maxBounds),i.zoom!==m&&(this._zoom=this._limitZoom(i.zoom)),i.center&&i.zoom!==m&&this.setView(e.latLng(i.center),i.zoom,{reset:!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this.callInitHooks(),this._addLayers(this.options.layers)},setView:function(t,i){return i=i===m?this.getZoom():i,this._resetView(e.latLng(t),i),this},setZoom:function(t,i){return this._loaded?this.setView(this.getCenter(),t,{zoom:i}):(this._zoom=t,this)},zoomIn:function(t,i){return t=t||(e.Browser.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,i)},zoomOut:function(t,i){return t=t||(e.Browser.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,i)},setZoomAround:function(t,i,o){var n=this.getZoomScale(i),a=this.getSize().divideBy(2),r=t instanceof e.Point?t:this.latLngToContainerPoint(t),l=r.subtract(a).multiplyBy(1-1/n),d=this.containerPointToLatLng(a.add(l));return this.setView(d,i,{zoom:o})},_getBoundsCenterZoom:function(t,i){i=i||{},t=t.getBounds?t.getBounds():e.latLngBounds(t);var o=e.point(i.paddingTopLeft||i.padding||[0,0]),n=e.point(i.paddingBottomRight||i.padding||[0,0]),a=this.getBoundsZoom(t,!1,o.add(n));a=typeof i.maxZoom=="number"?Math.min(i.maxZoom,a):a;var r=n.subtract(o).divideBy(2),l=this.project(t.getSouthWest(),a),d=this.project(t.getNorthEast(),a),_=this.unproject(l.add(d).divideBy(2).add(r),a);return{center:_,zoom:a}},fitBounds:function(t,i){if(t=e.latLngBounds(t),!t.isValid())throw new Error("Bounds are not valid.");var o=this._getBoundsCenterZoom(t,i);return this.setView(o.center,o.zoom,i)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,i){return this.setView(t,this._zoom,{pan:i})},panBy:function(t){return this.fire("movestart"),this._rawPanBy(e.point(t)),this.fire("move"),this.fire("moveend")},setMaxBounds:function(t){return t=e.latLngBounds(t),t.isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(t){return this.options.minZoom=t,this._loaded&&this.getZoom()<this.options.minZoom?this.setZoom(t):this},setMaxZoom:function(t){return this.options.maxZoom=t,this._loaded&&this.getZoom()>this.options.maxZoom?this.setZoom(t):this},panInsideBounds:function(t,i){this._enforcingBounds=!0;var o=this.getCenter(),n=this._limitCenter(o,this._zoom,e.latLngBounds(t));return o.equals(n)||this.panTo(n,i),this._enforcingBounds=!1,this},invalidateSize:function(t){if(!this._loaded)return this;t=e.extend({animate:!1,pan:!0},t===!0?{animate:!0}:t);var i=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var o=this.getSize(),n=i.divideBy(2).round(),a=o.divideBy(2).round(),r=n.subtract(a);return r.x||r.y?(t.animate&&t.pan?this.panBy(r):(t.pan&&this._rawPanBy(r),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(e.bind(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:i,newSize:o})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},addHandler:function(t,i){if(!i)return this;var o=this[t]=new i(this);return this._handlers.push(o),this.options[t]&&o.enable(),this},remove:function(){if(this._initEvents(!0),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=m,this._containerId=m}e.DomUtil.remove(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._clearHandlers(),this._loaded&&this.fire("unload");for(var t in this._layers)this._layers[t].remove();return this},createPane:function(t,i){var o="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),n=e.DomUtil.create("div",o,i||this._mapPane);return t&&(this._panes[t]=n),n},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),i=this.unproject(t.getBottomLeft()),o=this.unproject(t.getTopRight());return new e.LatLngBounds(i,o)},getMinZoom:function(){return this.options.minZoom===m?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===m?this._layersMaxZoom===m?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,i,o){t=e.latLngBounds(t),o=e.point(o||[0,0]);var n=this.getZoom()||0,a=this.getMinZoom(),r=this.getMaxZoom(),l=t.getNorthWest(),d=t.getSouthEast(),_=this.getSize().subtract(o),g=this.project(d,n).subtract(this.project(l,n)),y=e.Browser.any3d?this.options.zoomSnap:1,b=Math.min(_.x/g.x,_.y/g.y);return n=this.getScaleZoom(b,n),y&&(n=Math.round(n/(y/100))*(y/100),n=i?Math.ceil(n/y)*y:Math.floor(n/y)*y),Math.max(a,Math.min(r,n))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new e.Point(this._container.clientWidth,this._container.clientHeight),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,i){var o=this._getTopLeftPoint(t,i);return new e.Bounds(o,o.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===m?this.getZoom():t)},getPane:function(t){return typeof t=="string"?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,i){var o=this.options.crs;return i=i===m?this._zoom:i,o.scale(t)/o.scale(i)},getScaleZoom:function(t,i){var o=this.options.crs;i=i===m?this._zoom:i;var n=o.zoom(t*o.scale(i));return isNaN(n)?1/0:n},project:function(t,i){return i=i===m?this._zoom:i,this.options.crs.latLngToPoint(e.latLng(t),i)},unproject:function(t,i){return i=i===m?this._zoom:i,this.options.crs.pointToLatLng(e.point(t),i)},layerPointToLatLng:function(t){var i=e.point(t).add(this.getPixelOrigin());return this.unproject(i)},latLngToLayerPoint:function(t){var i=this.project(e.latLng(t))._round();return i._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(e.latLng(t))},distance:function(t,i){return this.options.crs.distance(e.latLng(t),e.latLng(i))},containerPointToLayerPoint:function(t){return e.point(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return e.point(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var i=this.containerPointToLayerPoint(e.point(t));return this.layerPointToLatLng(i)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(e.latLng(t)))},mouseEventToContainerPoint:function(t){return e.DomEvent.getMousePosition(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var i=this._container=e.DomUtil.get(t);if(!i)throw new Error("Map container not found.");if(i._leaflet_id)throw new Error("Map container is already initialized.");e.DomEvent.addListener(i,"scroll",this._onScroll,this),this._containerId=e.Util.stamp(i)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&e.Browser.any3d,e.DomUtil.addClass(t,"leaflet-container"+(e.Browser.touch?" leaflet-touch":"")+(e.Browser.retina?" leaflet-retina":"")+(e.Browser.ielt9?" leaflet-oldie":"")+(e.Browser.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var i=e.DomUtil.getStyle(t,"position");i!=="absolute"&&i!=="relative"&&i!=="fixed"&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),e.DomUtil.setPosition(this._mapPane,new e.Point(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(e.DomUtil.addClass(t.markerPane,"leaflet-zoom-hide"),e.DomUtil.addClass(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,i){e.DomUtil.setPosition(this._mapPane,new e.Point(0,0));var o=!this._loaded;this._loaded=!0,i=this._limitZoom(i),this.fire("viewprereset");var n=this._zoom!==i;this._moveStart(n)._move(t,i)._moveEnd(n),this.fire("viewreset"),o&&this.fire("load")},_moveStart:function(t){return t&&this.fire("zoomstart"),this.fire("movestart")},_move:function(t,i,o){i===m&&(i=this._zoom);var n=this._zoom!==i;return this._zoom=i,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),(n||o&&o.pinch)&&this.fire("zoom",o),this.fire("move",o)},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return e.Util.cancelAnimFrame(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){e.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){if(e.DomEvent){this._targets={},this._targets[e.stamp(this._container)]=this;var i=t?"off":"on";e.DomEvent[i](this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress",this._handleDOMEvent,this),this.options.trackResize&&e.DomEvent[i](u,"resize",this._onResize,this),e.Browser.any3d&&this.options.transform3DLimit&&this[i]("moveend",this._onMoveEnd)}},_onResize:function(){e.Util.cancelAnimFrame(this._resizeRequest),this._resizeRequest=e.Util.requestAnimFrame(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,i){for(var o,n=[],a=i==="mouseout"||i==="mouseover",r=t.target||t.srcElement,l=!1;r;){if(o=this._targets[e.stamp(r)],o&&(i==="click"||i==="preclick")&&!t._simulated&&this._draggableMoved(o)){l=!0;break}if(o&&o.listens(i,!0)&&(a&&!e.DomEvent._isExternalTarget(r,t)||(n.push(o),a))||r===this._container)break;r=r.parentNode}return n.length||l||a||!e.DomEvent._isExternalTarget(r,t)||(n=[this]),n},_handleDOMEvent:function(t){if(this._loaded&&!e.DomEvent._skipped(t)){var i=t.type==="keypress"&&t.keyCode===13?"click":t.type;i==="mousedown"&&e.DomUtil.preventOutline(t.target||t.srcElement),this._fireDOMEvent(t,i)}},_fireDOMEvent:function(t,i,o){if(t.type==="click"){var n=e.Util.extend({},t);n.type="preclick",this._fireDOMEvent(n,n.type,o)}if(!t._stopped&&(o=(o||[]).concat(this._findEventTargets(t,i)),o.length)){var a=o[0];i==="contextmenu"&&a.listens(i,!0)&&e.DomEvent.preventDefault(t);var r={originalEvent:t};if(t.type!=="keypress"){var l=a instanceof e.Marker;r.containerPoint=l?this.latLngToContainerPoint(a.getLatLng()):this.mouseEventToContainerPoint(t),r.layerPoint=this.containerPointToLayerPoint(r.containerPoint),r.latlng=l?a.getLatLng():this.layerPointToLatLng(r.layerPoint)}for(var d=0;d<o.length;d++)if(o[d].fire(i,r,!0),r.originalEvent._stopped||o[d].options.nonBubblingEvents&&e.Util.indexOf(o[d].options.nonBubblingEvents,i)!==-1)return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,i=this._handlers.length;t<i;t++)this._handlers[t].disable()},whenReady:function(t,i){return this._loaded?t.call(i||this,{target:this}):this.on("load",t,i),this},_getMapPanePos:function(){return e.DomUtil.getPosition(this._mapPane)||new e.Point(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,i){var o=t&&i!==m?this._getNewPixelOrigin(t,i):this.getPixelOrigin();return o.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,i){var o=this.getSize()._divideBy(2);return this.project(t,i)._subtract(o)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,i,o){var n=this._getNewPixelOrigin(o,i);return this.project(t,i)._subtract(n)},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,i,o){if(!o)return t;var n=this.project(t,i),a=this.getSize().divideBy(2),r=new e.Bounds(n.subtract(a),n.add(a)),l=this._getBoundsOffset(r,o,i);return l.round().equals([0,0])?t:this.unproject(n.add(l),i)},_limitOffset:function(t,i){if(!i)return t;var o=this.getPixelBounds(),n=new e.Bounds(o.min.add(t),o.max.add(t));return t.add(this._getBoundsOffset(n,i))},_getBoundsOffset:function(t,i,o){var n=e.bounds(this.project(i.getNorthEast(),o),this.project(i.getSouthWest(),o)),a=n.min.subtract(t.min),r=n.max.subtract(t.max),l=this._rebound(a.x,-r.x),d=this._rebound(a.y,-r.y);return new e.Point(l,d)},_rebound:function(t,i){return t+i>0?Math.round(t-i)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(i))},_limitZoom:function(t){var i=this.getMinZoom(),o=this.getMaxZoom(),n=e.Browser.any3d?this.options.zoomSnap:1;return n&&(t=Math.round(t/n)*n),Math.max(i,Math.min(o,t))}}),e.map=function(t,i){return new e.Map(t,i)},e.Layer=e.Evented.extend({options:{pane:"overlayPane",nonBubblingEvents:[]},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[e.stamp(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[e.stamp(t)],this},_layerAdd:function(t){var i=t.target;if(i.hasLayer(this)){if(this._map=i,this._zoomAnimated=i._zoomAnimated,this.getEvents){var o=this.getEvents();i.on(o,this),this.once("remove",function(){i.off(o,this)},this)}this.onAdd(i),this.getAttribution&&this._map.attributionControl&&this._map.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),i.fire("layeradd",{layer:this})}}}),e.Map.include({addLayer:function(t){var i=e.stamp(t);return this._layers[i]?this:(this._layers[i]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var i=e.stamp(t);return this._layers[i]?(this._loaded&&t.onRemove(this),t.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(t.getAttribution()),delete this._layers[i],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return!!t&&e.stamp(t)in this._layers},eachLayer:function(t,i){for(var o in this._layers)t.call(i,this._layers[o]);return this},_addLayers:function(t){t=t?e.Util.isArray(t)?t:[t]:[];for(var i=0,o=t.length;i<o;i++)this.addLayer(t[i])},_addZoomLimit:function(t){!isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[e.stamp(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var i=e.stamp(t);this._zoomBoundLayers[i]&&(delete this._zoomBoundLayers[i],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,i=-(1/0),o=this._getZoomSpan();for(var n in this._zoomBoundLayers){var a=this._zoomBoundLayers[n].options;t=a.minZoom===m?t:Math.min(t,a.minZoom),i=a.maxZoom===m?i:Math.max(i,a.maxZoom)}this._layersMaxZoom=i===-(1/0)?m:i,this._layersMinZoom=t===1/0?m:t,o!==this._getZoomSpan()&&this.fire("zoomlevelschange")}}),e.Projection.Mercator={R:6378137,R_MINOR:6356752314245179e-9,bounds:e.bounds([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(t){var i=Math.PI/180,o=this.R,n=t.lat*i,a=this.R_MINOR/o,r=Math.sqrt(1-a*a),l=r*Math.sin(n),d=Math.tan(Math.PI/4-n/2)/Math.pow((1-l)/(1+l),r/2);return n=-o*Math.log(Math.max(d,1e-10)),new e.Point(t.lng*i*o,n)},unproject:function(t){for(var i,o=180/Math.PI,n=this.R,a=this.R_MINOR/n,r=Math.sqrt(1-a*a),l=Math.exp(-t.y/n),d=Math.PI/2-2*Math.atan(l),_=0,g=.1;_<15&&Math.abs(g)>1e-7;_++)i=r*Math.sin(d),i=Math.pow((1-i)/(1+i),r/2),g=Math.PI/2-2*Math.atan(l*i)-d,d+=g;return new e.LatLng(d*o,t.x*o/n)}},e.CRS.EPSG3395=e.extend({},e.CRS.Earth,{code:"EPSG:3395",projection:e.Projection.Mercator,transformation:function(){var t=.5/(Math.PI*e.Projection.Mercator.R);return new e.Transformation(t,.5,-t,.5)}()}),e.GridLayer=e.Layer.extend({options:{tileSize:256,opacity:1,updateWhenIdle:e.Browser.mobile,updateWhenZooming:!0,updateInterval:200,attribution:null,zIndex:1,bounds:null,minZoom:0,maxZoom:m,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){e.setOptions(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),e.DomUtil.remove(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=null},bringToFront:function(){return this._map&&(e.DomUtil.toFront(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(e.DomUtil.toBack(this._container),this._setAutoZIndex(Math.min)),this},getAttribution:function(){return this.options.attribution},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=e.Util.throttle(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return p.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof e.Point?t:new e.Point(t,t)},_updateZIndex:function(){this._container&&this.options.zIndex!==m&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var i,o=this.getPane().children,n=-t(-(1/0),1/0),a=0,r=o.length;a<r;a++)i=o[a].style.zIndex,o[a]!==this._container&&i&&(n=t(n,+i));isFinite(n)&&(this.options.zIndex=n+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!e.Browser.ielt9){e.DomUtil.setOpacity(this._container,this.options.opacity);var t=+new Date,i=!1,o=!1;for(var n in this._tiles){var a=this._tiles[n];if(a.current&&a.loaded){var r=Math.min(1,(t-a.loaded)/200);e.DomUtil.setOpacity(a.el,r),r<1?i=!0:(a.active&&(o=!0),a.active=!0)}}o&&!this._noPrune&&this._pruneTiles(),i&&(e.Util.cancelAnimFrame(this._fadeFrame),this._fadeFrame=e.Util.requestAnimFrame(this._updateOpacity,this))}},_initContainer:function(){this._container||(this._container=e.DomUtil.create("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,i=this.options.maxZoom;if(t===m)return m;for(var o in this._levels)this._levels[o].el.children.length||o===t?this._levels[o].el.style.zIndex=i-Math.abs(t-o):(e.DomUtil.remove(this._levels[o].el),this._removeTilesAtZoom(o),delete this._levels[o]);var n=this._levels[t],a=this._map;return n||(n=this._levels[t]={},n.el=e.DomUtil.create("div","leaflet-tile-container leaflet-zoom-animated",this._container),n.el.style.zIndex=i,n.origin=a.project(a.unproject(a.getPixelOrigin()),t).round(),n.zoom=t,this._setZoomTransform(n,a.getCenter(),a.getZoom()),e.Util.falseFn(n.el.offsetWidth)),this._level=n,n},_pruneTiles:function(){if(this._map){var t,i,o=this._map.getZoom();if(o>this.options.maxZoom||o<this.options.minZoom)return void this._removeAllTiles();for(t in this._tiles)i=this._tiles[t],i.retain=i.current;for(t in this._tiles)if(i=this._tiles[t],i.current&&!i.active){var n=i.coords;this._retainParent(n.x,n.y,n.z,n.z-5)||this._retainChildren(n.x,n.y,n.z,n.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var i in this._tiles)this._tiles[i].coords.z===t&&this._removeTile(i)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)e.DomUtil.remove(this._levels[t].el),delete this._levels[t];this._removeAllTiles(),this._tileZoom=null},_retainParent:function(t,i,o,n){var a=Math.floor(t/2),r=Math.floor(i/2),l=o-1,d=new e.Point(+a,+r);d.z=+l;var _=this._tileCoordsToKey(d),g=this._tiles[_];return g&&g.active?(g.retain=!0,!0):(g&&g.loaded&&(g.retain=!0),l>n&&this._retainParent(a,r,l,n))},_retainChildren:function(t,i,o,n){for(var a=2*t;a<2*t+2;a++)for(var r=2*i;r<2*i+2;r++){var l=new e.Point(a,r);l.z=o+1;var d=this._tileCoordsToKey(l),_=this._tiles[d];_&&_.active?_.retain=!0:(_&&_.loaded&&(_.retain=!0),o+1<n&&this._retainChildren(a,r,o+1,n))}},_resetView:function(t){var i=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),i,i)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_setView:function(t,i,o,n){var a=Math.round(i);(this.options.maxZoom!==m&&a>this.options.maxZoom||this.options.minZoom!==m&&a<this.options.minZoom)&&(a=m);var r=this.options.updateWhenZooming&&a!==this._tileZoom;n&&!r||(this._tileZoom=a,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),a!==m&&this._update(t),o||this._pruneTiles(),this._noPrune=!!o),this._setZoomTransforms(t,i)},_setZoomTransforms:function(t,i){for(var o in this._levels)this._setZoomTransform(this._levels[o],t,i)},_setZoomTransform:function(t,i,o){var n=this._map.getZoomScale(o,t.zoom),a=t.origin.multiplyBy(n).subtract(this._map._getNewPixelOrigin(i,o)).round();e.Browser.any3d?e.DomUtil.setTransform(t.el,a,n):e.DomUtil.setPosition(t.el,a)},_resetGrid:function(){var t=this._map,i=t.options.crs,o=this._tileSize=this.getTileSize(),n=this._tileZoom,a=this._map.getPixelWorldBounds(this._tileZoom);a&&(this._globalTileRange=this._pxBoundsToTileRange(a)),this._wrapX=i.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,i.wrapLng[0]],n).x/o.x),Math.ceil(t.project([0,i.wrapLng[1]],n).x/o.y)],this._wrapY=i.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([i.wrapLat[0],0],n).y/o.x),Math.ceil(t.project([i.wrapLat[1],0],n).y/o.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(t){var i=this._map,o=i._animatingZoom?Math.max(i._animateToZoom,i.getZoom()):i.getZoom(),n=i.getZoomScale(o,this._tileZoom),a=i.project(t,this._tileZoom).floor(),r=i.getSize().divideBy(2*n);return new e.Bounds(a.subtract(r),a.add(r))},_update:function(t){var i=this._map;if(i){var o=i.getZoom();if(t===m&&(t=i.getCenter()),this._tileZoom!==m){var n=this._getTiledPixelBounds(t),a=this._pxBoundsToTileRange(n),r=a.getCenter(),l=[],d=this.options.keepBuffer,_=new e.Bounds(a.getBottomLeft().subtract([d,-d]),a.getTopRight().add([d,-d]));for(var g in this._tiles){var y=this._tiles[g].coords;y.z===this._tileZoom&&_.contains(e.point(y.x,y.y))||(this._tiles[g].current=!1)}if(Math.abs(o-this._tileZoom)>1)return void this._setView(t,o);for(var b=a.min.y;b<=a.max.y;b++)for(var P=a.min.x;P<=a.max.x;P++){var x=new e.Point(P,b);if(x.z=this._tileZoom,this._isValidTile(x)){var D=this._tiles[this._tileCoordsToKey(x)];D?D.current=!0:l.push(x)}}if(l.sort(function(B,I){return B.distanceTo(r)-I.distanceTo(r)}),l.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var T=p.createDocumentFragment();for(P=0;P<l.length;P++)this._addTile(l[P],T);this._level.el.appendChild(T)}}}},_isValidTile:function(t){var i=this._map.options.crs;if(!i.infinite){var o=this._globalTileRange;if(!i.wrapLng&&(t.x<o.min.x||t.x>o.max.x)||!i.wrapLat&&(t.y<o.min.y||t.y>o.max.y))return!1}if(!this.options.bounds)return!0;var n=this._tileCoordsToBounds(t);return e.latLngBounds(this.options.bounds).overlaps(n)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToBounds:function(t){var i=this._map,o=this.getTileSize(),n=t.scaleBy(o),a=n.add(o),r=i.unproject(n,t.z),l=i.unproject(a,t.z);return this.options.noWrap||(r=i.wrapLatLng(r),l=i.wrapLatLng(l)),new e.LatLngBounds(r,l)},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var i=t.split(":"),o=new e.Point(+i[0],+i[1]);return o.z=+i[2],o},_removeTile:function(t){var i=this._tiles[t];i&&(e.DomUtil.remove(i.el),delete this._tiles[t],this.fire("tileunload",{tile:i.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){e.DomUtil.addClass(t,"leaflet-tile");var i=this.getTileSize();t.style.width=i.x+"px",t.style.height=i.y+"px",t.onselectstart=e.Util.falseFn,t.onmousemove=e.Util.falseFn,e.Browser.ielt9&&this.options.opacity<1&&e.DomUtil.setOpacity(t,this.options.opacity),e.Browser.android&&!e.Browser.android23&&(t.style.WebkitBackfaceVisibility="hidden")},_addTile:function(t,i){var o=this._getTilePos(t),n=this._tileCoordsToKey(t),a=this.createTile(this._wrapCoords(t),e.bind(this._tileReady,this,t));this._initTile(a),this.createTile.length<2&&e.Util.requestAnimFrame(e.bind(this._tileReady,this,t,null,a)),e.DomUtil.setPosition(a,o),this._tiles[n]={el:a,coords:t,current:!0},i.appendChild(a),this.fire("tileloadstart",{tile:a,coords:t})},_tileReady:function(t,i,o){if(this._map){i&&this.fire("tileerror",{error:i,tile:o,coords:t});var n=this._tileCoordsToKey(t);o=this._tiles[n],o&&(o.loaded=+new Date,this._map._fadeAnimated?(e.DomUtil.setOpacity(o.el,0),e.Util.cancelAnimFrame(this._fadeFrame),this._fadeFrame=e.Util.requestAnimFrame(this._updateOpacity,this)):(o.active=!0,this._pruneTiles()),i||(e.DomUtil.addClass(o.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:o.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),e.Browser.ielt9||!this._map._fadeAnimated?e.Util.requestAnimFrame(this._pruneTiles,this):setTimeout(e.bind(this._pruneTiles,this),250)))}},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var i=new e.Point(this._wrapX?e.Util.wrapNum(t.x,this._wrapX):t.x,this._wrapY?e.Util.wrapNum(t.y,this._wrapY):t.y);return i.z=t.z,i},_pxBoundsToTileRange:function(t){var i=this.getTileSize();return new e.Bounds(t.min.unscaleBy(i).floor(),t.max.unscaleBy(i).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}}),e.gridLayer=function(t){return new e.GridLayer(t)},e.TileLayer=e.GridLayer.extend({options:{minZoom:0,maxZoom:18,maxNativeZoom:null,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(t,i){this._url=t,i=e.setOptions(this,i),i.detectRetina&&e.Browser.retina&&i.maxZoom>0&&(i.tileSize=Math.floor(i.tileSize/2),i.zoomReverse?(i.zoomOffset--,i.minZoom++):(i.zoomOffset++,i.maxZoom--),i.minZoom=Math.max(0,i.minZoom)),typeof i.subdomains=="string"&&(i.subdomains=i.subdomains.split("")),e.Browser.android||this.on("tileunload",this._onTileRemove)},setUrl:function(t,i){return this._url=t,i||this.redraw(),this},createTile:function(t,i){var o=p.createElement("img");return e.DomEvent.on(o,"load",e.bind(this._tileOnLoad,this,i,o)),e.DomEvent.on(o,"error",e.bind(this._tileOnError,this,i,o)),this.options.crossOrigin&&(o.crossOrigin=""),o.alt="",o.src=this.getTileUrl(t),o},getTileUrl:function(t){var i={r:e.Browser.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var o=this._globalTileRange.max.y-t.y;this.options.tms&&(i.y=o),i["-y"]=o}return e.Util.template(this._url,e.extend(i,this.options))},_tileOnLoad:function(t,i){e.Browser.ielt9?setTimeout(e.bind(t,this,null,i),0):t(null,i)},_tileOnError:function(t,i,o){var n=this.options.errorTileUrl;n&&(i.src=n),t(o,i)},getTileSize:function(){var t=this._map,i=e.GridLayer.prototype.getTileSize.call(this),o=this._tileZoom+this.options.zoomOffset,n=this.options.maxNativeZoom;return n!==null&&o>n?i.divideBy(t.getZoomScale(n,o)).round():i},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this.options,i=this._tileZoom;return t.zoomReverse&&(i=t.maxZoom-i),i+=t.zoomOffset,t.maxNativeZoom!==null?Math.min(i,t.maxNativeZoom):i},_getSubdomain:function(t){var i=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[i]},_abortLoading:function(){var t,i;for(t in this._tiles)this._tiles[t].coords.z!==this._tileZoom&&(i=this._tiles[t].el,i.onload=e.Util.falseFn,i.onerror=e.Util.falseFn,i.complete||(i.src=e.Util.emptyImageUrl,e.DomUtil.remove(i)))}}),e.tileLayer=function(t,i){return new e.TileLayer(t,i)},e.TileLayer.WMS=e.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,i){this._url=t;var o=e.extend({},this.defaultWmsParams);for(var n in i)n in this.options||(o[n]=i[n]);i=e.setOptions(this,i),o.width=o.height=i.tileSize*(i.detectRetina&&e.Browser.retina?2:1),this.wmsParams=o},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var i=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[i]=this._crs.code,e.TileLayer.prototype.onAdd.call(this,t)},getTileUrl:function(t){var i=this._tileCoordsToBounds(t),o=this._crs.project(i.getNorthWest()),n=this._crs.project(i.getSouthEast()),a=(this._wmsVersion>=1.3&&this._crs===e.CRS.EPSG4326?[n.y,o.x,o.y,n.x]:[o.x,n.y,n.x,o.y]).join(","),r=e.TileLayer.prototype.getTileUrl.call(this,t);return r+e.Util.getParamString(this.wmsParams,r,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+a},setParams:function(t,i){return e.extend(this.wmsParams,t),i||this.redraw(),this}}),e.tileLayer.wms=function(t,i){return new e.TileLayer.WMS(t,i)},e.ImageOverlay=e.Layer.extend({options:{opacity:1,alt:"",interactive:!1,attribution:null,crossOrigin:!1},initialize:function(t,i,o){this._url=t,this._bounds=e.latLngBounds(i),e.setOptions(this,o)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(e.DomUtil.addClass(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){e.DomUtil.remove(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&e.DomUtil.toFront(this._image),this},bringToBack:function(){return this._map&&e.DomUtil.toBack(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=t,this._map&&this._reset(),this},getAttribution:function(){return this.options.attribution},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._image=e.DomUtil.create("img","leaflet-image-layer "+(this._zoomAnimated?"leaflet-zoom-animated":""));t.onselectstart=e.Util.falseFn,t.onmousemove=e.Util.falseFn,t.onload=e.bind(this.fire,this,"load"),this.options.crossOrigin&&(t.crossOrigin=""),t.src=this._url,t.alt=this.options.alt},_animateZoom:function(t){var i=this._map.getZoomScale(t.zoom),o=this._map._latLngToNewLayerPoint(this._bounds.getNorthWest(),t.zoom,t.center);e.DomUtil.setTransform(this._image,o,i)},_reset:function(){var t=this._image,i=new e.Bounds(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),o=i.getSize();e.DomUtil.setPosition(t,i.min),t.style.width=o.x+"px",t.style.height=o.y+"px"},_updateOpacity:function(){e.DomUtil.setOpacity(this._image,this.options.opacity)}}),e.imageOverlay=function(t,i,o){return new e.ImageOverlay(t,i,o)},e.Icon=e.Class.extend({initialize:function(t){e.setOptions(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,i){var o=this._getIconUrl(t);if(!o){if(t==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var n=this._createImg(o,i&&i.tagName==="IMG"?i:null);return this._setIconStyles(n,t),n},_setIconStyles:function(t,i){var o=this.options,n=o[i+"Size"];typeof n=="number"&&(n=[n,n]);var a=e.point(n),r=e.point(i==="shadow"&&o.shadowAnchor||o.iconAnchor||a&&a.divideBy(2,!0));t.className="leaflet-marker-"+i+" "+(o.className||""),r&&(t.style.marginLeft=-r.x+"px",t.style.marginTop=-r.y+"px"),a&&(t.style.width=a.x+"px",t.style.height=a.y+"px")},_createImg:function(t,i){return i=i||p.createElement("img"),i.src=t,i},_getIconUrl:function(t){return e.Browser.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}}),e.icon=function(t){return new e.Icon(t)},e.Icon.Default=e.Icon.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return e.Icon.Default.imagePath||(e.Icon.Default.imagePath=this._detectIconPath()),(this.options.imagePath||e.Icon.Default.imagePath)+e.Icon.prototype._getIconUrl.call(this,t)},_detectIconPath:function(){var t=e.DomUtil.create("div","leaflet-default-icon-path",p.body),i=e.DomUtil.getStyle(t,"background-image")||e.DomUtil.getStyle(t,"backgroundImage");return p.body.removeChild(t),i.indexOf("url")===0?i.replace(/^url\([\"\']?/,"").replace(/marker-icon\.png[\"\']?\)$/,""):""}}),e.Marker=e.Layer.extend({options:{icon:new e.Icon.Default,interactive:!0,draggable:!1,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",nonBubblingEvents:["click","dblclick","mouseover","mouseout","contextmenu"]},initialize:function(t,i){e.setOptions(this,i),this._latlng=e.latLng(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var i=this._latlng;return this._latlng=e.latLng(t),this.update(),this.fire("move",{oldLatLng:i,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,i="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),o=t.icon.createIcon(this._icon),n=!1;o!==this._icon&&(this._icon&&this._removeIcon(),n=!0,t.title&&(o.title=t.title),t.alt&&(o.alt=t.alt)),e.DomUtil.addClass(o,i),t.keyboard&&(o.tabIndex="0"),this._icon=o,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var a=t.icon.createShadow(this._shadow),r=!1;a!==this._shadow&&(this._removeShadow(),r=!0),a&&e.DomUtil.addClass(a,i),this._shadow=a,t.opacity<1&&this._updateOpacity(),n&&this.getPane().appendChild(this._icon),this._initInteraction(),a&&r&&this.getPane("shadowPane").appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),e.DomUtil.remove(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&e.DomUtil.remove(this._shadow),this._shadow=null},_setPos:function(t){e.DomUtil.setPosition(this._icon,t),this._shadow&&e.DomUtil.setPosition(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon.style.zIndex=this._zIndex+t},_animateZoom:function(t){var i=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(i)},_initInteraction:function(){if(this.options.interactive&&(e.DomUtil.addClass(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),e.Handler.MarkerDrag)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new e.Handler.MarkerDrag(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;e.DomUtil.setOpacity(this._icon,t),this._shadow&&e.DomUtil.setOpacity(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)}}),e.marker=function(t,i){return new e.Marker(t,i)},e.DivIcon=e.Icon.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var i=t&&t.tagName==="DIV"?t:p.createElement("div"),o=this.options;if(i.innerHTML=o.html!==!1?o.html:"",o.bgPos){var n=e.point(o.bgPos);i.style.backgroundPosition=-n.x+"px "+-n.y+"px"}return this._setIconStyles(i,"icon"),i},createShadow:function(){return null}}),e.divIcon=function(t){return new e.DivIcon(t)},e.DivOverlay=e.Layer.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(t,i){e.setOptions(this,t),this._source=i},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&e.DomUtil.setOpacity(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&e.DomUtil.setOpacity(this._container,1),this.bringToFront()},onRemove:function(t){t._fadeAnimated?(e.DomUtil.setOpacity(this._container,0),this._removeTimeout=setTimeout(e.bind(e.DomUtil.remove,e.DomUtil,this._container),200)):e.DomUtil.remove(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=e.latLng(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&e.DomUtil.toFront(this._container),this},bringToBack:function(){return this._map&&e.DomUtil.toBack(this._container),this},_updateContent:function(){if(this._content){var t=this._contentNode,i=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof i=="string")t.innerHTML=i;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(i)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),i=e.point(this.options.offset),o=this._getAnchor();this._zoomAnimated?e.DomUtil.setPosition(this._container,t.add(o)):i=i.add(t).add(o);var n=this._containerBottom=-i.y,a=this._containerLeft=-Math.round(this._containerWidth/2)+i.x;this._container.style.bottom=n+"px",this._container.style.left=a+"px"}},_getAnchor:function(){return[0,0]}}),e.Popup=e.DivOverlay.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,className:""},openOn:function(t){return t.openPopup(this),this},onAdd:function(t){e.DivOverlay.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof e.Path||this._source.on("preclick",e.DomEvent.stopPropagation))},onRemove:function(t){e.DivOverlay.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof e.Path||this._source.off("preclick",e.DomEvent.stopPropagation))},getEvents:function(){var t=e.DivOverlay.prototype.getEvents.call(this);return("closeOnClick"in this.options?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t="leaflet-popup",i=this._container=e.DomUtil.create("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated");if(this.options.closeButton){var o=this._closeButton=e.DomUtil.create("a",t+"-close-button",i);o.href="#close",o.innerHTML="&#215;",e.DomEvent.on(o,"click",this._onCloseButtonClick,this)}var n=this._wrapper=e.DomUtil.create("div",t+"-content-wrapper",i);this._contentNode=e.DomUtil.create("div",t+"-content",n),e.DomEvent.disableClickPropagation(n).disableScrollPropagation(this._contentNode).on(n,"contextmenu",e.DomEvent.stopPropagation),this._tipContainer=e.DomUtil.create("div",t+"-tip-container",i),this._tip=e.DomUtil.create("div",t+"-tip",this._tipContainer)},_updateLayout:function(){var t=this._contentNode,i=t.style;i.width="",i.whiteSpace="nowrap";var o=t.offsetWidth;o=Math.min(o,this.options.maxWidth),o=Math.max(o,this.options.minWidth),i.width=o+1+"px",i.whiteSpace="",i.height="";var n=t.offsetHeight,a=this.options.maxHeight,r="leaflet-popup-scrolled";a&&n>a?(i.height=a+"px",e.DomUtil.addClass(t,r)):e.DomUtil.removeClass(t,r),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var i=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),o=this._getAnchor();e.DomUtil.setPosition(this._container,i.add(o))},_adjustPan:function(){if(!(!this.options.autoPan||this._map._panAnim&&this._map._panAnim._inProgress)){var t=this._map,i=parseInt(e.DomUtil.getStyle(this._container,"marginBottom"),10)||0,o=this._container.offsetHeight+i,n=this._containerWidth,a=new e.Point(this._containerLeft,-o-this._containerBottom);a._add(e.DomUtil.getPosition(this._container));var r=t.layerPointToContainerPoint(a),l=e.point(this.options.autoPanPadding),d=e.point(this.options.autoPanPaddingTopLeft||l),_=e.point(this.options.autoPanPaddingBottomRight||l),g=t.getSize(),y=0,b=0;r.x+n+_.x>g.x&&(y=r.x+n-g.x+_.x),r.x-y-d.x<0&&(y=r.x-d.x),r.y+o+_.y>g.y&&(b=r.y+o-g.y+_.y),r.y-b-d.y<0&&(b=r.y-d.y),(y||b)&&t.fire("autopanstart").panBy([y,b])}},_onCloseButtonClick:function(t){this._close(),e.DomEvent.stop(t)},_getAnchor:function(){return e.point(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),e.popup=function(t,i){return new e.Popup(t,i)},e.Map.mergeOptions({closePopupOnClick:!0}),e.Map.include({openPopup:function(t,i,o){return t instanceof e.Popup||(t=new e.Popup(o).setContent(t)),i&&t.setLatLng(i),this.hasLayer(t)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=t,this.addLayer(t))},closePopup:function(t){return t&&t!==this._popup||(t=this._popup,this._popup=null),t&&this.removeLayer(t),this}}),e.Layer.include({bindPopup:function(t,i){return t instanceof e.Popup?(e.setOptions(t,i),this._popup=t,t._source=this):(this._popup&&!i||(this._popup=new e.Popup(i,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on({click:this._openPopup,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t,i){if(t instanceof e.Layer||(i=t,t=this),t instanceof e.FeatureGroup)for(var o in this._layers){t=this._layers[o];break}return i||(i=t.getCenter?t.getCenter():t.getLatLng()),this._popup&&this._map&&(this._popup._source=t,this._popup.update(),this._map.openPopup(this._popup,i)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(t){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(t)),this},isPopupOpen:function(){return this._popup.isOpen()},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){var i=t.layer||t.target;if(this._popup&&this._map)return e.DomEvent.stop(t),i instanceof e.Path?void this.openPopup(t.layer||t.target,t.latlng):void(this._map.hasLayer(this._popup)&&this._popup._source===i?this.closePopup():this.openPopup(i,t.latlng))},_movePopup:function(t){this._popup.setLatLng(t.latlng)}}),e.Marker.include({_getPopupAnchor:function(){return this.options.icon.options.popupAnchor||[0,0]}}),e.Tooltip=e.DivOverlay.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(t){e.DivOverlay.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(t){e.DivOverlay.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var t=e.DivOverlay.prototype.getEvents.call(this);return e.Browser.touch&&!this.options.permanent&&(t.preclick=this._close),t},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var t="leaflet-tooltip",i=t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=e.DomUtil.create("div",i)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var i=this._map,o=this._container,n=i.latLngToContainerPoint(i.getCenter()),a=i.layerPointToContainerPoint(t),r=this.options.direction,l=o.offsetWidth,d=o.offsetHeight,_=e.point(this.options.offset),g=this._getAnchor();r==="top"?t=t.add(e.point(-l/2+_.x,-d+_.y+g.y)):r==="bottom"?t=t.subtract(e.point(l/2-_.x,-_.y)):r==="center"?t=t.subtract(e.point(l/2+_.x,d/2-g.y+_.y)):r==="right"||r==="auto"&&a.x<n.x?(r="right",t=t.add([_.x+g.x,g.y-d/2+_.y])):(r="left",t=t.subtract(e.point(l+g.x-_.x,d/2-g.y-_.y))),e.DomUtil.removeClass(o,"leaflet-tooltip-right"),e.DomUtil.removeClass(o,"leaflet-tooltip-left"),e.DomUtil.removeClass(o,"leaflet-tooltip-top"),e.DomUtil.removeClass(o,"leaflet-tooltip-bottom"),e.DomUtil.addClass(o,"leaflet-tooltip-"+r),e.DomUtil.setPosition(o,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&e.DomUtil.setOpacity(this._container,t)},_animateZoom:function(t){var i=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(i)},_getAnchor:function(){return e.point(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),e.tooltip=function(t,i){return new e.Tooltip(t,i)},e.Map.include({openTooltip:function(t,i,o){return t instanceof e.Tooltip||(t=new e.Tooltip(o).setContent(t)),i&&t.setLatLng(i),this.hasLayer(t)?this:this.addLayer(t)},closeTooltip:function(t){return t&&this.removeLayer(t),this}}),e.Layer.include({bindTooltip:function(t,i){return t instanceof e.Tooltip?(e.setOptions(t,i),this._tooltip=t,t._source=this):(this._tooltip&&!i||(this._tooltip=e.tooltip(i,this)),this._tooltip.setContent(t)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(t||!this._tooltipHandlersAdded){var i=t?"off":"on",o={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?o.add=this._openTooltip:(o.mouseover=this._openTooltip,o.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(o.mousemove=this._moveTooltip),e.Browser.touch&&(o.click=this._openTooltip)),this[i](o),this._tooltipHandlersAdded=!t}},openTooltip:function(t,i){if(t instanceof e.Layer||(i=t,t=this),t instanceof e.FeatureGroup)for(var o in this._layers){t=this._layers[o];break}return i||(i=t.getCenter?t.getCenter():t.getLatLng()),this._tooltip&&this._map&&(this._tooltip._source=t,this._tooltip.update(),this._map.openTooltip(this._tooltip,i),this._tooltip.options.interactive&&this._tooltip._container&&(e.DomUtil.addClass(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(e.DomUtil.removeClass(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(t){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(t)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_openTooltip:function(t){var i=t.layer||t.target;this._tooltip&&this._map&&this.openTooltip(i,this._tooltip.options.sticky?t.latlng:m)},_moveTooltip:function(t){var i,o,n=t.latlng;this._tooltip.options.sticky&&t.originalEvent&&(i=this._map.mouseEventToContainerPoint(t.originalEvent),o=this._map.containerPointToLayerPoint(i),n=this._map.layerPointToLatLng(o)),this._tooltip.setLatLng(n)}}),e.Marker.include({_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor||[0,0]}}),e.LayerGroup=e.Layer.extend({initialize:function(t){this._layers={};var i,o;if(t)for(i=0,o=t.length;i<o;i++)this.addLayer(t[i])},addLayer:function(t){var i=this.getLayerId(t);return this._layers[i]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var i=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[i]&&this._map.removeLayer(this._layers[i]),delete this._layers[i],this},hasLayer:function(t){return!!t&&(t in this._layers||this.getLayerId(t)in this._layers)},clearLayers:function(){for(var t in this._layers)this.removeLayer(this._layers[t]);return this},invoke:function(t){var i,o,n=Array.prototype.slice.call(arguments,1);for(i in this._layers)o=this._layers[i],o[t]&&o[t].apply(o,n);return this},onAdd:function(t){for(var i in this._layers)t.addLayer(this._layers[i])},onRemove:function(t){for(var i in this._layers)t.removeLayer(this._layers[i])},eachLayer:function(t,i){for(var o in this._layers)t.call(i,this._layers[o]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];for(var i in this._layers)t.push(this._layers[i]);return t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return e.stamp(t)}}),e.layerGroup=function(t){return new e.LayerGroup(t)},e.FeatureGroup=e.LayerGroup.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),e.LayerGroup.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),e.LayerGroup.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new e.LatLngBounds;for(var i in this._layers){var o=this._layers[i];t.extend(o.getBounds?o.getBounds():o.getLatLng())}return t}}),e.featureGroup=function(t){return new e.FeatureGroup(t)},e.Renderer=e.Layer.extend({options:{padding:.1},initialize:function(t){e.setOptions(this,t),e.stamp(this)},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&e.DomUtil.addClass(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update()},onRemove:function(){e.DomUtil.remove(this._container)},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,i){var o=this._map.getZoomScale(i,this._zoom),n=e.DomUtil.getPosition(this._container),a=this._map.getSize().multiplyBy(.5+this.options.padding),r=this._map.project(this._center,i),l=this._map.project(t,i),d=l.subtract(r),_=a.multiplyBy(-o).add(n).add(a).subtract(d);e.Browser.any3d?e.DomUtil.setTransform(this._container,_,o):e.DomUtil.setPosition(this._container,_)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom)},_update:function(){var t=this.options.padding,i=this._map.getSize(),o=this._map.containerPointToLayerPoint(i.multiplyBy(-t)).round();this._bounds=new e.Bounds(o,o.add(i.multiplyBy(1+2*t)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),e.Map.include({getRenderer:function(t){var i=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return i||(i=this._renderer=this.options.preferCanvas&&e.canvas()||e.svg()),this.hasLayer(i)||this.addLayer(i),i},_getPaneRenderer:function(t){if(t==="overlayPane"||t===m)return!1;var i=this._paneRenderers[t];return i===m&&(i=e.SVG&&e.svg({pane:t})||e.Canvas&&e.canvas({pane:t}),this._paneRenderers[t]=i),i}}),e.Path=e.Layer.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this),this._renderer.on("update",this._update,this)},onRemove:function(){this._renderer._removePath(this),this._renderer.off("update",this._update,this)},getEvents:function(){return{zoomend:this._project,viewreset:this._reset}},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return e.setOptions(this,t),this._renderer&&this._renderer._updateStyle(this),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(e.Browser.touch?10:0)}}),e.LineUtil={simplify:function(t,i){if(!i||!t.length)return t.slice();var o=i*i;return t=this._reducePoints(t,o),t=this._simplifyDP(t,o)},pointToSegmentDistance:function(t,i,o){return Math.sqrt(this._sqClosestPointOnSegment(t,i,o,!0))},closestPointOnSegment:function(t,i,o){return this._sqClosestPointOnSegment(t,i,o)},_simplifyDP:function(t,i){var o=t.length,n=typeof Uint8Array!=m+""?Uint8Array:Array,a=new n(o);a[0]=a[o-1]=1,this._simplifyDPStep(t,a,i,0,o-1);var r,l=[];for(r=0;r<o;r++)a[r]&&l.push(t[r]);return l},_simplifyDPStep:function(t,i,o,n,a){var r,l,d,_=0;for(l=n+1;l<=a-1;l++)d=this._sqClosestPointOnSegment(t[l],t[n],t[a],!0),d>_&&(r=l,_=d);_>o&&(i[r]=1,this._simplifyDPStep(t,i,o,n,r),this._simplifyDPStep(t,i,o,r,a))},_reducePoints:function(t,i){for(var o=[t[0]],n=1,a=0,r=t.length;n<r;n++)this._sqDist(t[n],t[a])>i&&(o.push(t[n]),a=n);return a<r-1&&o.push(t[r-1]),o},clipSegment:function(t,i,o,n,a){var r,l,d,_=n?this._lastCode:this._getBitCode(t,o),g=this._getBitCode(i,o);for(this._lastCode=g;;){if(!(_|g))return[t,i];if(_&g)return!1;r=_||g,l=this._getEdgeIntersection(t,i,r,o,a),d=this._getBitCode(l,o),r===_?(t=l,_=d):(i=l,g=d)}},_getEdgeIntersection:function(t,i,o,n,a){var r,l,d=i.x-t.x,_=i.y-t.y,g=n.min,y=n.max;return 8&o?(r=t.x+d*(y.y-t.y)/_,l=y.y):4&o?(r=t.x+d*(g.y-t.y)/_,l=g.y):2&o?(r=y.x,l=t.y+_*(y.x-t.x)/d):1&o&&(r=g.x,l=t.y+_*(g.x-t.x)/d),new e.Point(r,l,a)},_getBitCode:function(t,i){var o=0;return t.x<i.min.x?o|=1:t.x>i.max.x&&(o|=2),t.y<i.min.y?o|=4:t.y>i.max.y&&(o|=8),o},_sqDist:function(t,i){var o=i.x-t.x,n=i.y-t.y;return o*o+n*n},_sqClosestPointOnSegment:function(t,i,o,n){var a,r=i.x,l=i.y,d=o.x-r,_=o.y-l,g=d*d+_*_;return g>0&&(a=((t.x-r)*d+(t.y-l)*_)/g,a>1?(r=o.x,l=o.y):a>0&&(r+=d*a,l+=_*a)),d=t.x-r,_=t.y-l,n?d*d+_*_:new e.Point(r,l)}},e.Polyline=e.Path.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,i){e.setOptions(this,i),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var i,o,n=1/0,a=null,r=e.LineUtil._sqClosestPointOnSegment,l=0,d=this._parts.length;l<d;l++)for(var _=this._parts[l],g=1,y=_.length;g<y;g++){i=_[g-1],o=_[g];var b=r(t,i,o,!0);b<n&&(n=b,a=r(t,i,o))}return a&&(a.distance=Math.sqrt(n)),a},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,i,o,n,a,r,l,d=this._rings[0],_=d.length;if(!_)return null;for(t=0,i=0;t<_-1;t++)i+=d[t].distanceTo(d[t+1])/2;if(i===0)return this._map.layerPointToLatLng(d[0]);for(t=0,n=0;t<_-1;t++)if(a=d[t],r=d[t+1],o=a.distanceTo(r),n+=o,n>i)return l=(n-i)/o,this._map.layerPointToLatLng([r.x-l*(r.x-a.x),r.y-l*(r.y-a.y)])},getBounds:function(){return this._bounds},addLatLng:function(t,i){return i=i||this._defaultShape(),t=e.latLng(t),i.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new e.LatLngBounds,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return e.Polyline._flat(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var i=[],o=e.Polyline._flat(t),n=0,a=t.length;n<a;n++)o?(i[n]=e.latLng(t[n]),this._bounds.extend(i[n])):i[n]=this._convertLatLngs(t[n]);return i},_project:function(){var t=new e.Bounds;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t);var i=this._clickTolerance(),o=new e.Point(i,i);this._bounds.isValid()&&t.isValid()&&(t.min._subtract(o),t.max._add(o),this._pxBounds=t)},_projectLatlngs:function(t,i,o){var n,a,r=t[0]instanceof e.LatLng,l=t.length;if(r){for(a=[],n=0;n<l;n++)a[n]=this._map.latLngToLayerPoint(t[n]),o.extend(a[n]);i.push(a)}else for(n=0;n<l;n++)this._projectLatlngs(t[n],i,o)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t)){if(this.options.noClip)return void(this._parts=this._rings);var i,o,n,a,r,l,d,_=this._parts;for(i=0,n=0,a=this._rings.length;i<a;i++)for(d=this._rings[i],o=0,r=d.length;o<r-1;o++)l=e.LineUtil.clipSegment(d[o],d[o+1],t,o,!0),l&&(_[n]=_[n]||[],_[n].push(l[0]),l[1]===d[o+1]&&o!==r-2||(_[n].push(l[1]),n++))}},_simplifyPoints:function(){for(var t=this._parts,i=this.options.smoothFactor,o=0,n=t.length;o<n;o++)t[o]=e.LineUtil.simplify(t[o],i)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)}}),e.polyline=function(t,i){return new e.Polyline(t,i)},e.Polyline._flat=function(t){return!e.Util.isArray(t[0])||typeof t[0][0]!="object"&&typeof t[0][0]!="undefined"},e.PolyUtil={},e.PolyUtil.clipPolygon=function(t,i,o){var n,a,r,l,d,_,g,y,b,P=[1,4,2,8],x=e.LineUtil;for(a=0,g=t.length;a<g;a++)t[a]._code=x._getBitCode(t[a],i);for(l=0;l<4;l++){for(y=P[l],n=[],a=0,g=t.length,r=g-1;a<g;r=a++)d=t[a],_=t[r],d._code&y?_._code&y||(b=x._getEdgeIntersection(_,d,y,i,o),b._code=x._getBitCode(b,i),n.push(b)):(_._code&y&&(b=x._getEdgeIntersection(_,d,y,i,o),b._code=x._getBitCode(b,i),n.push(b)),n.push(d));t=n}return t},e.Polygon=e.Polyline.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,i,o,n,a,r,l,d,_,g=this._rings[0],y=g.length;if(!y)return null;for(r=l=d=0,t=0,i=y-1;t<y;i=t++)o=g[t],n=g[i],a=o.y*n.x-n.y*o.x,l+=(o.x+n.x)*a,d+=(o.y+n.y)*a,r+=3*a;return _=r===0?g[0]:[l/r,d/r],this._map.layerPointToLatLng(_)},_convertLatLngs:function(t){var i=e.Polyline.prototype._convertLatLngs.call(this,t),o=i.length;return o>=2&&i[0]instanceof e.LatLng&&i[0].equals(i[o-1])&&i.pop(),i},_setLatLngs:function(t){e.Polyline.prototype._setLatLngs.call(this,t),e.Polyline._flat(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return e.Polyline._flat(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,i=this.options.weight,o=new e.Point(i,i);if(t=new e.Bounds(t.min.subtract(o),t.max.add(o)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(t)){if(this.options.noClip)return void(this._parts=this._rings);for(var n,a=0,r=this._rings.length;a<r;a++)n=e.PolyUtil.clipPolygon(this._rings[a],t,!0),n.length&&this._parts.push(n)}},_updatePath:function(){this._renderer._updatePoly(this,!0)}}),e.polygon=function(t,i){return new e.Polygon(t,i)},e.Rectangle=e.Polygon.extend({initialize:function(t,i){e.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(t),i)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=e.latLngBounds(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}}),e.rectangle=function(t,i){return new e.Rectangle(t,i)},e.CircleMarker=e.Path.extend({options:{fill:!0,radius:10},initialize:function(t,i){e.setOptions(this,i),this._latlng=e.latLng(t),this._radius=this.options.radius},setLatLng:function(t){return this._latlng=e.latLng(t),this.redraw(),this.fire("move",{latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var i=t&&t.radius||this._radius;return e.Path.prototype.setStyle.call(this,t),this.setRadius(i),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,i=this._radiusY||t,o=this._clickTolerance(),n=[t+o,i+o];this._pxBounds=new e.Bounds(this._point.subtract(n),this._point.add(n))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)}}),e.circleMarker=function(t,i){return new e.CircleMarker(t,i)},e.Circle=e.CircleMarker.extend({initialize:function(t,i,o){if(typeof i=="number"&&(i=e.extend({},o,{radius:i})),e.setOptions(this,i),this._latlng=e.latLng(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new e.LatLngBounds(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:e.Path.prototype.setStyle,_project:function(){var t=this._latlng.lng,i=this._latlng.lat,o=this._map,n=o.options.crs;if(n.distance===e.CRS.Earth.distance){var a=Math.PI/180,r=this._mRadius/e.CRS.Earth.R/a,l=o.project([i+r,t]),d=o.project([i-r,t]),_=l.add(d).divideBy(2),g=o.unproject(_).lat,y=Math.acos((Math.cos(r*a)-Math.sin(i*a)*Math.sin(g*a))/(Math.cos(i*a)*Math.cos(g*a)))/a;(isNaN(y)||y===0)&&(y=r/Math.cos(Math.PI/180*i)),this._point=_.subtract(o.getPixelOrigin()),this._radius=isNaN(y)?0:Math.max(Math.round(_.x-o.project([g,t-y]).x),1),this._radiusY=Math.max(Math.round(_.y-l.y),1)}else{var b=n.unproject(n.project(this._latlng).subtract([this._mRadius,0]));this._point=o.latLngToLayerPoint(this._latlng),this._radius=this._point.x-o.latLngToLayerPoint(b).x}this._updateBounds()}}),e.circle=function(t,i,o){return new e.Circle(t,i,o)},e.SVG=e.Renderer.extend({getEvents:function(){var t=e.Renderer.prototype.getEvents.call(this);return t.zoomstart=this._onZoomStart,t},_initContainer:function(){this._container=e.SVG.create("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=e.SVG.create("g"),this._container.appendChild(this._rootGroup)},_onZoomStart:function(){this._update()},_update:function(){if(!this._map._animatingZoom||!this._bounds){e.Renderer.prototype._update.call(this);var t=this._bounds,i=t.getSize(),o=this._container;this._svgSize&&this._svgSize.equals(i)||(this._svgSize=i,o.setAttribute("width",i.x),o.setAttribute("height",i.y)),e.DomUtil.setPosition(o,t.min),o.setAttribute("viewBox",[t.min.x,t.min.y,i.x,i.y].join(" ")),this.fire("update")}},_initPath:function(t){var i=t._path=e.SVG.create("path");t.options.className&&e.DomUtil.addClass(i,t.options.className),t.options.interactive&&e.DomUtil.addClass(i,"leaflet-interactive"),this._updateStyle(t)},_addPath:function(t){this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){e.DomUtil.remove(t._path),t.removeInteractiveTarget(t._path)},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var i=t._path,o=t.options;i&&(o.stroke?(i.setAttribute("stroke",o.color),i.setAttribute("stroke-opacity",o.opacity),i.setAttribute("stroke-width",o.weight),i.setAttribute("stroke-linecap",o.lineCap),i.setAttribute("stroke-linejoin",o.lineJoin),o.dashArray?i.setAttribute("stroke-dasharray",o.dashArray):i.removeAttribute("stroke-dasharray"),o.dashOffset?i.setAttribute("stroke-dashoffset",o.dashOffset):i.removeAttribute("stroke-dashoffset")):i.setAttribute("stroke","none"),o.fill?(i.setAttribute("fill",o.fillColor||o.color),i.setAttribute("fill-opacity",o.fillOpacity),i.setAttribute("fill-rule",o.fillRule||"evenodd")):i.setAttribute("fill","none"))},_updatePoly:function(t,i){this._setPath(t,e.SVG.pointsToPath(t._parts,i))},_updateCircle:function(t){var i=t._point,o=t._radius,n=t._radiusY||o,a="a"+o+","+n+" 0 1,0 ",r=t._empty()?"M0 0":"M"+(i.x-o)+","+i.y+a+2*o+",0 "+a+2*-o+",0 ";this._setPath(t,r)},_setPath:function(t,i){t._path.setAttribute("d",i)},_bringToFront:function(t){e.DomUtil.toFront(t._path)},_bringToBack:function(t){e.DomUtil.toBack(t._path)}}),e.extend(e.SVG,{create:function(t){return p.createElementNS("http://www.w3.org/2000/svg",t)},pointsToPath:function(t,i){var o,n,a,r,l,d,_="";for(o=0,a=t.length;o<a;o++){for(l=t[o],n=0,r=l.length;n<r;n++)d=l[n],_+=(n?"L":"M")+d.x+" "+d.y;_+=i?e.Browser.svg?"z":"x":""}return _||"M0 0"}}),e.Browser.svg=!(!p.createElementNS||!e.SVG.create("svg").createSVGRect),e.svg=function(t){return e.Browser.svg||e.Browser.vml?new e.SVG(t):null},e.Browser.vml=!e.Browser.svg&&function(){try{var t=p.createElement("div");t.innerHTML='<v:shape adj="1"/>';var i=t.firstChild;return i.style.behavior="url(#default#VML)",i&&typeof i.adj=="object"}catch{return!1}}(),e.SVG.include(e.Browser.vml?{_initContainer:function(){this._container=e.DomUtil.create("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(e.Renderer.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var i=t._container=e.SVG.create("shape");e.DomUtil.addClass(i,"leaflet-vml-shape "+(this.options.className||"")),i.coordsize="1 1",t._path=e.SVG.create("path"),i.appendChild(t._path),this._updateStyle(t)},_addPath:function(t){var i=t._container;this._container.appendChild(i),t.options.interactive&&t.addInteractiveTarget(i)},_removePath:function(t){var i=t._container;e.DomUtil.remove(i),t.removeInteractiveTarget(i)},_updateStyle:function(t){var i=t._stroke,o=t._fill,n=t.options,a=t._container;a.stroked=!!n.stroke,a.filled=!!n.fill,n.stroke?(i||(i=t._stroke=e.SVG.create("stroke")),a.appendChild(i),i.weight=n.weight+"px",i.color=n.color,i.opacity=n.opacity,n.dashArray?i.dashStyle=e.Util.isArray(n.dashArray)?n.dashArray.join(" "):n.dashArray.replace(/( *, *)/g," "):i.dashStyle="",i.endcap=n.lineCap.replace("butt","flat"),i.joinstyle=n.lineJoin):i&&(a.removeChild(i),t._stroke=null),n.fill?(o||(o=t._fill=e.SVG.create("fill")),a.appendChild(o),o.color=n.fillColor||n.color,o.opacity=n.fillOpacity):o&&(a.removeChild(o),t._fill=null)},_updateCircle:function(t){var i=t._point.round(),o=Math.round(t._radius),n=Math.round(t._radiusY||o);this._setPath(t,t._empty()?"M0 0":"AL "+i.x+","+i.y+" "+o+","+n+" 0,23592600")},_setPath:function(t,i){t._path.v=i},_bringToFront:function(t){e.DomUtil.toFront(t._container)},_bringToBack:function(t){e.DomUtil.toBack(t._container)}}:{}),e.Browser.vml&&(e.SVG.create=function(){try{return p.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return p.createElement("<lvml:"+t+' class="lvml">')}}catch{return function(i){return p.createElement("<"+i+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}()),e.Canvas=e.Renderer.extend({onAdd:function(){e.Renderer.prototype.onAdd.call(this),this._layers=this._layers||{},this._draw()},_initContainer:function(){var t=this._container=p.createElement("canvas");e.DomEvent.on(t,"mousemove",e.Util.throttle(this._onMouseMove,32,this),this).on(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this).on(t,"mouseout",this._handleMouseOut,this),this._ctx=t.getContext("2d")},_update:function(){if(!this._map._animatingZoom||!this._bounds){this._drawnLayers={},e.Renderer.prototype._update.call(this);var t=this._bounds,i=this._container,o=t.getSize(),n=e.Browser.retina?2:1;e.DomUtil.setPosition(i,t.min),i.width=n*o.x,i.height=n*o.y,i.style.width=o.x+"px",i.style.height=o.y+"px",e.Browser.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_initPath:function(t){this._updateDashArray(t),this._layers[e.stamp(t)]=t},_addPath:e.Util.falseFn,_removePath:function(t){t._removed=!0,this._requestRedraw(t)},_updatePath:function(t){this._redrawBounds=t._pxBounds,this._draw(!0),t._project(),t._update(),this._draw(),this._redrawBounds=null},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(t.options.dashArray){var i,o=t.options.dashArray.split(","),n=[];for(i=0;i<o.length;i++)n.push(Number(o[i]));t.options._dashArray=n}},_requestRedraw:function(t){if(this._map){var i=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new e.Bounds,this._redrawBounds.extend(t._pxBounds.min.subtract([i,i])),this._redrawBounds.extend(t._pxBounds.max.add([i,i])),this._redrawRequest=this._redrawRequest||e.Util.requestAnimFrame(this._redraw,this)}},_redraw:function(){this._redrawRequest=null,this._draw(!0),this._draw(),this._redrawBounds=null},_draw:function(t){this._clear=t;var i,o=this._redrawBounds;this._ctx.save(),o&&(this._ctx.beginPath(),this._ctx.rect(o.min.x,o.min.y,o.max.x-o.min.x,o.max.y-o.min.y),this._ctx.clip());for(var n in this._layers)i=this._layers[n],(!o||i._pxBounds&&i._pxBounds.intersects(o))&&i._updatePath(),t&&i._removed&&(delete i._removed,delete this._layers[n]);this._ctx.restore()},_updatePoly:function(t,i){var o,n,a,r,l=t._parts,d=l.length,_=this._ctx;if(d){for(this._drawnLayers[t._leaflet_id]=t,_.beginPath(),_.setLineDash&&_.setLineDash(t.options&&t.options._dashArray||[]),o=0;o<d;o++){for(n=0,a=l[o].length;n<a;n++)r=l[o][n],_[n?"lineTo":"moveTo"](r.x,r.y);i&&_.closePath()}this._fillStroke(_,t)}},_updateCircle:function(t){if(!t._empty()){var i=t._point,o=this._ctx,n=t._radius,a=(t._radiusY||n)/n;this._drawnLayers[t._leaflet_id]=t,a!==1&&(o.save(),o.scale(1,a)),o.beginPath(),o.arc(i.x,i.y/a,n,0,2*Math.PI,!1),a!==1&&o.restore(),this._fillStroke(o,t)}},_fillStroke:function(t,i){var o=this._clear,n=i.options;t.globalCompositeOperation=o?"destination-out":"source-over",n.fill&&(t.globalAlpha=o?1:n.fillOpacity,t.fillStyle=n.fillColor||n.color,t.fill(n.fillRule||"evenodd")),n.stroke&&n.weight!==0&&(t.globalAlpha=o?1:n.opacity,i._prevWeight=t.lineWidth=o?i._prevWeight+1:n.weight,t.strokeStyle=n.color,t.lineCap=n.lineCap,t.lineJoin=n.lineJoin,t.stroke())},_onClick:function(t){var i,o=this._map.mouseEventToLayerPoint(t),n=[];for(var a in this._layers)i=this._layers[a],i.options.interactive&&i._containsPoint(o)&&!this._map._draggableMoved(i)&&(e.DomEvent._fakeStop(t),n.push(i));n.length&&this._fireEvent(n,t)},_onMouseMove:function(t){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var i=this._map.mouseEventToLayerPoint(t);this._handleMouseOut(t,i),this._handleMouseHover(t,i)}},_handleMouseOut:function(t,i){var o=this._hoveredLayer;!o||t.type!=="mouseout"&&o._containsPoint(i)||(e.DomUtil.removeClass(this._container,"leaflet-interactive"),this._fireEvent([o],t,"mouseout"),this._hoveredLayer=null)},_handleMouseHover:function(t,i){var o,n;for(o in this._drawnLayers)n=this._drawnLayers[o],n.options.interactive&&n._containsPoint(i)&&(e.DomUtil.addClass(this._container,"leaflet-interactive"),this._fireEvent([n],t,"mouseover"),this._hoveredLayer=n);this._hoveredLayer&&this._fireEvent([this._hoveredLayer],t)},_fireEvent:function(t,i,o){this._map._fireDOMEvent(i,o||i.type,t)},_bringToFront:e.Util.falseFn,_bringToBack:e.Util.falseFn}),e.Browser.canvas=function(){return!!p.createElement("canvas").getContext}(),e.canvas=function(t){return e.Browser.canvas?new e.Canvas(t):null},e.Polyline.prototype._containsPoint=function(t,i){var o,n,a,r,l,d,_=this._clickTolerance();if(!this._pxBounds.contains(t))return!1;for(o=0,r=this._parts.length;o<r;o++)for(d=this._parts[o],n=0,l=d.length,a=l-1;n<l;a=n++)if((i||n!==0)&&e.LineUtil.pointToSegmentDistance(t,d[a],d[n])<=_)return!0;return!1},e.Polygon.prototype._containsPoint=function(t){var i,o,n,a,r,l,d,_,g=!1;if(!this._pxBounds.contains(t))return!1;for(a=0,d=this._parts.length;a<d;a++)for(i=this._parts[a],r=0,_=i.length,l=_-1;r<_;l=r++)o=i[r],n=i[l],o.y>t.y!=n.y>t.y&&t.x<(n.x-o.x)*(t.y-o.y)/(n.y-o.y)+o.x&&(g=!g);return g||e.Polyline.prototype._containsPoint.call(this,t,!0)},e.CircleMarker.prototype._containsPoint=function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()},e.GeoJSON=e.FeatureGroup.extend({initialize:function(t,i){e.setOptions(this,i),this._layers={},t&&this.addData(t)},addData:function(t){var i,o,n,a=e.Util.isArray(t)?t:t.features;if(a){for(i=0,o=a.length;i<o;i++)n=a[i],(n.geometries||n.geometry||n.features||n.coordinates)&&this.addData(n);return this}var r=this.options;if(r.filter&&!r.filter(t))return this;var l=e.GeoJSON.geometryToLayer(t,r);return l?(l.feature=e.GeoJSON.asFeature(t),l.defaultOptions=l.options,this.resetStyle(l),r.onEachFeature&&r.onEachFeature(t,l),this.addLayer(l)):this},resetStyle:function(t){return t.options=e.Util.extend({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this},setStyle:function(t){return this.eachLayer(function(i){this._setLayerStyle(i,t)},this)},_setLayerStyle:function(t,i){typeof i=="function"&&(i=i(t.feature)),t.setStyle&&t.setStyle(i)}}),e.extend(e.GeoJSON,{geometryToLayer:function(t,i){var o,n,a,r,l=t.type==="Feature"?t.geometry:t,d=l?l.coordinates:null,_=[],g=i&&i.pointToLayer,y=i&&i.coordsToLatLng||this.coordsToLatLng;if(!d&&!l)return null;switch(l.type){case"Point":return o=y(d),g?g(t,o):new e.Marker(o);case"MultiPoint":for(a=0,r=d.length;a<r;a++)o=y(d[a]),_.push(g?g(t,o):new e.Marker(o));return new e.FeatureGroup(_);case"LineString":case"MultiLineString":return n=this.coordsToLatLngs(d,l.type==="LineString"?0:1,y),new e.Polyline(n,i);case"Polygon":case"MultiPolygon":return n=this.coordsToLatLngs(d,l.type==="Polygon"?1:2,y),new e.Polygon(n,i);case"GeometryCollection":for(a=0,r=l.geometries.length;a<r;a++){var b=this.geometryToLayer({geometry:l.geometries[a],type:"Feature",properties:t.properties},i);b&&_.push(b)}return new e.FeatureGroup(_);default:throw new Error("Invalid GeoJSON object.")}},coordsToLatLng:function(t){return new e.LatLng(t[1],t[0],t[2])},coordsToLatLngs:function(t,i,o){for(var n,a=[],r=0,l=t.length;r<l;r++)n=i?this.coordsToLatLngs(t[r],i-1,o):(o||this.coordsToLatLng)(t[r]),a.push(n);return a},latLngToCoords:function(t){return t.alt!==m?[t.lng,t.lat,t.alt]:[t.lng,t.lat]},latLngsToCoords:function(t,i,o){for(var n=[],a=0,r=t.length;a<r;a++)n.push(i?e.GeoJSON.latLngsToCoords(t[a],i-1,o):e.GeoJSON.latLngToCoords(t[a]));return!i&&o&&n.push(n[0]),n},getFeature:function(t,i){return t.feature?e.extend({},t.feature,{geometry:i}):e.GeoJSON.asFeature(i)},asFeature:function(t){return t.type==="Feature"?t:{type:"Feature",properties:{},geometry:t}}});var c={toGeoJSON:function(){return e.GeoJSON.getFeature(this,{type:"Point",coordinates:e.GeoJSON.latLngToCoords(this.getLatLng())})}};e.Marker.include(c),e.Circle.include(c),e.CircleMarker.include(c),e.Polyline.prototype.toGeoJSON=function(){var t=!e.Polyline._flat(this._latlngs),i=e.GeoJSON.latLngsToCoords(this._latlngs,t?1:0);return e.GeoJSON.getFeature(this,{type:(t?"Multi":"")+"LineString",coordinates:i})},e.Polygon.prototype.toGeoJSON=function(){var t=!e.Polyline._flat(this._latlngs),i=t&&!e.Polyline._flat(this._latlngs[0]),o=e.GeoJSON.latLngsToCoords(this._latlngs,i?2:t?1:0,!0);return t||(o=[o]),e.GeoJSON.getFeature(this,{type:(i?"Multi":"")+"Polygon",coordinates:o})},e.LayerGroup.include({toMultiPoint:function(){var t=[];return this.eachLayer(function(i){t.push(i.toGeoJSON().geometry.coordinates)}),e.GeoJSON.getFeature(this,{type:"MultiPoint",coordinates:t})},toGeoJSON:function(){var t=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(t==="MultiPoint")return this.toMultiPoint();var i=t==="GeometryCollection",o=[];return this.eachLayer(function(n){if(n.toGeoJSON){var a=n.toGeoJSON();o.push(i?a.geometry:e.GeoJSON.asFeature(a))}}),i?e.GeoJSON.getFeature(this,{geometries:o,type:"GeometryCollection"}):{type:"FeatureCollection",features:o}}}),e.geoJSON=function(t,i){return new e.GeoJSON(t,i)},e.geoJson=e.geoJSON;var f="_leaflet_events";e.DomEvent={on:function(t,i,o,n){if(typeof i=="object")for(var a in i)this._on(t,a,i[a],o);else{i=e.Util.splitWords(i);for(var r=0,l=i.length;r<l;r++)this._on(t,i[r],o,n)}return this},off:function(t,i,o,n){if(typeof i=="object")for(var a in i)this._off(t,a,i[a],o);else{i=e.Util.splitWords(i);for(var r=0,l=i.length;r<l;r++)this._off(t,i[r],o,n)}return this},_on:function(t,i,o,n){var a=i+e.stamp(o)+(n?"_"+e.stamp(n):"");if(t[f]&&t[f][a])return this;var r=function(d){return o.call(n||t,d||u.event)},l=r;return e.Browser.pointer&&i.indexOf("touch")===0?this.addPointerListener(t,i,r,a):e.Browser.touch&&i==="dblclick"&&this.addDoubleTapListener?this.addDoubleTapListener(t,r,a):"addEventListener"in t?i==="mousewheel"?t.addEventListener("onwheel"in t?"wheel":"mousewheel",r,!1):i==="mouseenter"||i==="mouseleave"?(r=function(d){d=d||u.event,e.DomEvent._isExternalTarget(t,d)&&l(d)},t.addEventListener(i==="mouseenter"?"mouseover":"mouseout",r,!1)):(i==="click"&&e.Browser.android&&(r=function(d){return e.DomEvent._filterClick(d,l)}),t.addEventListener(i,r,!1)):"attachEvent"in t&&t.attachEvent("on"+i,r),t[f]=t[f]||{},t[f][a]=r,this},_off:function(t,i,o,n){var a=i+e.stamp(o)+(n?"_"+e.stamp(n):""),r=t[f]&&t[f][a];return r?(e.Browser.pointer&&i.indexOf("touch")===0?this.removePointerListener(t,i,a):e.Browser.touch&&i==="dblclick"&&this.removeDoubleTapListener?this.removeDoubleTapListener(t,a):"removeEventListener"in t?i==="mousewheel"?t.removeEventListener("onwheel"in t?"wheel":"mousewheel",r,!1):t.removeEventListener(i==="mouseenter"?"mouseover":i==="mouseleave"?"mouseout":i,r,!1):"detachEvent"in t&&t.detachEvent("on"+i,r),t[f][a]=null,this):this},stopPropagation:function(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,e.DomEvent._skipped(t),this},disableScrollPropagation:function(t){return e.DomEvent.on(t,"mousewheel",e.DomEvent.stopPropagation)},disableClickPropagation:function(t){var i=e.DomEvent.stopPropagation;return e.DomEvent.on(t,e.Draggable.START.join(" "),i),e.DomEvent.on(t,{click:e.DomEvent._fakeStop,dblclick:i})},preventDefault:function(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this},stop:function(t){return e.DomEvent.preventDefault(t).stopPropagation(t)},getMousePosition:function(t,i){if(!i)return new e.Point(t.clientX,t.clientY);var o=i.getBoundingClientRect();return new e.Point(t.clientX-o.left-i.clientLeft,t.clientY-o.top-i.clientTop)},_wheelPxFactor:e.Browser.win&&e.Browser.chrome?2:e.Browser.gecko?u.devicePixelRatio:1,getWheelDelta:function(t){return e.Browser.edge?t.wheelDeltaY/2:t.deltaY&&t.deltaMode===0?-t.deltaY/e.DomEvent._wheelPxFactor:t.deltaY&&t.deltaMode===1?20*-t.deltaY:t.deltaY&&t.deltaMode===2?60*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?20*-t.detail:t.detail?t.detail/-32765*60:0},_skipEvents:{},_fakeStop:function(t){e.DomEvent._skipEvents[t.type]=!0},_skipped:function(t){var i=this._skipEvents[t.type];return this._skipEvents[t.type]=!1,i},_isExternalTarget:function(t,i){var o=i.relatedTarget;if(!o)return!0;try{for(;o&&o!==t;)o=o.parentNode}catch{return!1}return o!==t},_filterClick:function(t,i){var o=t.timeStamp||t.originalEvent&&t.originalEvent.timeStamp,n=e.DomEvent._lastClick&&o-e.DomEvent._lastClick;return n&&n>100&&n<500||t.target._simulatedClick&&!t._simulated?void e.DomEvent.stop(t):(e.DomEvent._lastClick=o,void i(t))}},e.DomEvent.addListener=e.DomEvent.on,e.DomEvent.removeListener=e.DomEvent.off,e.Draggable=e.Evented.extend({options:{clickTolerance:3},statics:{START:e.Browser.touch?["touchstart","mousedown"]:["mousedown"],END:{mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},MOVE:{mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"}},initialize:function(t,i,o){this._element=t,this._dragStartTarget=i||t,this._preventOutline=o},enable:function(){this._enabled||(e.DomEvent.on(this._dragStartTarget,e.Draggable.START.join(" "),this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(e.DomEvent.off(this._dragStartTarget,e.Draggable.START.join(" "),this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(!t._simulated&&this._enabled&&(this._moved=!1,!e.DomUtil.hasClass(this._element,"leaflet-zoom-anim")&&!(e.Draggable._dragging||t.shiftKey||t.which!==1&&t.button!==1&&!t.touches)&&this._enabled&&(e.Draggable._dragging=!0,this._preventOutline&&e.DomUtil.preventOutline(this._element),e.DomUtil.disableImageDrag(),e.DomUtil.disableTextSelection(),!this._moving))){this.fire("down");var i=t.touches?t.touches[0]:t;this._startPoint=new e.Point(i.clientX,i.clientY),e.DomEvent.on(p,e.Draggable.MOVE[t.type],this._onMove,this).on(p,e.Draggable.END[t.type],this._onUp,this)}},_onMove:function(t){if(!t._simulated&&this._enabled){if(t.touches&&t.touches.length>1)return void(this._moved=!0);var i=t.touches&&t.touches.length===1?t.touches[0]:t,o=new e.Point(i.clientX,i.clientY),n=o.subtract(this._startPoint);(n.x||n.y)&&(Math.abs(n.x)+Math.abs(n.y)<this.options.clickTolerance||(e.DomEvent.preventDefault(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=e.DomUtil.getPosition(this._element).subtract(n),e.DomUtil.addClass(p.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,u.SVGElementInstance&&this._lastTarget instanceof SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),e.DomUtil.addClass(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(n),this._moving=!0,e.Util.cancelAnimFrame(this._animRequest),this._lastEvent=t,this._animRequest=e.Util.requestAnimFrame(this._updatePosition,this,!0)))}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),e.DomUtil.setPosition(this._element,this._newPos),this.fire("drag",t)},_onUp:function(t){if(!t._simulated&&this._enabled){e.DomUtil.removeClass(p.body,"leaflet-dragging"),this._lastTarget&&(e.DomUtil.removeClass(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null);for(var i in e.Draggable.MOVE)e.DomEvent.off(p,e.Draggable.MOVE[i],this._onMove,this).off(p,e.Draggable.END[i],this._onUp,this);e.DomUtil.enableImageDrag(),e.DomUtil.enableTextSelection(),this._moved&&this._moving&&(e.Util.cancelAnimFrame(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,e.Draggable._dragging=!1}}}),e.Handler=e.Class.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}}),e.Map.mergeOptions({dragging:!0,inertia:!e.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0}),e.Map.Drag=e.Handler.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new e.Draggable(t._mapPane,t._container),this._draggable.on({down:this._onDown,dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}e.DomUtil.addClass(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){e.DomUtil.removeClass(this._map._container,"leaflet-grab"),e.DomUtil.removeClass(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDown:function(){this._map._stop()},_onDragStart:function(){var t=this._map;if(this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var i=e.latLngBounds(this._map.options.maxBounds);this._offsetLimit=e.bounds(this._map.latLngToContainerPoint(i.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(i.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var i=this._lastTime=+new Date,o=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(o),this._times.push(i),i-this._times[0]>50&&(this._positions.shift(),this._times.shift())}this._map.fire("move",t).fire("drag",t)},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),i=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=i.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,i){return t-(t-i)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var t=this._draggable._newPos.subtract(this._draggable._startPos),i=this._offsetLimit;t.x<i.min.x&&(t.x=this._viscousLimit(t.x,i.min.x)),t.y<i.min.y&&(t.y=this._viscousLimit(t.y,i.min.y)),t.x>i.max.x&&(t.x=this._viscousLimit(t.x,i.max.x)),t.y>i.max.y&&(t.y=this._viscousLimit(t.y,i.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,i=Math.round(t/2),o=this._initialWorldOffset,n=this._draggable._newPos.x,a=(n-i+o)%t+i-o,r=(n+i+o)%t-i-o,l=Math.abs(a+o)<Math.abs(r+o)?a:r;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=l},_onDragEnd:function(t){var i=this._map,o=i.options,n=!o.inertia||this._times.length<2;if(i.fire("dragend",t),n)i.fire("moveend");else{var a=this._lastPos.subtract(this._positions[0]),r=(this._lastTime-this._times[0])/1e3,l=o.easeLinearity,d=a.multiplyBy(l/r),_=d.distanceTo([0,0]),g=Math.min(o.inertiaMaxSpeed,_),y=d.multiplyBy(g/_),b=g/(o.inertiaDeceleration*l),P=y.multiplyBy(-b/2).round();P.x||P.y?(P=i._limitOffset(P,i.options.maxBounds),e.Util.requestAnimFrame(function(){i.panBy(P,{duration:b,easeLinearity:l,noMoveStart:!0,animate:!0})})):i.fire("moveend")}}}),e.Map.addInitHook("addHandler","dragging",e.Map.Drag),e.Map.mergeOptions({doubleClickZoom:!0}),e.Map.DoubleClickZoom=e.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var i=this._map,o=i.getZoom(),n=i.options.zoomDelta,a=t.originalEvent.shiftKey?o-n:o+n;i.options.doubleClickZoom==="center"?i.setZoom(a):i.setZoomAround(t.containerPoint,a)}}),e.Map.addInitHook("addHandler","doubleClickZoom",e.Map.DoubleClickZoom),e.Map.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60}),e.Map.ScrollWheelZoom=e.Handler.extend({addHooks:function(){e.DomEvent.on(this._map._container,"mousewheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){e.DomEvent.off(this._map._container,"mousewheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var i=e.DomEvent.getWheelDelta(t),o=this._map.options.wheelDebounceTime;this._delta+=i,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var n=Math.max(o-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(e.bind(this._performZoom,this),n),e.DomEvent.stop(t)},_performZoom:function(){var t=this._map,i=t.getZoom(),o=this._map.options.zoomSnap||0;t._stop();var n=this._delta/(4*this._map.options.wheelPxPerZoomLevel),a=4*Math.log(2/(1+Math.exp(-Math.abs(n))))/Math.LN2,r=o?Math.ceil(a/o)*o:a,l=t._limitZoom(i+(this._delta>0?r:-r))-i;this._delta=0,this._startTime=null,l&&(t.options.scrollWheelZoom==="center"?t.setZoom(i+l):t.setZoomAround(this._lastMousePos,i+l))}}),e.Map.addInitHook("addHandler","scrollWheelZoom",e.Map.ScrollWheelZoom),e.extend(e.DomEvent,{_touchstart:e.Browser.msPointer?"MSPointerDown":e.Browser.pointer?"pointerdown":"touchstart",_touchend:e.Browser.msPointer?"MSPointerUp":e.Browser.pointer?"pointerup":"touchend",addDoubleTapListener:function(t,i,o){function n(P){var x;if(x=e.Browser.pointer?e.DomEvent._pointersCount:P.touches.length,!(x>1)){var D=Date.now(),T=D-(r||D);l=P.touches?P.touches[0]:P,d=T>0&&T<=_,r=D}}function a(){if(d&&!l.cancelBubble){if(e.Browser.pointer){var P,x,D={};for(x in l)P=l[x],D[x]=P&&P.bind?P.bind(l):P;l=D}l.type="dblclick",i(l),r=null}}var r,l,d=!1,_=250,g="_leaflet_",y=this._touchstart,b=this._touchend;return t[g+y+o]=n,t[g+b+o]=a,t[g+"dblclick"+o]=i,t.addEventListener(y,n,!1),t.addEventListener(b,a,!1),e.Browser.edge||t.addEventListener("dblclick",i,!1),this},removeDoubleTapListener:function(t,i){var o="_leaflet_",n=t[o+this._touchstart+i],a=t[o+this._touchend+i],r=t[o+"dblclick"+i];return t.removeEventListener(this._touchstart,n,!1),t.removeEventListener(this._touchend,a,!1),e.Browser.edge||t.removeEventListener("dblclick",r,!1),this}}),e.extend(e.DomEvent,{POINTER_DOWN:e.Browser.msPointer?"MSPointerDown":"pointerdown",POINTER_MOVE:e.Browser.msPointer?"MSPointerMove":"pointermove",POINTER_UP:e.Browser.msPointer?"MSPointerUp":"pointerup",POINTER_CANCEL:e.Browser.msPointer?"MSPointerCancel":"pointercancel",TAG_WHITE_LIST:["INPUT","SELECT","OPTION"],_pointers:{},_pointersCount:0,addPointerListener:function(t,i,o,n){return i==="touchstart"?this._addPointerStart(t,o,n):i==="touchmove"?this._addPointerMove(t,o,n):i==="touchend"&&this._addPointerEnd(t,o,n),this},removePointerListener:function(t,i,o){var n=t["_leaflet_"+i+o];return i==="touchstart"?t.removeEventListener(this.POINTER_DOWN,n,!1):i==="touchmove"?t.removeEventListener(this.POINTER_MOVE,n,!1):i==="touchend"&&(t.removeEventListener(this.POINTER_UP,n,!1),t.removeEventListener(this.POINTER_CANCEL,n,!1)),this},_addPointerStart:function(t,i,o){var n=e.bind(function(r){if(r.pointerType!=="mouse"&&r.pointerType!==r.MSPOINTER_TYPE_MOUSE){if(!(this.TAG_WHITE_LIST.indexOf(r.target.tagName)<0))return;e.DomEvent.preventDefault(r)}this._handlePointer(r,i)},this);if(t["_leaflet_touchstart"+o]=n,t.addEventListener(this.POINTER_DOWN,n,!1),!this._pointerDocListener){var a=e.bind(this._globalPointerUp,this);p.documentElement.addEventListener(this.POINTER_DOWN,e.bind(this._globalPointerDown,this),!0),p.documentElement.addEventListener(this.POINTER_MOVE,e.bind(this._globalPointerMove,this),!0),p.documentElement.addEventListener(this.POINTER_UP,a,!0),p.documentElement.addEventListener(this.POINTER_CANCEL,a,!0),this._pointerDocListener=!0}},_globalPointerDown:function(t){this._pointers[t.pointerId]=t,this._pointersCount++},_globalPointerMove:function(t){this._pointers[t.pointerId]&&(this._pointers[t.pointerId]=t)},_globalPointerUp:function(t){delete this._pointers[t.pointerId],this._pointersCount--},_handlePointer:function(t,i){t.touches=[];for(var o in this._pointers)t.touches.push(this._pointers[o]);t.changedTouches=[t],i(t)},_addPointerMove:function(t,i,o){var n=e.bind(function(a){(a.pointerType!==a.MSPOINTER_TYPE_MOUSE&&a.pointerType!=="mouse"||a.buttons!==0)&&this._handlePointer(a,i)},this);t["_leaflet_touchmove"+o]=n,t.addEventListener(this.POINTER_MOVE,n,!1)},_addPointerEnd:function(t,i,o){var n=e.bind(function(a){this._handlePointer(a,i)},this);t["_leaflet_touchend"+o]=n,t.addEventListener(this.POINTER_UP,n,!1),t.addEventListener(this.POINTER_CANCEL,n,!1)}}),e.Map.mergeOptions({touchZoom:e.Browser.touch&&!e.Browser.android23,bounceAtZoomLimits:!0}),e.Map.TouchZoom=e.Handler.extend({addHooks:function(){e.DomUtil.addClass(this._map._container,"leaflet-touch-zoom"),e.DomEvent.on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){e.DomUtil.removeClass(this._map._container,"leaflet-touch-zoom"),e.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var i=this._map;if(t.touches&&t.touches.length===2&&!i._animatingZoom&&!this._zooming){var o=i.mouseEventToContainerPoint(t.touches[0]),n=i.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=i.getSize()._divideBy(2),this._startLatLng=i.containerPointToLatLng(this._centerPoint),i.options.touchZoom!=="center"&&(this._pinchStartLatLng=i.containerPointToLatLng(o.add(n)._divideBy(2))),this._startDist=o.distanceTo(n),this._startZoom=i.getZoom(),this._moved=!1,this._zooming=!0,i._stop(),e.DomEvent.on(p,"touchmove",this._onTouchMove,this).on(p,"touchend",this._onTouchEnd,this),e.DomEvent.preventDefault(t)}},_onTouchMove:function(t){if(t.touches&&t.touches.length===2&&this._zooming){var i=this._map,o=i.mouseEventToContainerPoint(t.touches[0]),n=i.mouseEventToContainerPoint(t.touches[1]),a=o.distanceTo(n)/this._startDist;if(this._zoom=i.getScaleZoom(a,this._startZoom),!i.options.bounceAtZoomLimits&&(this._zoom<i.getMinZoom()&&a<1||this._zoom>i.getMaxZoom()&&a>1)&&(this._zoom=i._limitZoom(this._zoom)),i.options.touchZoom==="center"){if(this._center=this._startLatLng,a===1)return}else{var r=o._add(n)._divideBy(2)._subtract(this._centerPoint);if(a===1&&r.x===0&&r.y===0)return;this._center=i.unproject(i.project(this._pinchStartLatLng,this._zoom).subtract(r),this._zoom)}this._moved||(i._moveStart(!0),this._moved=!0),e.Util.cancelAnimFrame(this._animRequest);var l=e.bind(i._move,i,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=e.Util.requestAnimFrame(l,this,!0),e.DomEvent.preventDefault(t)}},_onTouchEnd:function(){return this._moved&&this._zooming?(this._zooming=!1,e.Util.cancelAnimFrame(this._animRequest),e.DomEvent.off(p,"touchmove",this._onTouchMove).off(p,"touchend",this._onTouchEnd),void(this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom)))):void(this._zooming=!1)}}),e.Map.addInitHook("addHandler","touchZoom",e.Map.TouchZoom),e.Map.mergeOptions({tap:!0,tapTolerance:15}),e.Map.Tap=e.Handler.extend({addHooks:function(){e.DomEvent.on(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){e.DomEvent.off(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(e.DomEvent.preventDefault(t),this._fireClick=!0,t.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var i=t.touches[0],o=i.target;this._startPos=this._newPos=new e.Point(i.clientX,i.clientY),o.tagName&&o.tagName.toLowerCase()==="a"&&e.DomUtil.addClass(o,"leaflet-active"),this._holdTimeout=setTimeout(e.bind(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",i))},this),1e3),this._simulateEvent("mousedown",i),e.DomEvent.on(p,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(t){if(clearTimeout(this._holdTimeout),e.DomEvent.off(p,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&t&&t.changedTouches){var i=t.changedTouches[0],o=i.target;o&&o.tagName&&o.tagName.toLowerCase()==="a"&&e.DomUtil.removeClass(o,"leaflet-active"),this._simulateEvent("mouseup",i),this._isTapValid()&&this._simulateEvent("click",i)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var i=t.touches[0];this._newPos=new e.Point(i.clientX,i.clientY),this._simulateEvent("mousemove",i)},_simulateEvent:function(t,i){var o=p.createEvent("MouseEvents");o._simulated=!0,i.target._simulatedClick=!0,o.initMouseEvent(t,!0,!0,u,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),i.target.dispatchEvent(o)}}),e.Browser.touch&&!e.Browser.pointer&&e.Map.addInitHook("addHandler","tap",e.Map.Tap),e.Map.mergeOptions({boxZoom:!0}),e.Map.BoxZoom=e.Handler.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane},addHooks:function(){e.DomEvent.on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){e.DomEvent.off(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_resetState:function(){this._moved=!1},_onMouseDown:function(t){return!(!t.shiftKey||t.which!==1&&t.button!==1)&&(this._resetState(),e.DomUtil.disableTextSelection(),e.DomUtil.disableImageDrag(),this._startPoint=this._map.mouseEventToContainerPoint(t),void e.DomEvent.on(p,{contextmenu:e.DomEvent.stop,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this))},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=e.DomUtil.create("div","leaflet-zoom-box",this._container),e.DomUtil.addClass(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var i=new e.Bounds(this._point,this._startPoint),o=i.getSize();e.DomUtil.setPosition(this._box,i.min),this._box.style.width=o.x+"px",this._box.style.height=o.y+"px"},_finish:function(){this._moved&&(e.DomUtil.remove(this._box),e.DomUtil.removeClass(this._container,"leaflet-crosshair")),e.DomUtil.enableTextSelection(),e.DomUtil.enableImageDrag(),e.DomEvent.off(p,{contextmenu:e.DomEvent.stop,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if((t.which===1||t.button===1)&&(this._finish(),this._moved)){setTimeout(e.bind(this._resetState,this),0);var i=new e.LatLngBounds(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(i).fire("boxzoomend",{boxZoomBounds:i})}},_onKeyDown:function(t){t.keyCode===27&&this._finish()}}),e.Map.addInitHook("addHandler","boxZoom",e.Map.BoxZoom),e.Map.mergeOptions({keyboard:!0,keyboardPanDelta:80}),e.Map.Keyboard=e.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),e.DomEvent.on(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),e.DomEvent.off(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=p.body,i=p.documentElement,o=t.scrollTop||i.scrollTop,n=t.scrollLeft||i.scrollLeft;this._map._container.focus(),u.scrollTo(n,o)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var i,o,n=this._panKeys={},a=this.keyCodes;for(i=0,o=a.left.length;i<o;i++)n[a.left[i]]=[-1*t,0];for(i=0,o=a.right.length;i<o;i++)n[a.right[i]]=[t,0];for(i=0,o=a.down.length;i<o;i++)n[a.down[i]]=[0,t];for(i=0,o=a.up.length;i<o;i++)n[a.up[i]]=[0,-1*t]},_setZoomDelta:function(t){var i,o,n=this._zoomKeys={},a=this.keyCodes;for(i=0,o=a.zoomIn.length;i<o;i++)n[a.zoomIn[i]]=t;for(i=0,o=a.zoomOut.length;i<o;i++)n[a.zoomOut[i]]=-t},_addHooks:function(){e.DomEvent.on(p,"keydown",this._onKeyDown,this)},_removeHooks:function(){e.DomEvent.off(p,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var i,o=t.keyCode,n=this._map;if(o in this._panKeys){if(n._panAnim&&n._panAnim._inProgress)return;i=this._panKeys[o],t.shiftKey&&(i=e.point(i).multiplyBy(3)),n.panBy(i),n.options.maxBounds&&n.panInsideBounds(n.options.maxBounds)}else if(o in this._zoomKeys)n.setZoom(n.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[o]);else{if(o!==27)return;n.closePopup()}e.DomEvent.stop(t)}}}),e.Map.addInitHook("addHandler","keyboard",e.Map.Keyboard),e.Handler.MarkerDrag=e.Handler.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new e.Draggable(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),e.DomUtil.addClass(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&e.DomUtil.removeClass(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(t){var i=this._marker,o=i._shadow,n=e.DomUtil.getPosition(i._icon),a=i._map.layerPointToLatLng(n);o&&e.DomUtil.setPosition(o,n),i._latlng=a,t.latlng=a,t.oldLatLng=this._oldLatLng,i.fire("move",t).fire("drag",t)},_onDragEnd:function(t){delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),e.Control=e.Class.extend({options:{position:"topright"},initialize:function(t){e.setOptions(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var i=this._map;return i&&i.removeControl(this),this.options.position=t,i&&i.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var i=this._container=this.onAdd(t),o=this.getPosition(),n=t._controlCorners[o];return e.DomUtil.addClass(i,"leaflet-control"),o.indexOf("bottom")!==-1?n.insertBefore(i,n.firstChild):n.appendChild(i),this},remove:function(){return this._map?(e.DomUtil.remove(this._container),this.onRemove&&this.onRemove(this._map),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),e.control=function(t){return new e.Control(t)},e.Map.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){function t(a,r){var l=o+a+" "+o+r;i[a+r]=e.DomUtil.create("div",l,n)}var i=this._controlCorners={},o="leaflet-",n=this._controlContainer=e.DomUtil.create("div",o+"control-container",this._container);t("top","left"),t("top","right"),t("bottom","left"),t("bottom","right")},_clearControlPos:function(){e.DomUtil.remove(this._controlContainer)}}),e.Control.Zoom=e.Control.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"-",zoomOutTitle:"Zoom out"},onAdd:function(t){var i="leaflet-control-zoom",o=e.DomUtil.create("div",i+" leaflet-bar"),n=this.options;return this._zoomInButton=this._createButton(n.zoomInText,n.zoomInTitle,i+"-in",o,this._zoomIn),this._zoomOutButton=this._createButton(n.zoomOutText,n.zoomOutTitle,i+"-out",o,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),o},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,i,o,n,a){var r=e.DomUtil.create("a",o,n);return r.innerHTML=t,r.href="#",r.title=i,e.DomEvent.on(r,"mousedown dblclick",e.DomEvent.stopPropagation).on(r,"click",e.DomEvent.stop).on(r,"click",a,this).on(r,"click",this._refocusOnMap,this),r},_updateDisabled:function(){var t=this._map,i="leaflet-disabled";e.DomUtil.removeClass(this._zoomInButton,i),e.DomUtil.removeClass(this._zoomOutButton,i),(this._disabled||t._zoom===t.getMinZoom())&&e.DomUtil.addClass(this._zoomOutButton,i),(this._disabled||t._zoom===t.getMaxZoom())&&e.DomUtil.addClass(this._zoomInButton,i)}}),e.Map.mergeOptions({zoomControl:!0}),e.Map.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new e.Control.Zoom,this.addControl(this.zoomControl))}),e.control.zoom=function(t){return new e.Control.Zoom(t)},e.Control.Attribution=e.Control.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){e.setOptions(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=e.DomUtil.create("div","leaflet-control-attribution"),e.DomEvent&&e.DomEvent.disableClickPropagation(this._container);for(var i in t._layers)t._layers[i].getAttribution&&this.addAttribution(t._layers[i].getAttribution());return this._update(),this._container},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var i in this._attributions)this._attributions[i]&&t.push(i);var o=[];this.options.prefix&&o.push(this.options.prefix),t.length&&o.push(t.join(", ")),this._container.innerHTML=o.join(" | ")}}}),e.Map.mergeOptions({attributionControl:!0}),e.Map.addInitHook(function(){this.options.attributionControl&&new e.Control.Attribution().addTo(this)}),e.control.attribution=function(t){return new e.Control.Attribution(t)},e.Control.Scale=e.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var i="leaflet-control-scale",o=e.DomUtil.create("div",i),n=this.options;return this._addScales(n,i+"-line",o),t.on(n.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),o},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,i,o){t.metric&&(this._mScale=e.DomUtil.create("div",i,o)),t.imperial&&(this._iScale=e.DomUtil.create("div",i,o))},_update:function(){var t=this._map,i=t.getSize().y/2,o=t.distance(t.containerPointToLatLng([0,i]),t.containerPointToLatLng([this.options.maxWidth,i]));this._updateScales(o)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var i=this._getRoundNum(t),o=i<1e3?i+" m":i/1e3+" km";this._updateScale(this._mScale,o,i/t)},_updateImperial:function(t){var i,o,n,a=3.2808399*t;a>5280?(i=a/5280,o=this._getRoundNum(i),this._updateScale(this._iScale,o+" mi",o/i)):(n=this._getRoundNum(a),this._updateScale(this._iScale,n+" ft",n/a))},_updateScale:function(t,i,o){t.style.width=Math.round(this.options.maxWidth*o)+"px",t.innerHTML=i},_getRoundNum:function(t){var i=Math.pow(10,(Math.floor(t)+"").length-1),o=t/i;return o=o>=10?10:o>=5?5:o>=3?3:o>=2?2:1,i*o}}),e.control.scale=function(t){return new e.Control.Scale(t)},e.Control.Layers=e.Control.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1},initialize:function(t,i,o){e.setOptions(this,o),this._layers=[],this._lastZIndex=0,this._handlingClick=!1;for(var n in t)this._addLayer(t[n],n);for(n in i)this._addLayer(i[n],n,!0)},onAdd:function(t){return this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this),this._container},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,i){return this._addLayer(t,i),this._map?this._update():this},addOverlay:function(t,i){return this._addLayer(t,i,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var i=this._getLayer(e.stamp(t));return i&&this._layers.splice(this._layers.indexOf(i),1),this._map?this._update():this},expand:function(){e.DomUtil.addClass(this._container,"leaflet-control-layers-expanded"),this._form.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._form.clientHeight?(e.DomUtil.addClass(this._form,"leaflet-control-layers-scrollbar"),this._form.style.height=t+"px"):e.DomUtil.removeClass(this._form,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return e.DomUtil.removeClass(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",i=this._container=e.DomUtil.create("div",t);i.setAttribute("aria-haspopup",!0),e.DomEvent.disableClickPropagation(i),e.Browser.touch||e.DomEvent.disableScrollPropagation(i);var o=this._form=e.DomUtil.create("form",t+"-list");if(this.options.collapsed){e.Browser.android||e.DomEvent.on(i,{mouseenter:this.expand,mouseleave:this.collapse},this);var n=this._layersLink=e.DomUtil.create("a",t+"-toggle",i);n.href="#",n.title="Layers",e.Browser.touch?e.DomEvent.on(n,"click",e.DomEvent.stop).on(n,"click",this.expand,this):e.DomEvent.on(n,"focus",this.expand,this),e.DomEvent.on(o,"click",function(){setTimeout(e.bind(this._onInputClick,this),0)},this),this._map.on("click",this.collapse,this)}else this.expand();this._baseLayersList=e.DomUtil.create("div",t+"-base",o),this._separator=e.DomUtil.create("div",t+"-separator",o),this._overlaysList=e.DomUtil.create("div",t+"-overlays",o),i.appendChild(o)},_getLayer:function(t){for(var i=0;i<this._layers.length;i++)if(this._layers[i]&&e.stamp(this._layers[i].layer)===t)return this._layers[i]},_addLayer:function(t,i,o){t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:i,overlay:o}),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex))},_update:function(){if(!this._container)return this;e.DomUtil.empty(this._baseLayersList),e.DomUtil.empty(this._overlaysList);var t,i,o,n,a=0;for(o=0;o<this._layers.length;o++)n=this._layers[o],this._addItem(n),i=i||n.overlay,t=t||!n.overlay,a+=n.overlay?0:1;return this.options.hideSingleBase&&(t=t&&a>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=i&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var i=this._getLayer(e.stamp(t.target)),o=i.overlay?t.type==="add"?"overlayadd":"overlayremove":t.type==="add"?"baselayerchange":null;o&&this._map.fire(o,i)},_createRadioElement:function(t,i){var o='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(i?' checked="checked"':"")+"/>",n=p.createElement("div");return n.innerHTML=o,n.firstChild},_addItem:function(t){var i,o=p.createElement("label"),n=this._map.hasLayer(t.layer);t.overlay?(i=p.createElement("input"),i.type="checkbox",i.className="leaflet-control-layers-selector",i.defaultChecked=n):i=this._createRadioElement("leaflet-base-layers",n),i.layerId=e.stamp(t.layer),e.DomEvent.on(i,"click",this._onInputClick,this);var a=p.createElement("span");a.innerHTML=" "+t.name;var r=p.createElement("div");o.appendChild(r),r.appendChild(i),r.appendChild(a);var l=t.overlay?this._overlaysList:this._baseLayersList;return l.appendChild(o),this._checkDisabledLayers(),o},_onInputClick:function(){var t,i,o,n=this._form.getElementsByTagName("input"),a=[],r=[];this._handlingClick=!0;for(var l=n.length-1;l>=0;l--)t=n[l],i=this._getLayer(t.layerId).layer,o=this._map.hasLayer(i),t.checked&&!o?a.push(i):!t.checked&&o&&r.push(i);for(l=0;l<r.length;l++)this._map.removeLayer(r[l]);for(l=0;l<a.length;l++)this._map.addLayer(a[l]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var t,i,o=this._form.getElementsByTagName("input"),n=this._map.getZoom(),a=o.length-1;a>=0;a--)t=o[a],i=this._getLayer(t.layerId).layer,t.disabled=i.options.minZoom!==m&&n<i.options.minZoom||i.options.maxZoom!==m&&n>i.options.maxZoom},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),e.control.layers=function(t,i,o){return new e.Control.Layers(t,i,o)},e.PosAnimation=e.Evented.extend({run:function(t,i,o,n){this.stop(),this._el=t,this._inProgress=!0,this._duration=o||.25,this._easeOutPower=1/Math.max(n||.5,.2),this._startPos=e.DomUtil.getPosition(t),this._offset=i.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=e.Util.requestAnimFrame(this._animate,this),this._step()},_step:function(t){var i=+new Date-this._startTime,o=1e3*this._duration;i<o?this._runFrame(this._easeOut(i/o),t):(this._runFrame(1),this._complete())},_runFrame:function(t,i){var o=this._startPos.add(this._offset.multiplyBy(t));i&&o._round(),e.DomUtil.setPosition(this._el,o),this.fire("step")},_complete:function(){e.Util.cancelAnimFrame(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),e.Map.include({setView:function(t,i,o){if(i=i===m?this._zoom:this._limitZoom(i),t=this._limitCenter(e.latLng(t),i,this.options.maxBounds),o=o||{},this._stop(),this._loaded&&!o.reset&&o!==!0){o.animate!==m&&(o.zoom=e.extend({animate:o.animate},o.zoom),o.pan=e.extend({animate:o.animate,duration:o.duration},o.pan));var n=this._zoom!==i?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,i,o.zoom):this._tryAnimatedPan(t,o.pan);if(n)return clearTimeout(this._sizeTimer),this}return this._resetView(t,i),this},panBy:function(t,i){if(t=e.point(t).round(),i=i||{},!t.x&&!t.y)return this.fire("moveend");if(i.animate!==!0&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new e.PosAnimation,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),i.noMoveStart||this.fire("movestart"),i.animate!==!1){e.DomUtil.addClass(this._mapPane,"leaflet-pan-anim");var o=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,o,i.duration||.25,i.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){e.DomUtil.removeClass(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,i){var o=this._getCenterOffset(t)._floor();return!((i&&i.animate)!==!0&&!this.getSize().contains(o))&&(this.panBy(o,i),!0)}}),e.Map.mergeOptions({zoomAnimation:!0,zoomAnimationThreshold:4});var v=e.DomUtil.TRANSITION&&e.Browser.any3d&&!e.Browser.mobileOpera;v&&e.Map.addInitHook(function(){this._zoomAnimated=this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),e.DomEvent.on(this._proxy,e.DomUtil.TRANSITION_END,this._catchTransitionEnd,this))}),e.Map.include(v?{_createAnimProxy:function(){var t=this._proxy=e.DomUtil.create("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(i){var o=e.DomUtil.TRANSFORM,n=t.style[o];e.DomUtil.setTransform(t,this.project(i.center,i.zoom),this.getZoomScale(i.zoom,1)),n===t.style[o]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",function(){var i=this.getCenter(),o=this.getZoom();e.DomUtil.setTransform(t,this.project(i,o),this.getZoomScale(o,1))},this)},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,i,o){if(this._animatingZoom)return!0;if(o=o||{},!this._zoomAnimated||o.animate===!1||this._nothingToAnimate()||Math.abs(i-this._zoom)>this.options.zoomAnimationThreshold)return!1;var n=this.getZoomScale(i),a=this._getCenterOffset(t)._divideBy(1-1/n);return!(o.animate!==!0&&!this.getSize().contains(a))&&(e.Util.requestAnimFrame(function(){this._moveStart(!0)._animateZoom(t,i,!0)},this),!0)},_animateZoom:function(t,i,o,n){o&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=i,e.DomUtil.addClass(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:i,noUpdate:n}),setTimeout(e.bind(this._onZoomTransitionEnd,this),250)},_onZoomTransitionEnd:function(){this._animatingZoom&&(e.DomUtil.removeClass(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),e.Util.requestAnimFrame(function(){this._moveEnd(!0)},this))}}:{}),e.Map.include({flyTo:function(t,i,o){function n(M){var F=M?-1:1,mt=M?B:T,ft=B*B-T*T+F*G*G*I*I,gt=2*mt*G*I,W=ft/gt,K=Math.sqrt(W*W+1)-W,vt=K<1e-9?-18:Math.log(K);return vt}function a(M){return(Math.exp(M)-Math.exp(-M))/2}function r(M){return(Math.exp(M)+Math.exp(-M))/2}function l(M){return a(M)/r(M)}function d(M){return T*(r(A)/r(A+N*M))}function _(M){return T*(r(A)*l(A+N*M)-a(A))/G}function g(M){return 1-Math.pow(1-M,1.5)}function y(){var M=(Date.now()-_t)/pt,F=g(M)*J;M<=1?(this._flyToFrame=e.Util.requestAnimFrame(y,this),this._move(this.unproject(b.add(P.subtract(b).multiplyBy(_(F)/I)),D),this.getScaleZoom(T/d(F),D),{flyTo:!0})):this._move(t,i)._moveEnd(!0)}if(o=o||{},o.animate===!1||!e.Browser.any3d)return this.setView(t,i,o);this._stop();var b=this.project(this.getCenter()),P=this.project(t),x=this.getSize(),D=this._zoom;t=e.latLng(t),i=i===m?D:i;var T=Math.max(x.x,x.y),B=T*this.getZoomScale(D,i),I=P.distanceTo(b)||1,N=1.42,G=N*N,A=n(0),_t=Date.now(),J=(n(1)-A)/N,pt=o.duration?1e3*o.duration:1e3*J*.8;return this._moveStart(!0),y.call(this),this},flyToBounds:function(t,i){var o=this._getBoundsCenterZoom(t,i);return this.flyTo(o.center,o.zoom,i)}}),e.Map.include({_defaultLocateOptions:{timeout:1e4,watch:!1},locate:function(t){if(t=this._locateOptions=e.extend({},this._defaultLocateOptions,t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var i=e.bind(this._handleGeolocationResponse,this),o=e.bind(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(i,o,t):navigator.geolocation.getCurrentPosition(i,o,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var i=t.code,o=t.message||(i===1?"permission denied":i===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:i,message:"Geolocation error: "+o+"."})},_handleGeolocationResponse:function(t){var i=t.coords.latitude,o=t.coords.longitude,n=new e.LatLng(i,o),a=n.toBounds(t.coords.accuracy),r=this._locateOptions;if(r.setView){var l=this.getBoundsZoom(a);this.setView(n,r.maxZoom?Math.min(l,r.maxZoom):l)}var d={latlng:n,bounds:a,timestamp:t.timestamp};for(var _ in t.coords)typeof t.coords[_]=="number"&&(d[_]=t.coords[_]);this.fire("locationfound",d)}})})(window,document);(function(u,p,m){L.drawVersion="0.4.0",L.drawLocal={draw:{toolbar:{actions:{title:"Cancel drawing",text:"Cancel"},finish:{title:"Finish drawing",text:"Finish"},undo:{title:"Delete last point drawn",text:"Delete last point"},buttons:{polyline:"Draw a polyline",polygon:"Draw a polygon",rectangle:"Draw a rectangle",circle:"Draw a circle",marker:"Draw a marker"}},handlers:{circle:{tooltip:{start:"Click and drag to draw circle."},radius:"Radius"},marker:{tooltip:{start:"Click map to place marker."}},polygon:{tooltip:{start:"Click to start drawing shape.",cont:"Click to continue drawing shape.",end:"Click first point to close this shape."}},polyline:{error:"<strong>Error:</strong> shape edges cannot cross!",tooltip:{start:"Click to start drawing line.",cont:"Click to continue drawing line.",end:"Click last point to finish line."}},rectangle:{tooltip:{start:"Click and drag to draw rectangle."}},simpleshape:{tooltip:{end:"Release mouse to finish drawing."}}}},edit:{toolbar:{actions:{save:{title:"Save changes.",text:"Save"},cancel:{title:"Cancel editing, discards all changes.",text:"Cancel"}},buttons:{edit:"Edit layers.",editDisabled:"No layers to edit.",remove:"Delete layers.",removeDisabled:"No layers to delete."}},handlers:{edit:{tooltip:{text:"Drag handles, or marker to edit feature.",subtext:"Click cancel to undo changes."}},remove:{tooltip:{text:"Click on a feature to remove"}}}}},L.Draw=L.Draw||{},L.Draw.Feature=L.Handler.extend({includes:L.Mixin.Events,initialize:function(s,e){this._map=s,this._container=s._container,this._overlayPane=s._panes.overlayPane,this._popupPane=s._panes.popupPane,e&&e.shapeOptions&&(e.shapeOptions=L.Util.extend({},this.options.shapeOptions,e.shapeOptions)),L.setOptions(this,e)},enable:function(){this._enabled||(L.Handler.prototype.enable.call(this),this.fire("enabled",{handler:this.type}),this._map.fire("draw:drawstart",{layerType:this.type}))},disable:function(){this._enabled&&(L.Handler.prototype.disable.call(this),this._map.fire("draw:drawstop",{layerType:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var s=this._map;s&&(L.DomUtil.disableTextSelection(),s.getContainer().focus(),this._tooltip=new L.Draw.Tooltip(this._map),L.DomEvent.on(this._container,"keyup",this._cancelDrawing,this))},removeHooks:function(){this._map&&(L.DomUtil.enableTextSelection(),this._tooltip.dispose(),this._tooltip=null,L.DomEvent.off(this._container,"keyup",this._cancelDrawing,this))},setOptions:function(s){L.setOptions(this,s)},_fireCreatedEvent:function(s){this._map.fire("draw:created",{layer:s,layerType:this.type})},_cancelDrawing:function(s){this._map.fire("draw:canceled",{layerType:this.type}),s.keyCode===27&&this.disable()}}),L.Draw.Polyline=L.Draw.Feature.extend({statics:{TYPE:"polyline"},Poly:L.Polyline,options:{allowIntersection:!0,repeatMode:!1,drawError:{color:"#b00b00",timeout:2500},icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),guidelineDistance:20,maxGuideLineLength:4e3,shapeOptions:{stroke:!0,color:"#f06eaa",weight:4,opacity:.5,fill:!1,clickable:!0},metric:!0,feet:!0,showLength:!0,zIndexOffset:2e3},initialize:function(s,e){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this.options.drawError.message=L.drawLocal.draw.handlers.polyline.error,e&&e.drawError&&(e.drawError=L.Util.extend({},this.options.drawError,e.drawError)),this.type=L.Draw.Polyline.TYPE,L.Draw.Feature.prototype.initialize.call(this,s,e)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._markers=[],this._markerGroup=new L.LayerGroup,this._map.addLayer(this._markerGroup),this._poly=new L.Polyline([],this.options.shapeOptions),this._tooltip.updateContent(this._getTooltipText()),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),L.Browser.touch||this._map.on("mouseup",this._onMouseUp,this),this._mouseMarker.on("mousedown",this._onMouseDown,this).on("mouseout",this._onMouseOut,this).on("mouseup",this._onMouseUp,this).on("mousemove",this._onMouseMove,this).addTo(this._map),this._map.on("mouseup",this._onMouseUp,this).on("mousemove",this._onMouseMove,this).on("zoomlevelschange",this._onZoomEnd,this).on("click",this._onTouch,this).on("zoomend",this._onZoomEnd,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._clearHideErrorTimeout(),this._cleanUpShape(),this._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers,this._map.removeLayer(this._poly),delete this._poly,this._mouseMarker.off("mousedown",this._onMouseDown,this).off("mouseout",this._onMouseOut,this).off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._clearGuides(),this._map.off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this).off("zoomlevelschange",this._onZoomEnd,this).off("zoomend",this._onZoomEnd,this).off("click",this._onTouch,this)},deleteLastVertex:function(){if(!(this._markers.length<=1)){var s=this._markers.pop(),e=this._poly,h=e.getLatLngs(),c=h.splice(-1,1)[0];this._poly.setLatLngs(h),this._markerGroup.removeLayer(s),e.getLatLngs().length<2&&this._map.removeLayer(e),this._vertexChanged(c,!1)}},addVertex:function(s){var e=this._markers.length;return e>0&&!this.options.allowIntersection&&this._poly.newLatLngIntersects(s)?void this._showErrorTooltip():(this._errorShown&&this._hideErrorTooltip(),this._markers.push(this._createMarker(s)),this._poly.addLatLng(s),this._poly.getLatLngs().length===2&&this._map.addLayer(this._poly),void this._vertexChanged(s,!0))},completeShape:function(){this._markers.length<=1||(this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable())},_finishShape:function(){var s=this._poly._defaultShape?this._poly._defaultShape():this._poly.getLatLngs(),e=this._poly.newLatLngIntersects(s[s.length-1]);return!this.options.allowIntersection&&e||!this._shapeIsValid()?void this._showErrorTooltip():(this._fireCreatedEvent(),this.disable(),void(this.options.repeatMode&&this.enable()))},_shapeIsValid:function(){return!0},_onZoomEnd:function(){this._markers!==null&&this._updateGuide()},_onMouseMove:function(s){var e=this._map.mouseEventToLayerPoint(s.originalEvent),h=this._map.layerPointToLatLng(e);this._currentLatLng=h,this._updateTooltip(h),this._updateGuide(e),this._mouseMarker.setLatLng(h),L.DomEvent.preventDefault(s.originalEvent)},_vertexChanged:function(s,e){this._map.fire("draw:drawvertex",{layers:this._markerGroup}),this._updateFinishHandler(),this._updateRunningMeasure(s,e),this._clearGuides(),this._updateTooltip()},_onMouseDown:function(s){var e=s.originalEvent;this._mouseDownOrigin=L.point(e.clientX,e.clientY)},_onMouseUp:function(s){if(this._mouseDownOrigin){var e=L.point(s.originalEvent.clientX,s.originalEvent.clientY).distanceTo(this._mouseDownOrigin);Math.abs(e)<9*(u.devicePixelRatio||1)&&this.addVertex(s.latlng)}this._mouseDownOrigin=null},_onTouch:function(s){L.Browser.touch&&(this._onMouseDown(s),this._onMouseUp(s))},_onMouseOut:function(){this._tooltip&&this._tooltip._onMouseOut.call(this._tooltip)},_updateFinishHandler:function(){var s=this._markers.length;s>1&&this._markers[s-1].on("click",this._finishShape,this),s>2&&this._markers[s-2].off("click",this._finishShape,this)},_createMarker:function(s){var e=new L.Marker(s,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset});return this._markerGroup.addLayer(e),e},_updateGuide:function(s){var e=this._markers?this._markers.length:0;e>0&&(s=s||this._map.latLngToLayerPoint(this._currentLatLng),this._clearGuides(),this._drawGuide(this._map.latLngToLayerPoint(this._markers[e-1].getLatLng()),s))},_updateTooltip:function(s){var e=this._getTooltipText();s&&this._tooltip.updatePosition(s),this._errorShown||this._tooltip.updateContent(e)},_drawGuide:function(s,e){var h,c,f,v=Math.floor(Math.sqrt(Math.pow(e.x-s.x,2)+Math.pow(e.y-s.y,2))),t=this.options.guidelineDistance,i=this.options.maxGuideLineLength,o=v>i?v-i:t;for(this._guidesContainer||(this._guidesContainer=L.DomUtil.create("div","leaflet-draw-guides",this._overlayPane));o<v;o+=this.options.guidelineDistance)h=o/v,c={x:Math.floor(s.x*(1-h)+h*e.x),y:Math.floor(s.y*(1-h)+h*e.y)},f=L.DomUtil.create("div","leaflet-draw-guide-dash",this._guidesContainer),f.style.backgroundColor=this._errorShown?this.options.drawError.color:this.options.shapeOptions.color,L.DomUtil.setPosition(f,c)},_updateGuideColor:function(s){if(this._guidesContainer)for(var e=0,h=this._guidesContainer.childNodes.length;e<h;e++)this._guidesContainer.childNodes[e].style.backgroundColor=s},_clearGuides:function(){if(this._guidesContainer)for(;this._guidesContainer.firstChild;)this._guidesContainer.removeChild(this._guidesContainer.firstChild)},_getTooltipText:function(){var s,e,h=this.options.showLength;return this._markers.length===0?s={text:L.drawLocal.draw.handlers.polyline.tooltip.start}:(e=h?this._getMeasurementString():"",s=this._markers.length===1?{text:L.drawLocal.draw.handlers.polyline.tooltip.cont,subtext:e}:{text:L.drawLocal.draw.handlers.polyline.tooltip.end,subtext:e}),s},_updateRunningMeasure:function(s,e){var h,c,f=this._markers.length;this._markers.length===1?this._measurementRunningTotal=0:(h=f-(e?2:1),c=s.distanceTo(this._markers[h].getLatLng()),this._measurementRunningTotal+=c*(e?1:-1))},_getMeasurementString:function(){var s,e=this._currentLatLng,h=this._markers[this._markers.length-1].getLatLng();return s=this._measurementRunningTotal+e.distanceTo(h),L.GeometryUtil.readableDistance(s,this.options.metric,this.options.feet)},_showErrorTooltip:function(){this._errorShown=!0,this._tooltip.showAsError().updateContent({text:this.options.drawError.message}),this._updateGuideColor(this.options.drawError.color),this._poly.setStyle({color:this.options.drawError.color}),this._clearHideErrorTimeout(),this._hideErrorTimeout=setTimeout(L.Util.bind(this._hideErrorTooltip,this),this.options.drawError.timeout)},_hideErrorTooltip:function(){this._errorShown=!1,this._clearHideErrorTimeout(),this._tooltip.removeError().updateContent(this._getTooltipText()),this._updateGuideColor(this.options.shapeOptions.color),this._poly.setStyle({color:this.options.shapeOptions.color})},_clearHideErrorTimeout:function(){this._hideErrorTimeout&&(clearTimeout(this._hideErrorTimeout),this._hideErrorTimeout=null)},_cleanUpShape:function(){this._markers.length>1&&this._markers[this._markers.length-1].off("click",this._finishShape,this)},_fireCreatedEvent:function(){var s=new this.Poly(this._poly.getLatLngs(),this.options.shapeOptions);L.Draw.Feature.prototype._fireCreatedEvent.call(this,s)}}),L.Draw.Polygon=L.Draw.Polyline.extend({statics:{TYPE:"polygon"},Poly:L.Polygon,options:{showArea:!1,shapeOptions:{stroke:!0,color:"#f06eaa",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},metric:!0},initialize:function(s,e){L.Draw.Polyline.prototype.initialize.call(this,s,e),this.type=L.Draw.Polygon.TYPE},_updateFinishHandler:function(){var s=this._markers.length;s===1&&this._markers[0].on("click",this._finishShape,this),s>2&&(this._markers[s-1].on("dblclick",this._finishShape,this),s>3&&this._markers[s-2].off("dblclick",this._finishShape,this))},_getTooltipText:function(){var s,e;return this._markers.length===0?s=L.drawLocal.draw.handlers.polygon.tooltip.start:this._markers.length<3?s=L.drawLocal.draw.handlers.polygon.tooltip.cont:(s=L.drawLocal.draw.handlers.polygon.tooltip.end,e=this._getMeasurementString()),{text:s,subtext:e}},_getMeasurementString:function(){var s=this._area;return s?L.GeometryUtil.readableArea(s,this.options.metric):null},_shapeIsValid:function(){return this._markers.length>=3},_vertexChanged:function(s,e){var h;!this.options.allowIntersection&&this.options.showArea&&(h=this._poly.getLatLngs(),this._area=L.GeometryUtil.geodesicArea(h)),L.Draw.Polyline.prototype._vertexChanged.call(this,s,e)},_cleanUpShape:function(){var s=this._markers.length;s>0&&(this._markers[0].off("click",this._finishShape,this),s>2&&this._markers[s-1].off("dblclick",this._finishShape,this))}}),L.SimpleShape={},L.Draw.SimpleShape=L.Draw.Feature.extend({options:{repeatMode:!1},initialize:function(s,e){this._endLabelText=L.drawLocal.draw.handlers.simpleshape.tooltip.end,L.Draw.Feature.prototype.initialize.call(this,s,e)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._mapDraggable=this._map.dragging.enabled(),this._mapDraggable&&this._map.dragging.disable(),this._container.style.cursor="crosshair",this._tooltip.updateContent({text:this._initialLabelText}),this._map.on("mousedown",this._onMouseDown,this).on("mousemove",this._onMouseMove,this).on("touchstart",this._onMouseDown,this).on("touchmove",this._onMouseMove,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._mapDraggable&&this._map.dragging.enable(),this._container.style.cursor="",this._map.off("mousedown",this._onMouseDown,this).off("mousemove",this._onMouseMove,this).off("touchstart",this._onMouseDown,this).off("touchmove",this._onMouseMove,this),L.DomEvent.off(p,"mouseup",this._onMouseUp,this),L.DomEvent.off(p,"touchend",this._onMouseUp,this),this._shape&&(this._map.removeLayer(this._shape),delete this._shape)),this._isDrawing=!1},_getTooltipText:function(){return{text:this._endLabelText}},_onMouseDown:function(s){this._isDrawing=!0,this._startLatLng=s.latlng,L.DomEvent.on(p,"mouseup",this._onMouseUp,this).on(p,"touchend",this._onMouseUp,this).preventDefault(s.originalEvent)},_onMouseMove:function(s){var e=s.latlng;this._tooltip.updatePosition(e),this._isDrawing&&(this._tooltip.updateContent(this._getTooltipText()),this._drawShape(e))},_onMouseUp:function(){this._shape&&this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()}}),L.Draw.Rectangle=L.Draw.SimpleShape.extend({statics:{TYPE:"rectangle"},options:{shapeOptions:{stroke:!0,color:"#f06eaa",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},metric:!0},initialize:function(s,e){this.type=L.Draw.Rectangle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.rectangle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,s,e)},_drawShape:function(s){this._shape?this._shape.setBounds(new L.LatLngBounds(this._startLatLng,s)):(this._shape=new L.Rectangle(new L.LatLngBounds(this._startLatLng,s),this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var s=new L.Rectangle(this._shape.getBounds(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,s)},_getTooltipText:function(){var s,e,h,c=L.Draw.SimpleShape.prototype._getTooltipText.call(this),f=this._shape;return f&&(s=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),e=L.GeometryUtil.geodesicArea(s),h=L.GeometryUtil.readableArea(e,this.options.metric)),{text:c.text,subtext:h}}}),L.Draw.Circle=L.Draw.SimpleShape.extend({statics:{TYPE:"circle"},options:{shapeOptions:{stroke:!0,color:"#f06eaa",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showRadius:!0,metric:!0,feet:!0},initialize:function(s,e){this.type=L.Draw.Circle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,s,e)},_drawShape:function(s){this._shape?this._shape.setRadius(this._startLatLng.distanceTo(s)):(this._shape=new L.Circle(this._startLatLng,this._startLatLng.distanceTo(s),this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var s=new L.Circle(this._startLatLng,this._shape.getRadius(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,s)},_onMouseMove:function(s){var e,h=s.latlng,c=this.options.showRadius,f=this.options.metric;this._tooltip.updatePosition(h),this._isDrawing&&(this._drawShape(h),e=this._shape.getRadius().toFixed(1),this._tooltip.updateContent({text:this._endLabelText,subtext:c?L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(e,f,this.options.feet):""}))}}),L.Draw.Marker=L.Draw.Feature.extend({statics:{TYPE:"marker"},options:{icon:new L.Icon.Default,repeatMode:!1,zIndexOffset:2e3},initialize:function(s,e){this.type=L.Draw.Marker.TYPE,L.Draw.Feature.prototype.initialize.call(this,s,e)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._tooltip.updateContent({text:L.drawLocal.draw.handlers.marker.tooltip.start}),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("click",this._onClick,this).addTo(this._map),this._map.on("mousemove",this._onMouseMove,this),this._map.on("click",this._onTouch,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._marker&&(this._marker.off("click",this._onClick,this),this._map.off("click",this._onClick,this).off("click",this._onTouch,this).removeLayer(this._marker),delete this._marker),this._mouseMarker.off("click",this._onClick,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._map.off("mousemove",this._onMouseMove,this))},_onMouseMove:function(s){var e=s.latlng;this._tooltip.updatePosition(e),this._mouseMarker.setLatLng(e),this._marker?(e=this._mouseMarker.getLatLng(),this._marker.setLatLng(e)):(this._marker=new L.Marker(e,{icon:this.options.icon,zIndexOffset:this.options.zIndexOffset}),this._marker.on("click",this._onClick,this),this._map.on("click",this._onClick,this).addLayer(this._marker))},_onClick:function(){this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_onTouch:function(s){this._onMouseMove(s),this._onClick()},_fireCreatedEvent:function(){var s=new L.Marker.Touch(this._marker.getLatLng(),{icon:this.options.icon});L.Draw.Feature.prototype._fireCreatedEvent.call(this,s)}}),L.Edit=L.Edit||{},L.Edit.Marker=L.Handler.extend({initialize:function(s,e){this._marker=s,L.setOptions(this,e)},addHooks:function(){var s=this._marker;s.dragging.enable(),s.on("dragend",this._onDragEnd,s),this._toggleMarkerHighlight()},removeHooks:function(){var s=this._marker;s.dragging.disable(),s.off("dragend",this._onDragEnd,s),this._toggleMarkerHighlight()},_onDragEnd:function(s){var e=s.target;e.edited=!0,this._map.fire("draw:editmove",{layer:e})},_toggleMarkerHighlight:function(){var s=this._marker._icon;s&&(s.style.display="none",L.DomUtil.hasClass(s,"leaflet-edit-marker-selected")?(L.DomUtil.removeClass(s,"leaflet-edit-marker-selected"),this._offsetMarker(s,-4)):(L.DomUtil.addClass(s,"leaflet-edit-marker-selected"),this._offsetMarker(s,4)),s.style.display="")},_offsetMarker:function(s,e){var h=parseInt(s.style.marginTop,10)-e,c=parseInt(s.style.marginLeft,10)-e;s.style.marginTop=h+"px",s.style.marginLeft=c+"px"}}),L.Marker.addInitHook(function(){L.Edit.Marker&&(this.editing=new L.Edit.Marker(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.Poly=L.Handler.extend({options:{},initialize:function(s,e){this.latlngs=[s._latlngs],s._holes&&(this.latlngs=this.latlngs.concat(s._holes)),this._poly=s,L.setOptions(this,e),this._poly.on("revert-edited",this._updateLatLngs,this)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._poly._latlngs)?this._poly._latlngs:this._poly._latlngs[0]:this._poly._latlngs},_eachVertexHandler:function(s){for(var e=0;e<this._verticesHandlers.length;e++)s(this._verticesHandlers[e])},addHooks:function(){this._initHandlers(),this._eachVertexHandler(function(s){s.addHooks()})},removeHooks:function(){this._eachVertexHandler(function(s){s.removeHooks()})},updateMarkers:function(){this._eachVertexHandler(function(s){s.updateMarkers()})},_initHandlers:function(){this._verticesHandlers=[];for(var s=0;s<this.latlngs.length;s++)this._verticesHandlers.push(new L.Edit.PolyVerticesEdit(this._poly,this.latlngs[s],this.options))},_updateLatLngs:function(s){this.latlngs=[s.layer._latlngs],s.layer._holes&&(this.latlngs=this.latlngs.concat(s.layer._holes))}}),L.Edit.PolyVerticesEdit=L.Handler.extend({options:{icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),drawError:{color:"#b00b00",timeout:1e3}},initialize:function(s,e,h){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this._poly=s,h&&h.drawError&&(h.drawError=L.Util.extend({},this.options.drawError,h.drawError)),this._latlngs=e,L.setOptions(this,h)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._latlngs)?this._latlngs:this._latlngs[0]:this._latlngs},addHooks:function(){var s=this._poly;s instanceof L.Polygon||(s.options.fill=!1,s.options.editing&&(s.options.editing.fill=!1)),s.setStyle(s.options.editing),this._poly._map&&(this._map=this._poly._map,this._markerGroup||this._initMarkers(),this._poly._map.addLayer(this._markerGroup))},removeHooks:function(){var s=this._poly;s.setStyle(s.options.original),s._map&&(s._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers)},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._markers=[];var s,e,h,c,f=this._defaultShape();for(s=0,h=f.length;s<h;s++)c=this._createMarker(f[s],s),c.on("click",this._onMarkerClick,this),this._markers.push(c);var v,t;for(s=0,e=h-1;s<h;e=s++)(s!==0||L.Polygon&&this._poly instanceof L.Polygon)&&(v=this._markers[e],t=this._markers[s],this._createMiddleMarker(v,t),this._updatePrevNext(v,t))},_createMarker:function(s,e){var h=new L.Marker.Touch(s,{draggable:!0,icon:this.options.icon});return h._origLatLng=s,h._index=e,h.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._fireEdit,this).on("touchmove",this._onTouchMove,this).on("touchend",this._fireEdit,this).on("MSPointerMove",this._onTouchMove,this).on("MSPointerUp",this._fireEdit,this),this._markerGroup.addLayer(h),h},_onMarkerDragStart:function(){this._poly.fire("editstart")},_spliceLatLngs:function(){var s=this._defaultShape(),e=[].splice.apply(s,arguments);return this._poly._convertLatLngs(s,!0),this._poly.redraw(),e},_removeMarker:function(s){var e=s._index;this._markerGroup.removeLayer(s),this._markers.splice(e,1),this._spliceLatLngs(e,1),this._updateIndexes(e,-1),s.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._fireEdit,this).off("touchmove",this._onMarkerDrag,this).off("touchend",this._fireEdit,this).off("click",this._onMarkerClick,this).off("MSPointerMove",this._onTouchMove,this).off("MSPointerUp",this._fireEdit,this)},_fireEdit:function(){this._poly.edited=!0,this._poly.fire("edit"),this._poly._map.fire("draw:editvertex",{layers:this._markerGroup})},_onMarkerDrag:function(s){var e=s.target,h=this._poly;if(L.extend(e._origLatLng,e._latlng),e._middleLeft&&e._middleLeft.setLatLng(this._getMiddleLatLng(e._prev,e)),e._middleRight&&e._middleRight.setLatLng(this._getMiddleLatLng(e,e._next)),h.options.poly){var c=h._map._editTooltip;if(!h.options.poly.allowIntersection&&h.intersects()){var f=h.options.color;h.setStyle({color:this.options.drawError.color}),L.version.indexOf("0.7")!==0&&e.dragging._draggable._onUp(s),this._onMarkerClick(s),c&&c.updateContent({text:L.drawLocal.draw.handlers.polyline.error}),setTimeout(function(){h.setStyle({color:f}),c&&c.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext})},1e3)}}this._poly.redraw(),this._poly.fire("editdrag")},_onMarkerClick:function(s){var e=L.Polygon&&this._poly instanceof L.Polygon?4:3,h=s.target;this._defaultShape().length<e||(this._removeMarker(h),this._updatePrevNext(h._prev,h._next),h._middleLeft&&this._markerGroup.removeLayer(h._middleLeft),h._middleRight&&this._markerGroup.removeLayer(h._middleRight),h._prev&&h._next?this._createMiddleMarker(h._prev,h._next):h._prev?h._next||(h._prev._middleRight=null):h._next._middleLeft=null,this._fireEdit())},_onTouchMove:function(s){var e=this._map.mouseEventToLayerPoint(s.originalEvent.touches[0]),h=this._map.layerPointToLatLng(e),c=s.target;L.extend(c._origLatLng,h),c._middleLeft&&c._middleLeft.setLatLng(this._getMiddleLatLng(c._prev,c)),c._middleRight&&c._middleRight.setLatLng(this._getMiddleLatLng(c,c._next)),this._poly.redraw(),this.updateMarkers()},_updateIndexes:function(s,e){this._markerGroup.eachLayer(function(h){h._index>s&&(h._index+=e)})},_createMiddleMarker:function(s,e){var h,c,f,v=this._getMiddleLatLng(s,e),t=this._createMarker(v);t.setOpacity(.6),s._middleRight=e._middleLeft=t,c=function(){t.off("touchmove",c,this);var i=e._index;t._index=i,t.off("click",h,this).on("click",this._onMarkerClick,this),v.lat=t.getLatLng().lat,v.lng=t.getLatLng().lng,this._spliceLatLngs(i,0,v),this._markers.splice(i,0,t),t.setOpacity(1),this._updateIndexes(i,1),e._index++,this._updatePrevNext(s,t),this._updatePrevNext(t,e),this._poly.fire("editstart")},f=function(){t.off("dragstart",c,this),t.off("dragend",f,this),t.off("touchmove",c,this),this._createMiddleMarker(s,t),this._createMiddleMarker(t,e)},h=function(){c.call(this),f.call(this),this._fireEdit()},t.on("click",h,this).on("dragstart",c,this).on("dragend",f,this).on("touchmove",c,this),this._markerGroup.addLayer(t)},_updatePrevNext:function(s,e){s&&(s._next=e),e&&(e._prev=s)},_getMiddleLatLng:function(s,e){var h=this._poly._map,c=h.project(s.getLatLng()),f=h.project(e.getLatLng());return h.unproject(c._add(f)._divideBy(2))}}),L.Polyline.addInitHook(function(){this.editing||(L.Edit.Poly&&(this.editing=new L.Edit.Poly(this,this.options.poly),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()}))}),L.Edit=L.Edit||{},L.Edit.SimpleShape=L.Handler.extend({options:{moveIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move"}),resizeIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize"}),touchMoveIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move leaflet-touch-icon"}),touchResizeIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize leaflet-touch-icon"})},initialize:function(s,e){L.Browser.touch&&(this.options.moveIcon=this.options.touchMoveIcon,this.options.resizeIcon=this.options.touchResizeIcon),this._shape=s,L.Util.setOptions(this,e)},addHooks:function(){var s=this._shape;this._shape._map&&(this._map=this._shape._map,s.setStyle(s.options.editing),s._map&&(this._map=s._map,this._markerGroup||this._initMarkers(),this._map.addLayer(this._markerGroup)))},removeHooks:function(){var s=this._shape;if(s.setStyle(s.options.original),s._map){this._unbindMarker(this._moveMarker);for(var e=0,h=this._resizeMarkers.length;e<h;e++)this._unbindMarker(this._resizeMarkers[e]);this._resizeMarkers=null,this._map.removeLayer(this._markerGroup),delete this._markerGroup}this._map=null},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._createMoveMarker(),this._createResizeMarker()},_createMoveMarker:function(){},_createResizeMarker:function(){},_createMarker:function(s,e){var h=new L.Marker.Touch(s,{draggable:!0,icon:e,zIndexOffset:10});return this._bindMarker(h),this._markerGroup.addLayer(h),h},_bindMarker:function(s){s.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._onMarkerDragEnd,this).on("touchstart",this._onTouchStart,this).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onTouchEnd,this).on("MSPointerUp",this._onTouchEnd,this)},_unbindMarker:function(s){s.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._onMarkerDragEnd,this).off("touchstart",this._onTouchStart,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onTouchEnd,this).off("MSPointerUp",this._onTouchEnd,this)},_onMarkerDragStart:function(s){var e=s.target;e.setOpacity(0),this._shape.fire("editstart")},_fireEdit:function(){this._shape.edited=!0,this._shape.fire("edit")},_onMarkerDrag:function(s){var e=s.target,h=e.getLatLng();e===this._moveMarker?this._move(h):this._resize(h),this._shape.redraw(),this._shape.fire("editdrag")},_onMarkerDragEnd:function(s){var e=s.target;e.setOpacity(1),this._fireEdit()},_onTouchStart:function(s){if(L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,s),typeof this._getCorners=="function"){var e=this._getCorners(),h=s.target,c=h._cornerIndex;h.setOpacity(0),this._oppositeCorner=e[(c+2)%4],this._toggleCornerMarkers(0,c)}this._shape.fire("editstart")},_onTouchMove:function(s){var e=this._map.mouseEventToLayerPoint(s.originalEvent.touches[0]),h=this._map.layerPointToLatLng(e),c=s.target;return c===this._moveMarker?this._move(h):this._resize(h),this._shape.redraw(),!1},_onTouchEnd:function(s){var e=s.target;e.setOpacity(1),this.updateMarkers(),this._fireEdit()},_move:function(){},_resize:function(){}}),L.Edit=L.Edit||{},L.Edit.Rectangle=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var s=this._shape.getBounds(),e=s.getCenter();this._moveMarker=this._createMarker(e,this.options.moveIcon)},_createResizeMarker:function(){var s=this._getCorners();this._resizeMarkers=[];for(var e=0,h=s.length;e<h;e++)this._resizeMarkers.push(this._createMarker(s[e],this.options.resizeIcon)),this._resizeMarkers[e]._cornerIndex=e},_onMarkerDragStart:function(s){L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,s);var e=this._getCorners(),h=s.target,c=h._cornerIndex;this._oppositeCorner=e[(c+2)%4],this._toggleCornerMarkers(0,c)},_onMarkerDragEnd:function(s){var e,h,c=s.target;c===this._moveMarker&&(e=this._shape.getBounds(),h=e.getCenter(),c.setLatLng(h)),this._toggleCornerMarkers(1),this._repositionCornerMarkers(),L.Edit.SimpleShape.prototype._onMarkerDragEnd.call(this,s)},_move:function(s){for(var e,h=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),c=this._shape.getBounds(),f=c.getCenter(),v=[],t=0,i=h.length;t<i;t++)e=[h[t].lat-f.lat,h[t].lng-f.lng],v.push([s.lat+e[0],s.lng+e[1]]);this._shape.setLatLngs(v),this._repositionCornerMarkers(),this._map.fire("draw:editmove",{layer:this._shape})},_resize:function(s){var e;this._shape.setBounds(L.latLngBounds(s,this._oppositeCorner)),e=this._shape.getBounds(),this._moveMarker.setLatLng(e.getCenter()),this._map.fire("draw:editresize",{layer:this._shape})},_getCorners:function(){var s=this._shape.getBounds(),e=s.getNorthWest(),h=s.getNorthEast(),c=s.getSouthEast(),f=s.getSouthWest();return[e,h,c,f]},_toggleCornerMarkers:function(s){for(var e=0,h=this._resizeMarkers.length;e<h;e++)this._resizeMarkers[e].setOpacity(s)},_repositionCornerMarkers:function(){for(var s=this._getCorners(),e=0,h=this._resizeMarkers.length;e<h;e++)this._resizeMarkers[e].setLatLng(s[e])}}),L.Rectangle.addInitHook(function(){L.Edit.Rectangle&&(this.editing=new L.Edit.Rectangle(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.Circle=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var s=this._shape.getLatLng();this._moveMarker=this._createMarker(s,this.options.moveIcon)},_createResizeMarker:function(){var s=this._shape.getLatLng(),e=this._getResizeMarkerPoint(s);this._resizeMarkers=[],this._resizeMarkers.push(this._createMarker(e,this.options.resizeIcon))},_getResizeMarkerPoint:function(s){var e=this._shape._radius*Math.cos(Math.PI/4),h=this._map.project(s);return this._map.unproject([h.x+e,h.y-e])},_move:function(s){var e=this._getResizeMarkerPoint(s);this._resizeMarkers[0].setLatLng(e),this._shape.setLatLng(s),this._map.fire("draw:editmove",{layer:this._shape})},_resize:function(s){var e=this._moveMarker.getLatLng(),h=e.distanceTo(s);this._shape.setRadius(h),this._map.fire("draw:editresize",{layer:this._shape})}}),L.Circle.addInitHook(function(){L.Edit.Circle&&(this.editing=new L.Edit.Circle(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()})}),L.Map.mergeOptions({touchExtend:!0}),L.Map.TouchExtend=L.Handler.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane},addHooks:function(){L.DomEvent.on(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.on(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.on(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.on(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.on(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.on(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.on(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.on(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.on(this._container,"touchleave",this._onTouchLeave,this))},removeHooks:function(){L.DomEvent.off(this._container,"touchstart",this._onTouchStart),L.DomEvent.off(this._container,"touchend",this._onTouchEnd),L.DomEvent.off(this._container,"touchmove",this._onTouchMove),this._detectIE()?(L.DomEvent.off(this._container,"MSPointerDowm",this._onTouchStart),L.DomEvent.off(this._container,"MSPointerUp",this._onTouchEnd),L.DomEvent.off(this._container,"MSPointerMove",this._onTouchMove),L.DomEvent.off(this._container,"MSPointerCancel",this._onTouchCancel)):(L.DomEvent.off(this._container,"touchcancel",this._onTouchCancel),L.DomEvent.off(this._container,"touchleave",this._onTouchLeave))},_touchEvent:function(s,e){var h={};if(typeof s.touches!="undefined"){if(!s.touches.length)return;h=s.touches[0]}else if(s.pointerType!=="touch"||(h=s,!this._filterClick(s)))return;var c=this._map.mouseEventToContainerPoint(h),f=this._map.mouseEventToLayerPoint(h),v=this._map.layerPointToLatLng(f);this._map.fire(e,{latlng:v,layerPoint:f,containerPoint:c,pageX:h.pageX,pageY:h.pageY,originalEvent:s})},_filterClick:function(s){var e=s.timeStamp||s.originalEvent.timeStamp,h=L.DomEvent._lastClick&&e-L.DomEvent._lastClick;return h&&h>100&&h<500||s.target._simulatedClick&&!s._simulated?(L.DomEvent.stop(s),!1):(L.DomEvent._lastClick=e,!0)},_onTouchStart:function(s){if(this._map._loaded){var e="touchstart";this._touchEvent(s,e)}},_onTouchEnd:function(s){if(this._map._loaded){var e="touchend";this._touchEvent(s,e)}},_onTouchCancel:function(s){if(this._map._loaded){var e="touchcancel";this._detectIE()&&(e="pointercancel"),this._touchEvent(s,e)}},_onTouchLeave:function(s){if(this._map._loaded){var e="touchleave";this._touchEvent(s,e)}},_onTouchMove:function(s){if(this._map._loaded){var e="touchmove";this._touchEvent(s,e)}},_detectIE:function(){var s=u.navigator.userAgent,e=s.indexOf("MSIE ");if(e>0)return parseInt(s.substring(e+5,s.indexOf(".",e)),10);var h=s.indexOf("Trident/");if(h>0){var c=s.indexOf("rv:");return parseInt(s.substring(c+3,s.indexOf(".",c)),10)}var f=s.indexOf("Edge/");return f>0&&parseInt(s.substring(f+5,s.indexOf(".",f)),10)}}),L.Map.addInitHook("addHandler","touchExtend",L.Map.TouchExtend),L.Marker.Touch=L.Marker.extend({_initInteraction:function(){return this.addInteractiveTarget?L.Marker.prototype._initInteraction.apply(this):this._initInteractionLegacy()},_initInteractionLegacy:function(){if(this.options.clickable){var s=this._icon,e=["dblclick","mousedown","mouseover","mouseout","contextmenu","touchstart","touchend","touchmove"];this._detectIE?e.concat(["MSPointerDown","MSPointerUp","MSPointerMove","MSPointerCancel"]):e.concat(["touchcancel"]),L.DomUtil.addClass(s,"leaflet-clickable"),L.DomEvent.on(s,"click",this._onMouseClick,this),L.DomEvent.on(s,"keypress",this._onKeyPress,this);for(var h=0;h<e.length;h++)L.DomEvent.on(s,e[h],this._fireMouseEvent,this);L.Handler.MarkerDrag&&(this.dragging=new L.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_detectIE:function(){var s=u.navigator.userAgent,e=s.indexOf("MSIE ");if(e>0)return parseInt(s.substring(e+5,s.indexOf(".",e)),10);var h=s.indexOf("Trident/");if(h>0){var c=s.indexOf("rv:");return parseInt(s.substring(c+3,s.indexOf(".",c)),10)}var f=s.indexOf("Edge/");return f>0&&parseInt(s.substring(f+5,s.indexOf(".",f)),10)}}),L.LatLngUtil={cloneLatLngs:function(s){for(var e=[],h=0,c=s.length;h<c;h++)Array.isArray(s[h])?e.push(L.LatLngUtil.cloneLatLngs(s[h])):e.push(this.cloneLatLng(s[h]));return e},cloneLatLng:function(s){return L.latLng(s.lat,s.lng)}},L.GeometryUtil=L.extend(L.GeometryUtil||{},{geodesicArea:function(s){var e,h,c=s.length,f=0,v=Math.PI/180;if(c>2){for(var t=0;t<c;t++)e=s[t],h=s[(t+1)%c],f+=(h.lng-e.lng)*v*(2+Math.sin(e.lat*v)+Math.sin(h.lat*v));f=6378137*f*6378137/2}return Math.abs(f)},readableArea:function(s,e){var h;return e?h=s>=1e4?(1e-4*s).toFixed(2)+" ha":s.toFixed(2)+" m&sup2;":(s/=.836127,h=s>=3097600?(s/3097600).toFixed(2)+" mi&sup2;":s>=4840?(s/4840).toFixed(2)+" acres":Math.ceil(s)+" yd&sup2;"),h},readableDistance:function(s,e,h){var c;if(e)c=s>1e3?(s/1e3).toFixed(2)+" km":Math.ceil(s)+" m";else if(s*=1.09361,s>1760)c=(s/1760).toFixed(2)+" miles";else{var f=" yd";h&&(s=3*s,f=" ft"),c=Math.ceil(s)+f}return c}}),L.Util.extend(L.LineUtil,{segmentsIntersect:function(s,e,h,c){return this._checkCounterclockwise(s,h,c)!==this._checkCounterclockwise(e,h,c)&&this._checkCounterclockwise(s,e,h)!==this._checkCounterclockwise(s,e,c)},_checkCounterclockwise:function(s,e,h){return(h.y-s.y)*(e.x-s.x)>(e.y-s.y)*(h.x-s.x)}}),L.Polyline.include({intersects:function(){var s,e,h,c=this._getProjectedPoints(),f=c?c.length:0;if(this._tooFewPointsForIntersection())return!1;for(s=f-1;s>=3;s--)if(e=c[s-1],h=c[s],this._lineSegmentsIntersectsRange(e,h,s-2))return!0;return!1},newLatLngIntersects:function(s,e){return!!this._map&&this.newPointIntersects(this._map.latLngToLayerPoint(s),e)},newPointIntersects:function(s,e){var h=this._getProjectedPoints(),c=h?h.length:0,f=h?h[c-1]:null,v=c-2;return!this._tooFewPointsForIntersection(1)&&this._lineSegmentsIntersectsRange(f,s,v,e?1:0)},_tooFewPointsForIntersection:function(s){var e=this._getProjectedPoints(),h=e?e.length:0;return h+=s||0,!e||h<=3},_lineSegmentsIntersectsRange:function(s,e,h,c){var f,v,t=this._getProjectedPoints();c=c||0;for(var i=h;i>c;i--)if(f=t[i-1],v=t[i],L.LineUtil.segmentsIntersect(s,e,f,v))return!0;return!1},_getProjectedPoints:function(){if(!this._defaultShape)return this._originalPoints;for(var s=[],e=this._defaultShape(),h=0;h<e.length;h++)s.push(this._map.latLngToLayerPoint(e[h]));return s}}),L.Polygon.include({intersects:function(){var s,e,h,c,f=this._getProjectedPoints();return!this._tooFewPointsForIntersection()&&(!!L.Polyline.prototype.intersects.call(this)||(s=f.length,e=f[0],h=f[s-1],c=s-2,this._lineSegmentsIntersectsRange(h,e,c,1)))}}),L.Control.Draw=L.Control.extend({options:{position:"topleft",draw:{},edit:!1},initialize:function(s){if(L.version<"0.7")throw new Error("Leaflet.draw 0.2.3+ requires Leaflet 0.7.0+. Download latest from https://github.com/Leaflet/Leaflet/");L.Control.prototype.initialize.call(this,s);var e;this._toolbars={},L.DrawToolbar&&this.options.draw&&(e=new L.DrawToolbar(this.options.draw),this._toolbars[L.DrawToolbar.TYPE]=e,this._toolbars[L.DrawToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.EditToolbar&&this.options.edit&&(e=new L.EditToolbar(this.options.edit),this._toolbars[L.EditToolbar.TYPE]=e,this._toolbars[L.EditToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.toolbar=this},onAdd:function(s){var e,h=L.DomUtil.create("div","leaflet-draw"),c=!1,f="leaflet-draw-toolbar-top";for(var v in this._toolbars)this._toolbars.hasOwnProperty(v)&&(e=this._toolbars[v].addToolbar(s),e&&(c||(L.DomUtil.hasClass(e,f)||L.DomUtil.addClass(e.childNodes[0],f),c=!0),h.appendChild(e)));return h},onRemove:function(){for(var s in this._toolbars)this._toolbars.hasOwnProperty(s)&&this._toolbars[s].removeToolbar()},setDrawingOptions:function(s){for(var e in this._toolbars)this._toolbars[e]instanceof L.DrawToolbar&&this._toolbars[e].setOptions(s)},_toolbarEnabled:function(s){var e=s.target;for(var h in this._toolbars)this._toolbars[h]!==e&&this._toolbars[h].disable()}}),L.Map.mergeOptions({drawControlTooltips:!0,drawControl:!1}),L.Map.addInitHook(function(){this.options.drawControl&&(this.drawControl=new L.Control.Draw,this.addControl(this.drawControl))}),L.Toolbar=L.Class.extend({includes:[L.Mixin.Events],initialize:function(s){L.setOptions(this,s),this._modes={},this._actionButtons=[],this._activeMode=null},enabled:function(){return this._activeMode!==null},disable:function(){this.enabled()&&this._activeMode.handler.disable()},addToolbar:function(s){var e,h=L.DomUtil.create("div","leaflet-draw-section"),c=0,f=this._toolbarClass||"",v=this.getModeHandlers(s);for(this._toolbarContainer=L.DomUtil.create("div","leaflet-draw-toolbar leaflet-bar"),this._map=s,e=0;e<v.length;e++)v[e].enabled&&this._initModeHandler(v[e].handler,this._toolbarContainer,c++,f,v[e].title);if(c)return this._lastButtonIndex=--c,this._actionsContainer=L.DomUtil.create("ul","leaflet-draw-actions"),h.appendChild(this._toolbarContainer),h.appendChild(this._actionsContainer),h},removeToolbar:function(){for(var s in this._modes)this._modes.hasOwnProperty(s)&&(this._disposeButton(this._modes[s].button,this._modes[s].handler.enable,this._modes[s].handler),this._modes[s].handler.disable(),this._modes[s].handler.off("enabled",this._handlerActivated,this).off("disabled",this._handlerDeactivated,this));this._modes={};for(var e=0,h=this._actionButtons.length;e<h;e++)this._disposeButton(this._actionButtons[e].button,this._actionButtons[e].callback,this);this._actionButtons=[],this._actionsContainer=null},_initModeHandler:function(s,e,h,c,f){var v=s.type;this._modes[v]={},this._modes[v].handler=s,this._modes[v].button=this._createButton({type:v,title:f,className:c+"-"+v,container:e,callback:this._modes[v].handler.enable,context:this._modes[v].handler}),this._modes[v].buttonIndex=h,this._modes[v].handler.on("enabled",this._handlerActivated,this).on("disabled",this._handlerDeactivated,this)},_createButton:function(s){var e=L.DomUtil.create("a",s.className||"",s.container);return e.href="#",s.text&&(e.innerHTML=s.text),s.title&&(e.title=s.title),L.DomEvent.on(e,"click",L.DomEvent.stopPropagation).on(e,"mousedown",L.DomEvent.stopPropagation).on(e,"dblclick",L.DomEvent.stopPropagation).on(e,"click",L.DomEvent.preventDefault).on(e,"click",s.callback,s.context),e},_disposeButton:function(s,e){L.DomEvent.off(s,"click",L.DomEvent.stopPropagation).off(s,"mousedown",L.DomEvent.stopPropagation).off(s,"dblclick",L.DomEvent.stopPropagation).off(s,"click",L.DomEvent.preventDefault).off(s,"click",e)},_handlerActivated:function(s){this.disable(),this._activeMode=this._modes[s.handler],L.DomUtil.addClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._showActionsToolbar(),this.fire("enable")},_handlerDeactivated:function(){this._hideActionsToolbar(),L.DomUtil.removeClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._activeMode=null,this.fire("disable")},_createActions:function(s){var e,h,c,f,v=this._actionsContainer,t=this.getActions(s),i=t.length;for(h=0,c=this._actionButtons.length;h<c;h++)this._disposeButton(this._actionButtons[h].button,this._actionButtons[h].callback);for(this._actionButtons=[];v.firstChild;)v.removeChild(v.firstChild);for(var o=0;o<i;o++)"enabled"in t[o]&&!t[o].enabled||(e=L.DomUtil.create("li","",v),f=this._createButton({title:t[o].title,text:t[o].text,container:e,callback:t[o].callback,context:t[o].context}),this._actionButtons.push({button:f,callback:t[o].callback}))},_showActionsToolbar:function(){var s=this._activeMode.buttonIndex,e=this._lastButtonIndex,h=this._activeMode.button.offsetTop-1;this._createActions(this._activeMode.handler),this._actionsContainer.style.top=h+"px",s===0&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-top")),s===e&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-bottom")),this._actionsContainer.style.display="block"},_hideActionsToolbar:function(){this._actionsContainer.style.display="none",L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-top"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-bottom")}}),L.Draw=L.Draw||{},L.Draw.Tooltip=L.Class.extend({initialize:function(s){this._map=s,this._popupPane=s._panes.popupPane,this._container=s.options.drawControlTooltips?L.DomUtil.create("div","leaflet-draw-tooltip",this._popupPane):null,this._singleLineLabel=!1,this._map.on("mouseout",this._onMouseOut,this)},dispose:function(){this._map.off("mouseout",this._onMouseOut,this),this._container&&(this._popupPane.removeChild(this._container),this._container=null)},updateContent:function(s){return this._container?(s.subtext=s.subtext||"",s.subtext.length!==0||this._singleLineLabel?s.subtext.length>0&&this._singleLineLabel&&(L.DomUtil.removeClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!1):(L.DomUtil.addClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!0),this._container.innerHTML=(s.subtext.length>0?'<span class="leaflet-draw-tooltip-subtext">'+s.subtext+"</span><br />":"")+"<span>"+s.text+"</span>",this):this},updatePosition:function(s){var e=this._map.latLngToLayerPoint(s),h=this._container;return this._container&&(h.style.visibility="inherit",L.DomUtil.setPosition(h,e)),this},showAsError:function(){return this._container&&L.DomUtil.addClass(this._container,"leaflet-error-draw-tooltip"),this},removeError:function(){return this._container&&L.DomUtil.removeClass(this._container,"leaflet-error-draw-tooltip"),this},_onMouseOut:function(){this._container&&(this._container.style.visibility="hidden")}}),L.DrawToolbar=L.Toolbar.extend({statics:{TYPE:"draw"},options:{polyline:{},polygon:{},rectangle:{},circle:{},marker:{}},initialize:function(s){for(var e in this.options)this.options.hasOwnProperty(e)&&s[e]&&(s[e]=L.extend({},this.options[e],s[e]));this._toolbarClass="leaflet-draw-draw",L.Toolbar.prototype.initialize.call(this,s)},getModeHandlers:function(s){return[{enabled:this.options.polyline,handler:new L.Draw.Polyline(s,this.options.polyline),title:L.drawLocal.draw.toolbar.buttons.polyline},{enabled:this.options.polygon,handler:new L.Draw.Polygon(s,this.options.polygon),title:L.drawLocal.draw.toolbar.buttons.polygon},{enabled:this.options.rectangle,handler:new L.Draw.Rectangle(s,this.options.rectangle),title:L.drawLocal.draw.toolbar.buttons.rectangle},{enabled:this.options.circle,handler:new L.Draw.Circle(s,this.options.circle),title:L.drawLocal.draw.toolbar.buttons.circle},{enabled:this.options.marker,handler:new L.Draw.Marker(s,this.options.marker),title:L.drawLocal.draw.toolbar.buttons.marker}]},getActions:function(s){return[{enabled:s.completeShape,title:L.drawLocal.draw.toolbar.finish.title,text:L.drawLocal.draw.toolbar.finish.text,callback:s.completeShape,context:s},{enabled:s.deleteLastVertex,title:L.drawLocal.draw.toolbar.undo.title,text:L.drawLocal.draw.toolbar.undo.text,callback:s.deleteLastVertex,context:s},{title:L.drawLocal.draw.toolbar.actions.title,text:L.drawLocal.draw.toolbar.actions.text,callback:this.disable,context:this}]},setOptions:function(s){L.setOptions(this,s);for(var e in this._modes)this._modes.hasOwnProperty(e)&&s.hasOwnProperty(e)&&this._modes[e].handler.setOptions(s[e])}}),L.EditToolbar=L.Toolbar.extend({statics:{TYPE:"edit"},options:{edit:{selectedPathOptions:{dashArray:"10, 10",fill:!0,fillColor:"#fe57a1",fillOpacity:.1,maintainColor:!1}},remove:{},poly:null,featureGroup:null},initialize:function(s){s.edit&&(typeof s.edit.selectedPathOptions=="undefined"&&(s.edit.selectedPathOptions=this.options.edit.selectedPathOptions),s.edit.selectedPathOptions=L.extend({},this.options.edit.selectedPathOptions,s.edit.selectedPathOptions)),s.remove&&(s.remove=L.extend({},this.options.remove,s.remove)),s.poly&&(s.poly=L.extend({},this.options.poly,s.poly)),this._toolbarClass="leaflet-draw-edit",L.Toolbar.prototype.initialize.call(this,s),this._selectedFeatureCount=0},getModeHandlers:function(s){var e=this.options.featureGroup;return[{enabled:this.options.edit,handler:new L.EditToolbar.Edit(s,{featureGroup:e,selectedPathOptions:this.options.edit.selectedPathOptions,poly:this.options.poly}),title:L.drawLocal.edit.toolbar.buttons.edit},{enabled:this.options.remove,handler:new L.EditToolbar.Delete(s,{featureGroup:e}),title:L.drawLocal.edit.toolbar.buttons.remove}]},getActions:function(){return[{title:L.drawLocal.edit.toolbar.actions.save.title,text:L.drawLocal.edit.toolbar.actions.save.text,callback:this._save,context:this},{title:L.drawLocal.edit.toolbar.actions.cancel.title,text:L.drawLocal.edit.toolbar.actions.cancel.text,callback:this.disable,context:this}]},addToolbar:function(s){var e=L.Toolbar.prototype.addToolbar.call(this,s);return this._checkDisabled(),this.options.featureGroup.on("layeradd layerremove",this._checkDisabled,this),e},removeToolbar:function(){this.options.featureGroup.off("layeradd layerremove",this._checkDisabled,this),L.Toolbar.prototype.removeToolbar.call(this)},disable:function(){this.enabled()&&(this._activeMode.handler.revertLayers(),L.Toolbar.prototype.disable.call(this))},_save:function(){this._activeMode.handler.save(),this._activeMode&&this._activeMode.handler.disable()},_checkDisabled:function(){var s,e=this.options.featureGroup,h=e.getLayers().length!==0;this.options.edit&&(s=this._modes[L.EditToolbar.Edit.TYPE].button,h?L.DomUtil.removeClass(s,"leaflet-disabled"):L.DomUtil.addClass(s,"leaflet-disabled"),s.setAttribute("title",h?L.drawLocal.edit.toolbar.buttons.edit:L.drawLocal.edit.toolbar.buttons.editDisabled)),this.options.remove&&(s=this._modes[L.EditToolbar.Delete.TYPE].button,h?L.DomUtil.removeClass(s,"leaflet-disabled"):L.DomUtil.addClass(s,"leaflet-disabled"),s.setAttribute("title",h?L.drawLocal.edit.toolbar.buttons.remove:L.drawLocal.edit.toolbar.buttons.removeDisabled))}}),L.EditToolbar.Edit=L.Handler.extend({statics:{TYPE:"edit"},includes:L.Mixin.Events,initialize:function(s,e){if(L.Handler.prototype.initialize.call(this,s),L.setOptions(this,e),this._featureGroup=e.featureGroup,!(this._featureGroup instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this._uneditedLayerProps={},this.type=L.EditToolbar.Edit.TYPE},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire("draw:editstart",{handler:this.type}),L.Handler.prototype.enable.call(this),this._featureGroup.on("layeradd",this._enableLayerEdit,this).on("layerremove",this._disableLayerEdit,this))},disable:function(){this._enabled&&(this._featureGroup.off("layeradd",this._enableLayerEdit,this).off("layerremove",this._disableLayerEdit,this),L.Handler.prototype.disable.call(this),this._map.fire("draw:editstop",{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var s=this._map;s&&(s.getContainer().focus(),this._featureGroup.eachLayer(this._enableLayerEdit,this),this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}),s._editTooltip=this._tooltip,this._updateTooltip(),this._map.on("mousemove",this._onMouseMove,this).on("touchmove",this._onMouseMove,this).on("MSPointerMove",this._onMouseMove,this).on("draw:editvertex",this._updateTooltip,this))},removeHooks:function(){this._map&&(this._featureGroup.eachLayer(this._disableLayerEdit,this),this._uneditedLayerProps={},this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this).off("touchmove",this._onMouseMove,this).off("MSPointerMove",this._onMouseMove,this).off("draw:editvertex",this._updateTooltip,this))},revertLayers:function(){this._featureGroup.eachLayer(function(s){this._revertLayer(s)},this)},save:function(){var s=new L.LayerGroup;this._featureGroup.eachLayer(function(e){e.edited&&(s.addLayer(e),e.edited=!1)}),this._map.fire("draw:edited",{layers:s})},_backupLayer:function(s){var e=L.Util.stamp(s);this._uneditedLayerProps[e]||(s instanceof L.Polyline||s instanceof L.Polygon||s instanceof L.Rectangle?this._uneditedLayerProps[e]={latlngs:L.LatLngUtil.cloneLatLngs(s.getLatLngs())}:s instanceof L.Circle?this._uneditedLayerProps[e]={latlng:L.LatLngUtil.cloneLatLng(s.getLatLng()),radius:s.getRadius()}:s instanceof L.Marker&&(this._uneditedLayerProps[e]={latlng:L.LatLngUtil.cloneLatLng(s.getLatLng())}))},_getTooltipText:function(){return{text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}},_updateTooltip:function(){this._tooltip.updateContent(this._getTooltipText())},_revertLayer:function(s){var e=L.Util.stamp(s);s.edited=!1,this._uneditedLayerProps.hasOwnProperty(e)&&(s instanceof L.Polyline||s instanceof L.Polygon||s instanceof L.Rectangle?s.setLatLngs(this._uneditedLayerProps[e].latlngs):s instanceof L.Circle?(s.setLatLng(this._uneditedLayerProps[e].latlng),s.setRadius(this._uneditedLayerProps[e].radius)):s instanceof L.Marker&&s.setLatLng(this._uneditedLayerProps[e].latlng),s.fire("revert-edited",{layer:s}))},_enableLayerEdit:function(s){var e,h,c=s.layer||s.target||s;this._backupLayer(c),this.options.poly&&(h=L.Util.extend({},this.options.poly),c.options.poly=h),this.options.selectedPathOptions&&(e=L.Util.extend({},this.options.selectedPathOptions),e.maintainColor&&(e.color=c.options.color,e.fillColor=c.options.fillColor),c.options.original=L.extend({},c.options),c.options.editing=e),c instanceof L.Marker?(c.editing&&c.editing.enable(),c.dragging.enable(),c.on("dragend",this._onMarkerDragEnd).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onMarkerDragEnd,this).on("MSPointerUp",this._onMarkerDragEnd,this)):c.editing.enable()},_disableLayerEdit:function(s){var e=s.layer||s.target||s;e.edited=!1,e.editing&&e.editing.disable(),delete e.options.editing,delete e.options.original,this._selectedPathOptions&&(e instanceof L.Marker?this._toggleMarkerHighlight(e):(e.setStyle(e.options.previousOptions),delete e.options.previousOptions)),e instanceof L.Marker?(e.dragging.disable(),e.off("dragend",this._onMarkerDragEnd,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onMarkerDragEnd,this).off("MSPointerUp",this._onMarkerDragEnd,this)):e.editing.disable()},_onMouseMove:function(s){this._tooltip.updatePosition(s.latlng)},_onMarkerDragEnd:function(s){var e=s.target;e.edited=!0,this._map.fire("draw:editmove",{layer:e})},_onTouchMove:function(s){var e=s.originalEvent.changedTouches[0],h=this._map.mouseEventToLayerPoint(e),c=this._map.layerPointToLatLng(h);s.target.setLatLng(c)},_hasAvailableLayers:function(){return this._featureGroup.getLayers().length!==0}}),L.EditToolbar.Delete=L.Handler.extend({statics:{TYPE:"remove"},includes:L.Mixin.Events,initialize:function(s,e){if(L.Handler.prototype.initialize.call(this,s),L.Util.setOptions(this,e),this._deletableLayers=this.options.featureGroup,!(this._deletableLayers instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this.type=L.EditToolbar.Delete.TYPE},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire("draw:deletestart",{handler:this.type}),L.Handler.prototype.enable.call(this),this._deletableLayers.on("layeradd",this._enableLayerDelete,this).on("layerremove",this._disableLayerDelete,this))},disable:function(){this._enabled&&(this._deletableLayers.off("layeradd",this._enableLayerDelete,this).off("layerremove",this._disableLayerDelete,this),L.Handler.prototype.disable.call(this),this._map.fire("draw:deletestop",{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var s=this._map;s&&(s.getContainer().focus(),this._deletableLayers.eachLayer(this._enableLayerDelete,this),this._deletedLayers=new L.LayerGroup,this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.remove.tooltip.text}),this._map.on("mousemove",this._onMouseMove,this))},removeHooks:function(){this._map&&(this._deletableLayers.eachLayer(this._disableLayerDelete,this),this._deletedLayers=null,this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this))},revertLayers:function(){this._deletedLayers.eachLayer(function(s){this._deletableLayers.addLayer(s),s.fire("revert-deleted",{layer:s})},this)},save:function(){this._map.fire("draw:deleted",{layers:this._deletedLayers})},_enableLayerDelete:function(s){var e=s.layer||s.target||s;e.on("click",this._removeLayer,this)},_disableLayerDelete:function(s){var e=s.layer||s.target||s;e.off("click",this._removeLayer,this),this._deletedLayers.removeLayer(e)},_removeLayer:function(s){var e=s.layer||s.target||s;this._deletableLayers.removeLayer(e),this._deletedLayers.addLayer(e),e.fire("deleted")},_onMouseMove:function(s){this._tooltip.updatePosition(s.latlng)},_hasAvailableLayers:function(){return this._deletableLayers.getLayers().length!==0}})})(window,document);const Mi=Xt(Pi);xi(Mi).use(Ke).use(de,dt).use(Jt).use(Kt).mount("#app");export{S as _,O as a};
